{"version":3,"sources":["../node_modules/inherits/inherits_browser.js","logo192.png","../node_modules/readable-stream/lib/_stream_duplex.js","../node_modules/events/events.js","../node_modules/core-util-is/lib/util.js","components/general_elements/map/MarkerEditDialog.tsx","components/general_elements/map/Map.tsx","../node_modules/process-nextick-args/index.js","../node_modules/webpack/buildin/module.js","../node_modules/readable-stream/node_modules/safe-buffer/index.js","../node_modules/url/url.js","../node_modules/stream-http/lib/capability.js","../node_modules/stream-http/lib/response.js","../node_modules/readable-stream/readable-browser.js","../node_modules/readable-stream/lib/_stream_readable.js","../node_modules/readable-stream/lib/internal/streams/stream-browser.js","../node_modules/readable-stream/lib/internal/streams/destroy.js","../node_modules/readable-stream/lib/_stream_writable.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/readable-stream/lib/_stream_transform.js","../node_modules/image-size/dist/types.js","../node_modules/image-size/dist/types/ico.js","../node_modules/image-size/dist/readUInt.js","components/entities/location/details/LocationEditView.tsx","../node_modules/node-libs-browser/node_modules/punycode/punycode.js","../node_modules/url/util.js","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","services/DatabaseService.tsx","../node_modules/querystring-es3/encode.js","../node_modules/stream-http/index.js","../node_modules/stream-http/lib/request.js","../node_modules/readable-stream/lib/internal/streams/BufferList.js","../node_modules/util-deprecate/browser.js","../node_modules/safe-buffer/index.js","../node_modules/readable-stream/lib/_stream_passthrough.js","../node_modules/to-arraybuffer/index.js","../node_modules/xtend/immutable.js","../node_modules/builtin-status-codes/browser.js","../node_modules/image-size/dist/index.js","../node_modules/path-browserify/index.js","../node_modules/queue/index.js","../node_modules/image-size/dist/types/bmp.js","../node_modules/image-size/dist/types/cur.js","../node_modules/image-size/dist/types/dds.js","../node_modules/image-size/dist/types/gif.js","../node_modules/image-size/dist/types/icns.js","components/form_elements/IconButton.tsx","../node_modules/image-size/dist/types/j2c.js","../node_modules/image-size/dist/types/jp2.js","../node_modules/image-size/dist/types/jpg.js","../node_modules/image-size/dist/types/ktx.js","../node_modules/image-size/dist/types/png.js","../node_modules/image-size/dist/types/pnm.js","../node_modules/image-size/dist/types/psd.js","../node_modules/image-size/dist/types/svg.js","../node_modules/image-size/dist/types/tiff.js","../node_modules/image-size/dist/types/webp.js","../node_modules/image-size/dist/detector.js","components/form_elements/TextButton.tsx","components/entities/location/details/LocationView.tsx","components/entities/location/details/LocationDetail.tsx","components/form_elements/StringField.tsx","components/navigation/Header.tsx","components/navigation/NavButton.tsx","components/navigation/NavMenu.tsx","components/navigation/Navigation.tsx","components/AppWrapper.tsx","components/general_elements/LinkCheck.tsx","components/general_elements/FormatedText.tsx","hooks/DexieHooks.tsx","components/form_elements/BackButton.tsx","components/general_elements/ToggleStyle.tsx","database/MyDatabase.tsx","components/p2p/P2PSender.tsx","services/PeerIdService.tsx","components/entities/location/details/link_wrapper/IdToLocation.tsx","components/general_elements/Dialog.tsx","components/form_elements/NumberField.tsx","components/SearchbarStyle.tsx","../node_modules/peerjs/dist sync"],"names":["Object","create","module","exports","ctor","superCtor","super_","prototype","constructor","value","enumerable","writable","configurable","TempCtor","pna","require","objectKeys","keys","obj","key","push","Duplex","util","inherits","Readable","Writable","v","length","method","options","this","call","readable","allowHalfOpen","once","onend","_writableState","ended","nextTick","onEndNT","self","end","defineProperty","get","highWaterMark","undefined","_readableState","destroyed","set","_destroy","err","cb","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","emitter","name","Promise","resolve","reject","eventListener","errorListener","removeListener","slice","arguments","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","newListener","emit","unshift","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","handler","len","listeners","addListener","on","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","objectToString","o","toString","isArray","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","re","isObject","isDate","d","isError","e","isFunction","isPrimitive","isBuffer","Buffer","EditDialog","activeElement","onSave","onClose","onDelete","useState","text","label","setLabel","useEffect","Dialog","StringField","onChange","TextButton","icon","faTimes","onClick","faSave","newElement","onSaveClick","styled","div","theme","tile","color","main","backgroundColor","boxShadow","Map","location","editable","onEdit","showEditDialog","setEditDialaog","setActive","mapWrap","useRef","map","setMap","mapHeight","setHeight","bounds","setBounds","gcd","useCallback","a","b","dimension","height","width","divisor","widthratio","heightratio","number","fitBounds","current","clientHeight","MapWrapper","ref","MarkerEditDialog","markers","element","markerList","splice","MapContainer","style","center","zoom","scrollWheelZoom","whenCreated","TileLayer","url","ImageOverlay","markerPositions","Markers","useMapEvents","click","latlng","Icon","iconRetinaUrl","iconUrl","shadowUrl","iconSize","iconAnchor","marker","Marker","Popup","autoPan","minWidth","onOpen","log","editMarker","FormatedText","process","version","indexOf","fn","arg1","arg2","arg3","webpackPolyfill","deprecate","paths","children","l","buffer","copyProps","src","dst","SafeBuffer","encodingOrOffset","from","alloc","allocUnsafe","allocUnsafeSlow","size","fill","encoding","buf","SlowBuffer","punycode","Url","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","parse","urlParse","source","relative","resolveObject","format","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","split","replace","rest","join","trim","simplePath","exec","substr","proto","lowerProto","toLowerCase","match","atSign","hostEnd","hec","lastIndexOf","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","j","k","charCodeAt","validParts","notHost","bit","toASCII","p","h","ae","esc","encodeURIComponent","escape","qm","s","stringify","charAt","rel","result","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","last","hasTrailingSlash","up","isAbsolute","fetch","global","ReadableStream","writableStream","WritableStream","abortController","AbortController","blobConstructor","Blob","ArrayBuffer","xhr","getXHR","XMLHttpRequest","open","XDomainRequest","checkTypeSupport","responseType","haveArrayBuffer","haveSlice","arraybuffer","msstream","mozchunkedarraybuffer","overrideMimeType","vbArray","VBArray","capability","stream","rStates","readyStates","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","IncomingMessage","response","mode","fetchTimer","_mode","headers","rawHeaders","trailers","rawTrailers","_fetchResponse","statusCode","status","statusMessage","statusText","forEach","header","write","chunk","_destroyed","_resumeFetch","close","clearTimeout","abort","body","pipeTo","catch","reader","getReader","read","then","done","_xhr","_pos","responseURL","getAllResponseHeaders","matches","_charset","mimeType","charsetMatch","_read","_onXHRProgress","readyState","responseBody","toArray","responseText","newData","Uint8Array","MSStreamReader","onprogress","byteLength","onload","readAsArrayBuffer","Stream","Transform","PassThrough","ReadableState","EElistenerCount","OurUint8Array","debugUtil","debug","debuglog","StringDecoder","BufferList","destroyImpl","kProxyEvents","isDuplex","objectMode","readableObjectMode","hwm","readableHwm","readableHighWaterMark","defaultHwm","Math","floor","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","awaitDrain","readingMore","decoder","destroy","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","_uint8ArrayToBuffer","addChunk","maybeReadMore","needMoreData","_undestroy","undestroy","isPaused","setEncoding","enc","howMuchToRead","head","data","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","clear","hasStrings","c","next","str","nb","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","x","parseInt","nOrig","doRead","pipe","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onclose","onfinish","ondrain","onerror","ondata","cleanedUp","needDrain","pipeOnDrain","increasedAwaitDrain","pause","event","resume","dests","ev","res","wrap","_this","paused","_fromList","emitErrorNT","readableDestroyed","writableDestroyed","errorEmitted","ending","finished","CorkedRequest","entry","finish","corkReq","callback","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","browser","setImmediate","WritableState","internalUtil","realHasInstance","nop","writableObjectMode","writableHwm","writableHighWaterMark","finalCalled","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","final","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","getBuffer","out","_","Symbol","hasInstance","object","writeAfterEnd","valid","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","isEncoding","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","r","utf8CheckExtraBytes","total","utf8CheckIncomplete","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","transform","_transform","flush","_flush","_this2","err2","typeHandlers","bmp_1","cur_1","dds_1","gif_1","icns_1","ico_1","j2c_1","jp2_1","jpg_1","ktx_1","png_1","pnm_1","psd_1","svg_1","tiff_1","webp_1","bmp","BMP","cur","CUR","dds","DDS","gif","GIF","icns","ICNS","ico","ICO","j2c","J2C","jp2","JP2","jpg","JPG","ktx","KTX","png","PNG","pnm","PNM","psd","PSD","svg","SVG","tiff","TIFF","webp","WEBP","getSizeFromOffset","offset","readUInt8","getImageSize","imageIndex","validate","readUInt16LE","calculate","nbImages","imageSize","imgs","images","readUInt","bits","isBigEndian","LocationEditView","http","sizeOf","chunks","CenterWrapper","View","faImage","pic","sources","faLink","root","nodeType","freeGlobal","window","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","stringFromCharCode","fromCharCode","array","mapDomain","string","parts","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","base","decode","input","basic","oldi","t","baseMinusT","codePoint","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","test","define","hasOwnProperty","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","idx","update","tableName","db","MyAppDatabase","table","id","finally","updateWithCallback","saveNew","entity","filename","put","prom","saveWithCallback","add","remove","delete","reciveAll","reciveCount","reciveCountPromise","reciveByAttribute","where","equalsIgnoreCase","recivePromiseByAttribute","recivePromiseByAttributeCount","equals","reciveAllPromise","applyFilters","filters","filter","fieldName","hasTag","fieldPart","includes","arrayTest","filterPart","val","reciveAllFiltered","sortedFiled","reverse","sort","sortBy","reciveAttributeSelection","attribute","orderBy","uniqueKeys","reciveAttributeSelectionPromise","createNewWithId","deleteAll","exportFilteredFromTable","all","navigator","msSaveOrOpenBlob","blob","encodeURI","JSON","document","createElement","download","appendChild","removeChild","stringifyPrimitive","isFinite","ks","f","ClientRequest","extend","statusCodes","request","opts","defaultProtocol","toUpperCase","req","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","toArrayBuffer","preferBinary","_opts","_body","_headers","setHeader","useFetch","decideMode","_fetchTimer","_onFinish","lowerName","unsafeHeaders","getHeader","removeHeader","headersObj","headersList","keyName","signal","controller","_fetchAbortController","requestTimeout","setTimeout","credentials","withCredentials","_connect","reason","timeout","ontimeout","setRequestHeader","_response","onreadystatechange","send","statusValid","flushHeaders","setNoDelay","setSocketKeepAlive","instance","Constructor","_classCallCheck","inspect","custom","config","localStorage","msg","trace","byteOffset","arrayCopy","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","types","setConcurrency","fs","queue_1","types_1","detector_1","queue","default","concurrency","autostart","lookup","filepath","detector","descriptor","openSync","fstatSync","closeSync","bufferSize","min","readSync","syncFileToBuffer","promises","handle","stat","asyncFileToBuffer","normalizeArray","allowAboveRoot","resolvedPath","resolvedAbsolute","cwd","normalize","trailingSlash","to","start","fromParts","toParts","samePartsLength","outputParts","delimiter","dirname","code","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","Queue","Infinity","results","pending","session","running","jobs","timers","begin","clearTimers","timeoutId","callOnErrorOrEnd","methodResult","job","didTimeout","resultIndex","promise","stop","abs","readInt32LE","readUInt32LE","gifRegexp","signature","ICON_TYPE_SIZE","ICON","icm4","icm8","ics4","ics8","is32","s8mk","icp4","icl4","icl8","il32","l8mk","icp5","ic11","ich4","ich8","ih32","h8mk","icp6","ic12","it32","t8mk","ic07","ic08","ic13","ic09","ic14","ic10","readImageHeader","imageOffset","imageLengthOffset","readUInt32BE","bufferLength","fileLength","imageHeader","IconButton","floatLeft","disabled","SimpleButton","left","DisabledSimpleButton","buttons","FontAwesomeIcon","BoxTypes","parseIHDR","box","signatureLength","ftypeBoxStart","ftypBoxLength","readUInt16BE","unit","calculateRREQLength","readUInt_1","isEXIF","extractSize","validateExifBlock","exifBlock","byteAlign","EXIF_HEADER_BYTES","idfDirectoryEntries","directoryEntryNumber","block","extractOrientation","validateBuffer","orientation","chunkName","PNMTypes","P1","P2","P3","P4","P5","P6","P7","PF","Signatures","handlers","lines","dimensions","line","pam","svgReg","extractorRegExps","viewbox","units","cm","em","ex","mm","pc","pt","parseLength","round","parseFloat","parseViewbox","attrs","parseAttributes","calculateByDimensions","ratio","calculateByViewbox","readValue","low","nextTag","signatures","determineEndianness","tags","temp","extractTags","ifdOffset","fileSize","statSync","endBuffer","readIFD","riffHeader","webpHeader","vp8Header","chunkHeader","extendedHeader","readUIntLE","calculateExtended","readInt16LE","calculateLossy","calculateLossless","firstBytes","find","button","hoverColor","LocationView","setSend","getPicture","ImageName","Name","PropWrapper","faPaperPlane","P2PSender","Image","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","ImageElm","Empty","highlight","LocationDetail","isNew","editMode","setMode","locationObj","editLocation","showAlert","setAlert","showDeleteDialog","setDeleteDialog","setMessage","unsavedChanges","setUnsavedChanges","history","useHistory","updateLocation","faExclamationTriangle","confirmeText","confirmeClick","goBack","abortText","abortClick","TopBar","BackButton","faArrowLeft","action","title","faTrash","Message","placeholder","Field","LabelText","Input","Header","Bar","NameWrapper","Logo","LogoImg","HomeCredits","packageJson","img","NavButton","setOpen","Button","NavMenu","useLocation","Menu","TopSide","className","faHome","Seperator","MiddleSide","LeftSide","faMapMarkedAlt","faTable","RightSide","faMeteor","faIdCard","faDragon","BottomSide","faChartPie","faCog","RightTooltip","Navigation","Nav","AppWrapper","moveNav","useSwipeable","onSwipedRight","onSwipedLeft","App","Content","LinkCheck","loading","setLoading","entitiyFound","setEntity","formatIcon","formatedText","setFormatedText","cut","cutStart","cutEnd","formatLink","formattedParts","codePart","linkParts","link","TextPart","Link","formatTable","textPart","tableRows","isHead","row","cells","cell","TableHeadProp","TableProp","formatText","span","backgroundColorLink","th","td","useItem","effect","setEffect","reducer","useReducer","dispatch","useItemByAttr","attr","attrValue","first","Back","ToggleLeft","ToggleRight","EditToggle","props","spells","items","gears","monsters","races","subraces","classes","subclasses","chars","encounters","books","selections","randomTables","campaigns","quests","npcs","worlds","locations","groups","stores","chars_spells","chars_monsters","chars_items","Dexie","setName","peer","setPeer","setError","brokerId","max","password","characters","random","generateBrokerId","newPeer","Peer","secure","conn","errorData","disconnected","reconnect","faExclamationCircle","IdToLocation","params","DialogWrapper","ButtonBar","NumberField","Tooltip","LeftTooltip","FixedBar","SearchBar","CreateButton","ExportButton","FieldGroup","webpackEmptyContext"],"mappings":"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CPC,SACE,qOAEJ,EAAKpgC,QAAQ,GAAGohC,OAAO,CACrBnB,OACE,oGACFC,MAAO,iEACPC,MAAO,gFACPC,SACE,mOACFK,MACE,+9BAEJ,EAAKzgC,QAAQ,GAAGohC,OAAO,CACrBnB,OACE,oGACFC,MAAO,iEACPC,MAAO,gFACPC,SACE,mOACFK,MACE,69BACFY,aAAc,oCACdC,eAAgB,4BAChBC,YACE,8FAEJ,EAAKvhC,QAAQ,GAAGohC,OAAO,CACrBnB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iSAEJ,EAAKzgC,QAAQ,GAAGohC,OAAO,CACrBC,aAAc,KACdC,eAAgB,KAChBC,YAAa,KAEbtB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,+RACFC,WAAY,kCAEd,EAAK1gC,QAAQ,GAAGohC,OAAO,CACrBnB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,+RACFC,WAAY,gCACZC,MAAO,yCAET,EAAK3gC,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,+RACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,2CAEd,EAAK5gC,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,2CAEd,EAAK5gC,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,uCAEhB,EAAK7gC,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,uCAEhB,EAAK7gC,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,qCACdC,UACE,yFAEJ,EAAK9gC,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,qCACdC,UACE,uFACFC,OACE,2FACFC,KAAM,gEACNC,OAAQ,4EACRC,UAAW,iEACXlsC,OAAQ,uEAEV,EAAKgL,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,qCACdC,UACE,4FACFC,OACE,2FACFC,KAAM,gEACNC,OAAQ,4EACRC,UAAW,iEACXlsC,OAAQ,uEAEV,EAAKgL,QAAQ,IAAIohC,OAAO,CACtBnB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,qCACdC,UACE,gGACFC,OAAQ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","file":"static/js/25.14f8f9b2.chunk.js","sourcesContent":["if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/logo192.a0b12edf.png\";","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport StringField from \"../../form_elements/StringField\";\nimport { faSave, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../../form_elements/TextButton\";\nimport { LatLng } from \"leaflet\";\n\ninterface $Props {\n  activeElement: { position: LatLng; text: string };\n  onSave: (element: { position: LatLng; text: string }) => void;\n  onDelete: () => void;\n  onClose: () => void;\n}\n\nconst EditDialog = ({ activeElement, onSave, onClose, onDelete }: $Props) => {\n  const [label, setLabel] = useState<string>(activeElement.text);\n\n  useEffect(() => {\n    setLabel(activeElement.text);\n  }, [activeElement]);\n\n  const onSaveClick = () => {\n    let newElement = { ...activeElement };\n    newElement.text = label;\n    onSave(newElement);\n  };\n\n  return (\n    <Dialog>\n      <StringField value={label} label=\"Label\" onChange={setLabel} />\n      <TextButton text={\"Cancel\"} icon={faTimes} onClick={onClose} />\n      <TextButton text={\"Delete\"} icon={faTimes} onClick={onDelete} />\n      <TextButton text={\"Save\"} icon={faSave} onClick={() => onSaveClick()} />\n    </Dialog>\n  );\n};\n\nexport default EditDialog;\n\nconst Dialog = styled.div`\n  position: absolute;\n  z-index: 1000;\n  top: 0px;\n\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.main.backgroundColor};\n  margin: 0.5em;\n  padding: 10px;\n  border-radius: 10px;\n  box-shadow: ${({ theme }) => theme.tile.boxShadow};\n`;\n","import { Icon, LatLng } from \"leaflet\";\nimport React, { useRef, useState, useCallback, useEffect } from \"react\";\nimport { ImageOverlay, MapContainer, Marker, TileLayer, Popup, useMapEvents } from \"react-leaflet\";\nimport styled from \"styled-components\";\nimport Location from \"../../../data/world/Location\";\nimport FormatedText from \"../FormatedText\";\nimport MarkerEditDialog from \"./MarkerEditDialog\";\n\ninterface $Props {\n  location: Location;\n  editable: boolean;\n  onEdit?: (value: Location) => void;\n}\n\nconst Map = ({ location, editable, onEdit }: $Props) => {\n  const [showEditDialog, setEditDialaog] = useState<boolean>(false);\n  const [activeElement, setActive] = useState<number>();\n\n  const mapWrap = useRef<HTMLDivElement>(null);\n  const [map, setMap] = useState<any>(null);\n  const [mapHeight, setHeight] = useState<string>();\n  const [bounds, setBounds] = useState<any>();\n  const position: any = [0, 0];\n\n  const gcd = useCallback((a: number, b: number): number => {\n    return b ? gcd(b, a % b) : a;\n  }, []);\n\n  const reduceBounds = (number: number[][]): number[][] => {\n    const newBounds = [\n      [number[0][0] * 0.5, number[0][1] * 0.5],\n      [number[1][0] * 0.5, number[1][1] * 0.5],\n    ];\n    return newBounds;\n  };\n\n  useEffect(() => {\n    if (\n      location.dimension !== undefined &&\n      location.map !== undefined &&\n      location.map !== \"\" &&\n      location.dimension !== { height: 0, width: 0 }\n    ) {\n      const divisor = gcd(location.dimension.width, location.dimension.height);\n      const widthratio = location.dimension.width / divisor;\n      const heightratio = location.dimension.height / divisor;\n      const bounds: any = [\n        [-(heightratio / 2), -(widthratio / 2)],\n        [heightratio / 2, widthratio / 2],\n      ];\n      setBounds(bounds);\n    }\n  }, [location.map, location.dimension, gcd]);\n\n  useEffect(() => {\n    if (map !== null && bounds) {\n      map.fitBounds(reduceBounds(bounds));\n    }\n  }, [map, bounds]);\n\n  useEffect(() => {\n    if (mapWrap && mapWrap.current) {\n      const height = mapWrap.current.clientHeight;\n      setHeight(height + \"px\");\n    }\n  }, []);\n\n  const onSave = (element: { position: LatLng; text: string }) => {\n    if (editable && onEdit !== undefined && activeElement !== undefined) {\n      let markerList = [...location.markers];\n      markerList[activeElement] = element;\n      onEdit({\n        ...location,\n        markers: markerList,\n      });\n    }\n  };\n\n  const onDelete = () => {\n    if (editable && onEdit !== undefined && activeElement !== undefined) {\n      let markerList = [...location.markers];\n      markerList.splice(activeElement, 1);\n      setEditDialaog(false);\n      setActive(undefined);\n      onEdit({\n        ...location,\n        markers: markerList,\n      });\n    }\n  };\n\n  return (\n    <MapWrapper ref={mapWrap}>\n      {showEditDialog && activeElement !== undefined && (\n        <MarkerEditDialog\n          activeElement={location.markers[activeElement]}\n          onSave={onSave}\n          onDelete={onDelete}\n          onClose={() => setEditDialaog(false)}\n        ></MarkerEditDialog>\n      )}\n      {location.map && mapHeight && bounds && (\n        <MapContainer\n          style={{ height: mapHeight, width: \"100%\" }}\n          center={position}\n          zoom={1}\n          scrollWheelZoom={false}\n          whenCreated={setMap}\n        >\n          <TileLayer url={\"\"} />\n          <ImageOverlay bounds={bounds} url={location.map} />\n          <Markers\n            markerPositions={location.markers}\n            location={location}\n            editable={editable}\n            onEdit={onEdit}\n            setActive={setActive}\n            setEditDialaog={setEditDialaog}\n          />\n        </MapContainer>\n      )}\n    </MapWrapper>\n  );\n};\n\nexport default Map;\n\ninterface $MarkersProps {\n  location: Location;\n  editable: boolean;\n  markerPositions: { position: LatLng; text: string }[];\n  onEdit?: (value: Location) => void;\n  setActive: (value: number) => void;\n  setEditDialaog: (value: boolean) => void;\n}\n\nconst Markers = ({\n  location,\n  editable,\n  markerPositions,\n  onEdit,\n  setActive,\n  setEditDialaog,\n}: $MarkersProps) => {\n  useMapEvents({\n    click(e) {\n      if (editable && onEdit !== undefined) {\n        onEdit({\n          ...location,\n          markers: [...location.markers, { position: e.latlng, text: \"New\" }],\n        });\n      }\n    },\n  });\n\n  const editMarker = (index: number) => {\n    if (editable && onEdit !== undefined) {\n      console.log(index);\n      setActive(index);\n      setEditDialaog(true);\n    }\n  };\n\n  let icon = new Icon({\n    iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\n    iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\n    shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n  });\n\n  return (\n    <>\n      {markerPositions &&\n        markerPositions.map((marker: { position: LatLng; text: string }, index: number) => {\n          return (\n            <Marker key={index} position={marker.position} icon={icon}>\n              <Popup autoPan={true} minWidth={120} onOpen={() => editMarker(index)}>\n                <FormatedText text={marker.text} />\n              </Popup>\n            </Marker>\n          );\n        })}\n    </>\n  );\n};\n\nconst MapWrapper = styled.div`\n  float: left;\n  padding: 3px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  position: relative;\n\n  height: calc(100vh - 265px);\n  width: calc(100% - 6px);\n\n  & .leaflet-popup {\n    .leaflet-popup-content-wrapper {\n      background-color: ${({ theme }) => theme.tile.backgroundColor};\n      color: ${({ theme }) => theme.tile.color};\n    }\n    .leaflet-popup-tip {\n      background-color: ${({ theme }) => theme.tile.backgroundColor};\n    }\n  }\n`;\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeHandlers = void 0;\nconst bmp_1 = require(\"./types/bmp\");\nconst cur_1 = require(\"./types/cur\");\nconst dds_1 = require(\"./types/dds\");\nconst gif_1 = require(\"./types/gif\");\nconst icns_1 = require(\"./types/icns\");\nconst ico_1 = require(\"./types/ico\");\nconst j2c_1 = require(\"./types/j2c\");\nconst jp2_1 = require(\"./types/jp2\");\nconst jpg_1 = require(\"./types/jpg\");\nconst ktx_1 = require(\"./types/ktx\");\nconst png_1 = require(\"./types/png\");\nconst pnm_1 = require(\"./types/pnm\");\nconst psd_1 = require(\"./types/psd\");\nconst svg_1 = require(\"./types/svg\");\nconst tiff_1 = require(\"./types/tiff\");\nconst webp_1 = require(\"./types/webp\");\nexports.typeHandlers = {\n    bmp: bmp_1.BMP,\n    cur: cur_1.CUR,\n    dds: dds_1.DDS,\n    gif: gif_1.GIF,\n    icns: icns_1.ICNS,\n    ico: ico_1.ICO,\n    j2c: j2c_1.J2C,\n    jp2: jp2_1.JP2,\n    jpg: jpg_1.JPG,\n    ktx: ktx_1.KTX,\n    png: png_1.PNG,\n    pnm: pnm_1.PNM,\n    psd: psd_1.PSD,\n    svg: svg_1.SVG,\n    tiff: tiff_1.TIFF,\n    webp: webp_1.WEBP,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ICO = void 0;\nconst TYPE_ICON = 1;\n/**\n * ICON Header\n *\n * | Offset | Size | Purpose |\n * | 0\t    | 2    | Reserved. Must always be 0.  |\n * | 2      | 2    | Image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid. |\n * | 4      | 2    | Number of images in the file. |\n *\n */\nconst SIZE_HEADER = 2 + 2 + 2; // 6\n/**\n * Image Entry\n *\n * | Offset | Size | Purpose |\n * | 0\t    | 1    | Image width in pixels. Can be any number between 0 and 255. Value 0 means width is 256 pixels. |\n * | 1      | 1    | Image height in pixels. Can be any number between 0 and 255. Value 0 means height is 256 pixels. |\n * | 2      | 1    | Number of colors in the color palette. Should be 0 if the image does not use a color palette. |\n * | 3      | 1    | Reserved. Should be 0. |\n * | 4      | 2    | ICO format: Color planes. Should be 0 or 1. |\n * |        |      | CUR format: The horizontal coordinates of the hotspot in number of pixels from the left. |\n * | 6      | 2    | ICO format: Bits per pixel. |\n * |        |      | CUR format: The vertical coordinates of the hotspot in number of pixels from the top. |\n * | 8      | 4    | The size of the image's data in bytes |\n * | 12     | 4    | The offset of BMP or PNG data from the beginning of the ICO/CUR file |\n *\n */\nconst SIZE_IMAGE_ENTRY = 1 + 1 + 1 + 1 + 2 + 2 + 4 + 4; // 16\nfunction getSizeFromOffset(buffer, offset) {\n    const value = buffer.readUInt8(offset);\n    return value === 0 ? 256 : value;\n}\nfunction getImageSize(buffer, imageIndex) {\n    const offset = SIZE_HEADER + (imageIndex * SIZE_IMAGE_ENTRY);\n    return {\n        height: getSizeFromOffset(buffer, offset + 1),\n        width: getSizeFromOffset(buffer, offset)\n    };\n}\nexports.ICO = {\n    validate(buffer) {\n        if (buffer.readUInt16LE(0) !== 0) {\n            return false;\n        }\n        return buffer.readUInt16LE(2) === TYPE_ICON;\n    },\n    calculate(buffer) {\n        const nbImages = buffer.readUInt16LE(4);\n        const imageSize = getImageSize(buffer, 0);\n        if (nbImages === 1) {\n            return imageSize;\n        }\n        const imgs = [imageSize];\n        for (let imageIndex = 1; imageIndex < nbImages; imageIndex += 1) {\n            imgs.push(getImageSize(buffer, imageIndex));\n        }\n        const result = {\n            height: imageSize.height,\n            images: imgs,\n            width: imageSize.width\n        };\n        return result;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readUInt = void 0;\n// Abstract reading multi-byte unsigned integers\nfunction readUInt(buffer, bits, offset, isBigEndian) {\n    offset = offset || 0;\n    const endian = isBigEndian ? 'BE' : 'LE';\n    const methodName = ('readUInt' + bits + endian);\n    return buffer[methodName].call(buffer, offset);\n}\nexports.readUInt = readUInt;\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Location from \"../../../../data/world/Location\";\n\nimport StringField from \"../../../form_elements/StringField\";\nimport Map from \"../../../general_elements/map/Map\";\n\nimport { faLink, faImage } from \"@fortawesome/free-solid-svg-icons\";\nimport NumberField from \"../../../form_elements/NumberField\";\n\ninterface $Props {\n  location: Location;\n  onEdit: (value: Location) => void;\n}\n\nconst LocationEditView = ({ location, onEdit }: $Props) => {\n  useEffect(() => {\n    if (location.map !== undefined && location.map !== \"\") {\n      let url = require(\"url\");\n      let http = require(\"http\");\n      let sizeOf = require(\"image-size\");\n\n      let options = url.parse(location.map);\n      http.get(options, function (response: any) {\n        let chunks: any = [];\n        response\n          .on(\"data\", function (chunk: any) {\n            chunks.push(chunk);\n          })\n          .on(\"end\", function () {\n            let buffer = Buffer.concat(chunks);\n            let size = sizeOf(buffer);\n            console.log(size);\n            onEdit({ ...location, dimension: { height: size.height, width: size.width } });\n          });\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.map]);\n\n  return (\n    <CenterWrapper>\n      <View>\n        <StringField\n          value={location.name}\n          label=\"Name\"\n          onChange={(name) => onEdit({ ...location, name: name })}\n        />\n\n        <StringField\n          value={location.map}\n          label=\"Picture\"\n          icon={faImage}\n          onChange={(pic) => onEdit({ ...location, map: pic })}\n        />\n        <NumberField\n          value={location.dimension.width}\n          label=\"Map width\"\n          onChange={(width) =>\n            onEdit({ ...location, dimension: { ...location.dimension, width: width } })\n          }\n        />\n        <NumberField\n          value={location.dimension.height}\n          label=\"Map height\"\n          onChange={(height) =>\n            onEdit({ ...location, dimension: { ...location.dimension, height: height } })\n          }\n        />\n        <StringField\n          value={location.sources}\n          label=\"Sources\"\n          icon={faLink}\n          onChange={(sources) => onEdit({ ...location, sources: sources })}\n        />\n      </View>\n      <Map editable={true} location={location} onEdit={onEdit} />\n    </CenterWrapper>\n  );\n};\n\nexport default LocationEditView;\n\nconst CenterWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n`;\n\nconst View = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  padding: 5px;\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`;\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","import { MyAppDatabase } from \"../database/MyDatabase\";\nimport { IndexableType } from \"dexie\";\nimport IEntity from \"../data/IEntity\";\nimport Filter from \"../data/Filter\";\n\nexport const update = (tableName: string, data: IEntity) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).update(data.id, data);\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const updateWithCallback = (\n  tableName: string,\n  data: IEntity,\n  callback: (data: number) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .update(data.id, data)\n        .then((result: number) => {\n          callback(result);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const save = (tableName: string, data: IEntity) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).add(data);\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const saveNew = (tableName: string, entity: IEntity, filename: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(async function () {\n      delete entity[\"id\"];\n      const prom = await db.table(tableName).put({ ...entity, filename: filename });\n      return prom;\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const saveNewFromList = (\n  tableName: string,\n  entities: IEntity[],\n  filename: string,\n  callback: () => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      const refinedEntities = (entities as IEntity[]).map((entity: IEntity) => {\n        delete entity[\"id\"];\n        return { ...entity, filename: filename };\n      });\n      db.table(tableName)\n        .bulkPut(refinedEntities)\n        .then(() => {\n          callback();\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const saveWithCallback = (\n  tableName: string,\n  data: IEntity,\n  callback: (data: number) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .add(data)\n        .then((result: number) => {\n          callback(result);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const remove = (tableName: string, id: number | undefined) => {\n  const db = new MyAppDatabase();\n  if (id !== undefined) {\n    db.open()\n      .then(function () {\n        db.table(tableName).delete(id);\n      })\n      .finally(function () {\n        db.close();\n      });\n  }\n};\n\nexport const reciveAll = (tableName: string, callback: (data: IndexableType[]) => void) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .toArray()\n        .then((array) => {\n          callback(array);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveCount = (tableName: string, callback: (value: number) => void) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).count((count) => {\n        callback(count);\n      });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveCountPromise = (tableName: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(function () {\n      return db.table(tableName).count();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveByAttribute = (\n  tableName: string,\n  name: string,\n  value: string,\n  callback: (data: IEntity) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .where(name)\n        .equalsIgnoreCase(value)\n        .toArray()\n        .then((array) => {\n          callback(array[0]);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const recivePromiseByAttribute = (tableName: string, name: string, value: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(async function () {\n      const array = await db.table(tableName).where(name).equalsIgnoreCase(value).toArray();\n      return array[0];\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const recivePromiseByAttributeCount = (\n  tableName: string,\n  name: string,\n  value: string | number\n) => {\n  const db = new MyAppDatabase();\n  if (typeof value === \"string\") {\n    return db\n      .open()\n      .then(async function () {\n        return await db.table(tableName).where(name).equalsIgnoreCase(value).count();\n      })\n      .finally(function () {\n        db.close();\n      });\n  } else if (typeof value === \"number\") {\n    return db\n      .open()\n      .then(async function () {\n        return await db.table(tableName).where(name).equals(value).count();\n      })\n      .finally(function () {\n        db.close();\n      });\n  } else {\n    return db\n      .open()\n      .then(async function () {\n        return await db\n          .table(tableName)\n          .where(name)\n          .equalsIgnoreCase(\"\" + value)\n          .count();\n      })\n      .finally(function () {\n        db.close();\n      });\n  }\n};\n\nexport const reciveAllPromise = (tableName: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(async function () {\n      return await db.table(tableName).toArray();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const applyFilters = (obj: any, filters: Filter[]) => {\n  let test: boolean[] = [];\n  filters.forEach((filter) => {\n    if (typeof filter.value === \"string\") {\n      if (obj[filter.fieldName] instanceof Array) {\n        let hasTag = false;\n        obj[filter.fieldName].forEach((fieldPart: string) => {\n          // @ts-ignore\n          if (fieldPart.toLowerCase().includes(filter.value.toLowerCase())) {\n            hasTag = true;\n          }\n        });\n        if (hasTag) {\n          test.push(true);\n        } else {\n          test.push(false);\n        }\n      } else {\n        test.push(\n          // @ts-ignore\n          obj[filter.fieldName].toLowerCase().includes(filter.value.toLowerCase())\n        );\n      }\n    } else if (typeof filter.value === \"number\") {\n      // @ts-ignore\n      test.push(obj[filter.fieldName] === filter.value);\n    } else if (typeof filter.value === \"boolean\") {\n      // @ts-ignore\n      test.push(obj[filter.fieldName] === filter.value);\n    } else if (filter.value instanceof Array) {\n      let arrayTest: boolean = false;\n      filter.value.forEach((filterPart: string | boolean | number) => {\n        if (typeof filterPart === \"string\") {\n          if (\n            // @ts-ignore\n            obj[filter.fieldName].toLowerCase().includes(filterPart.toLowerCase())\n          )\n            arrayTest = true;\n        } else if (typeof filterPart === \"number\") {\n          // @ts-ignore\n          if (obj[filter.fieldName] === filterPart) arrayTest = true;\n        } else if (typeof filterPart === \"boolean\") {\n          // @ts-ignore\n          if (obj[filter.fieldName] === filterPart) arrayTest = true;\n        }\n      });\n      test.push(arrayTest);\n    }\n  });\n\n  let result = true;\n  test.forEach((val) => {\n    if (!val) result = false;\n  });\n  return result;\n};\n\nexport const reciveAllFiltered = (\n  tableName: string,\n  filters: Filter[],\n  callback: (data: IndexableType[]) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      let sortedFiled: string = \"name\";\n      let reverse: boolean = false;\n\n      filters.forEach((filter: Filter) => {\n        if (filter.sort !== 0) {\n          sortedFiled = filter.fieldName;\n          if (filter.sort === 2) reverse = true;\n        }\n      });\n\n      if (reverse) {\n        db.table(tableName)\n          .filter((obj) => applyFilters(obj, filters))\n          .reverse()\n          .sortBy(sortedFiled)\n          .then((data) => {\n            callback(data);\n          });\n      } else {\n        db.table(tableName)\n          .filter((obj) => applyFilters(obj, filters))\n          .sortBy(sortedFiled)\n          .then((data) => {\n            callback(data);\n          });\n      }\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveAttributeSelection = (\n  tableName: string,\n  attribute: string,\n  callback: (data: IndexableType[]) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .orderBy(attribute)\n        .uniqueKeys(function (array) {\n          callback(array);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveAttributeSelectionPromise = (tableName: string, attribute: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(function () {\n      return db.table(tableName).orderBy(attribute).uniqueKeys();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const createNewWithId = (\n  tableName: string,\n  entity: IEntity,\n  callback: (id: number) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .put(entity)\n        .then((id: number) => {\n          callback(id);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const deleteAll = (tableName: string) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).clear();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const exportFilteredFromTable = (tableName: string, filters: Filter[], filename: string) => {\n  reciveAllFiltered(tableName, filters, (all: IndexableType[]) => {\n    let contentType = \"application/json;charset=utf-8;\";\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n      var blob = new Blob([decodeURIComponent(encodeURI(JSON.stringify(all)))], {\n        type: contentType,\n      });\n      navigator.msSaveOrOpenBlob(blob, filename);\n    } else {\n      var a = document.createElement(\"a\");\n      a.download = filename;\n      a.href = \"data:\" + contentType + \",\" + encodeURIComponent(JSON.stringify(all));\n      a.target = \"_blank\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    }\n  });\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.types = exports.setConcurrency = exports.imageSize = void 0;\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst queue_1 = require(\"queue\");\nconst types_1 = require(\"./types\");\nconst detector_1 = require(\"./detector\");\n// Maximum buffer size, with a default of 512 kilobytes.\n// TO-DO: make this adaptive based on the initial signature of the image\nconst MaxBufferSize = 512 * 1024;\n// This queue is for async `fs` operations, to avoid reaching file-descriptor limits\nconst queue = new queue_1.default({ concurrency: 100, autostart: true });\n/**\n * Return size information based on a buffer\n *\n * @param {Buffer} buffer\n * @param {String} filepath\n * @returns {Object}\n */\nfunction lookup(buffer, filepath) {\n    // detect the file type.. don't rely on the extension\n    const type = detector_1.detector(buffer);\n    // find an appropriate handler for this file type\n    if (type && type in types_1.typeHandlers) {\n        const size = types_1.typeHandlers[type].calculate(buffer, filepath);\n        if (size !== undefined) {\n            size.type = type;\n            return size;\n        }\n    }\n    // throw up, if we don't understand the file\n    throw new TypeError('unsupported file type: ' + type + ' (file: ' + filepath + ')');\n}\n/**\n * Reads a file into a buffer.\n * @param {String} filepath\n * @returns {Promise<Buffer>}\n */\nfunction asyncFileToBuffer(filepath) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const handle = yield fs.promises.open(filepath, 'r');\n        const { size } = yield handle.stat();\n        if (size <= 0) {\n            yield handle.close();\n            throw new Error('Empty file');\n        }\n        const bufferSize = Math.min(size, MaxBufferSize);\n        const buffer = Buffer.alloc(bufferSize);\n        yield handle.read(buffer, 0, bufferSize, 0);\n        yield handle.close();\n        return buffer;\n    });\n}\n/**\n * Synchronously reads a file into a buffer, blocking the nodejs process.\n *\n * @param {String} filepath\n * @returns {Buffer}\n */\nfunction syncFileToBuffer(filepath) {\n    // read from the file, synchronously\n    const descriptor = fs.openSync(filepath, 'r');\n    const { size } = fs.fstatSync(descriptor);\n    if (size <= 0) {\n        fs.closeSync(descriptor);\n        throw new Error('Empty file');\n    }\n    const bufferSize = Math.min(size, MaxBufferSize);\n    const buffer = Buffer.alloc(bufferSize);\n    fs.readSync(descriptor, buffer, 0, bufferSize, 0);\n    fs.closeSync(descriptor);\n    return buffer;\n}\n// eslint-disable-next-line @typescript-eslint/no-use-before-define\nmodule.exports = exports = imageSize; // backwards compatibility\nexports.default = imageSize;\n/**\n * @param {Buffer|string} input - buffer or relative/absolute path of the image file\n * @param {Function=} [callback] - optional function for async detection\n */\nfunction imageSize(input, callback) {\n    // Handle buffer input\n    if (Buffer.isBuffer(input)) {\n        return lookup(input);\n    }\n    // input should be a string at this point\n    if (typeof input !== 'string') {\n        throw new TypeError('invalid invocation');\n    }\n    // resolve the file path\n    const filepath = path.resolve(input);\n    if (typeof callback === 'function') {\n        queue.push(() => asyncFileToBuffer(filepath)\n            .then((buffer) => process.nextTick(callback, null, lookup(buffer, filepath)))\n            .catch(callback));\n    }\n    else {\n        const buffer = syncFileToBuffer(filepath);\n        return lookup(buffer, filepath);\n    }\n}\nexports.imageSize = imageSize;\nexports.setConcurrency = (c) => { queue.concurrency = c; };\nexports.types = Object.keys(types_1.typeHandlers);\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","var inherits = require('inherits')\nvar EventEmitter = require('events').EventEmitter\n\nmodule.exports = Queue\nmodule.exports.default = Queue\n\nfunction Queue (options) {\n  if (!(this instanceof Queue)) {\n    return new Queue(options)\n  }\n\n  EventEmitter.call(this)\n  options = options || {}\n  this.concurrency = options.concurrency || Infinity\n  this.timeout = options.timeout || 0\n  this.autostart = options.autostart || false\n  this.results = options.results || null\n  this.pending = 0\n  this.session = 0\n  this.running = false\n  this.jobs = []\n  this.timers = {}\n}\ninherits(Queue, EventEmitter)\n\nvar arrayMethods = [\n  'pop',\n  'shift',\n  'indexOf',\n  'lastIndexOf'\n]\n\narrayMethods.forEach(function (method) {\n  Queue.prototype[method] = function () {\n    return Array.prototype[method].apply(this.jobs, arguments)\n  }\n})\n\nQueue.prototype.slice = function (begin, end) {\n  this.jobs = this.jobs.slice(begin, end)\n  return this\n}\n\nQueue.prototype.reverse = function () {\n  this.jobs.reverse()\n  return this\n}\n\nvar arrayAddMethods = [\n  'push',\n  'unshift',\n  'splice'\n]\n\narrayAddMethods.forEach(function (method) {\n  Queue.prototype[method] = function () {\n    var methodResult = Array.prototype[method].apply(this.jobs, arguments)\n    if (this.autostart) {\n      this.start()\n    }\n    return methodResult\n  }\n})\n\nObject.defineProperty(Queue.prototype, 'length', {\n  get: function () {\n    return this.pending + this.jobs.length\n  }\n})\n\nQueue.prototype.start = function (cb) {\n  if (cb) {\n    callOnErrorOrEnd.call(this, cb)\n  }\n\n  this.running = true\n\n  if (this.pending >= this.concurrency) {\n    return\n  }\n\n  if (this.jobs.length === 0) {\n    if (this.pending === 0) {\n      done.call(this)\n    }\n    return\n  }\n\n  var self = this\n  var job = this.jobs.shift()\n  var once = true\n  var session = this.session\n  var timeoutId = null\n  var didTimeout = false\n  var resultIndex = null\n  var timeout = job.timeout || this.timeout\n\n  function next (err, result) {\n    if (once && self.session === session) {\n      once = false\n      self.pending--\n      if (timeoutId !== null) {\n        delete self.timers[timeoutId]\n        clearTimeout(timeoutId)\n      }\n\n      if (err) {\n        self.emit('error', err, job)\n      } else if (didTimeout === false) {\n        if (resultIndex !== null) {\n          self.results[resultIndex] = Array.prototype.slice.call(arguments, 1)\n        }\n        self.emit('success', result, job)\n      }\n\n      if (self.session === session) {\n        if (self.pending === 0 && self.jobs.length === 0) {\n          done.call(self)\n        } else if (self.running) {\n          self.start()\n        }\n      }\n    }\n  }\n\n  if (timeout) {\n    timeoutId = setTimeout(function () {\n      didTimeout = true\n      if (self.listeners('timeout').length > 0) {\n        self.emit('timeout', next, job)\n      } else {\n        next()\n      }\n    }, timeout)\n    this.timers[timeoutId] = timeoutId\n  }\n\n  if (this.results) {\n    resultIndex = this.results.length\n    this.results[resultIndex] = null\n  }\n\n  this.pending++\n  self.emit('start', job)\n  var promise = job(next)\n  if (promise && promise.then && typeof promise.then === 'function') {\n    promise.then(function (result) {\n      return next(null, result)\n    }).catch(function (err) {\n      return next(err || true)\n    })\n  }\n\n  if (this.running && this.jobs.length > 0) {\n    this.start()\n  }\n}\n\nQueue.prototype.stop = function () {\n  this.running = false\n}\n\nQueue.prototype.end = function (err) {\n  clearTimers.call(this)\n  this.jobs.length = 0\n  this.pending = 0\n  done.call(this, err)\n}\n\nfunction clearTimers () {\n  for (var key in this.timers) {\n    var timeoutId = this.timers[key]\n    delete this.timers[key]\n    clearTimeout(timeoutId)\n  }\n}\n\nfunction callOnErrorOrEnd (cb) {\n  var self = this\n  this.on('error', onerror)\n  this.on('end', onend)\n\n  function onerror (err) { self.end(err) }\n  function onend (err) {\n    self.removeListener('error', onerror)\n    self.removeListener('end', onend)\n    cb(err, this.results)\n  }\n}\n\nfunction done (err) {\n  this.session++\n  this.running = false\n  this.emit('end', err)\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BMP = void 0;\nexports.BMP = {\n    validate(buffer) {\n        return ('BM' === buffer.toString('ascii', 0, 2));\n    },\n    calculate(buffer) {\n        return {\n            height: Math.abs(buffer.readInt32LE(22)),\n            width: buffer.readUInt32LE(18)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CUR = void 0;\nconst ico_1 = require(\"./ico\");\nconst TYPE_CURSOR = 2;\nexports.CUR = {\n    validate(buffer) {\n        if (buffer.readUInt16LE(0) !== 0) {\n            return false;\n        }\n        return buffer.readUInt16LE(2) === TYPE_CURSOR;\n    },\n    calculate(buffer) {\n        return ico_1.ICO.calculate(buffer);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DDS = void 0;\nexports.DDS = {\n    validate(buffer) {\n        return buffer.readUInt32LE(0) === 0x20534444;\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32LE(12),\n            width: buffer.readUInt32LE(16)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GIF = void 0;\nconst gifRegexp = /^GIF8[79]a/;\nexports.GIF = {\n    validate(buffer) {\n        const signature = buffer.toString('ascii', 0, 6);\n        return (gifRegexp.test(signature));\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt16LE(8),\n            width: buffer.readUInt16LE(6)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ICNS = void 0;\n/**\n * ICNS Header\n *\n * | Offset | Size | Purpose                                                |\n * | 0\t    | 4    | Magic literal, must be \"icns\" (0x69, 0x63, 0x6e, 0x73) |\n * | 4      | 4    | Length of file, in bytes, msb first.                   |\n *\n */\nconst SIZE_HEADER = 4 + 4; // 8\nconst FILE_LENGTH_OFFSET = 4; // MSB => BIG ENDIAN\n/**\n * Image Entry\n *\n * | Offset | Size | Purpose                                                          |\n * | 0\t    | 4    | Icon type, see OSType below.                                     |\n * | 4      | 4    | Length of data, in bytes (including type and length), msb first. |\n * | 8      | n    | Icon data                                                        |\n */\nconst ENTRY_LENGTH_OFFSET = 4; // MSB => BIG ENDIAN\nconst ICON_TYPE_SIZE = {\n    ICON: 32,\n    'ICN#': 32,\n    // m => 16 x 16\n    'icm#': 16,\n    icm4: 16,\n    icm8: 16,\n    // s => 16 x 16\n    'ics#': 16,\n    ics4: 16,\n    ics8: 16,\n    is32: 16,\n    s8mk: 16,\n    icp4: 16,\n    // l => 32 x 32\n    icl4: 32,\n    icl8: 32,\n    il32: 32,\n    l8mk: 32,\n    icp5: 32,\n    ic11: 32,\n    // h => 48 x 48\n    ich4: 48,\n    ich8: 48,\n    ih32: 48,\n    h8mk: 48,\n    // . => 64 x 64\n    icp6: 64,\n    ic12: 32,\n    // t => 128 x 128\n    it32: 128,\n    t8mk: 128,\n    ic07: 128,\n    // . => 256 x 256\n    ic08: 256,\n    ic13: 256,\n    // . => 512 x 512\n    ic09: 512,\n    ic14: 512,\n    // . => 1024 x 1024\n    ic10: 1024,\n};\nfunction readImageHeader(buffer, imageOffset) {\n    const imageLengthOffset = imageOffset + ENTRY_LENGTH_OFFSET;\n    return [\n        buffer.toString('ascii', imageOffset, imageLengthOffset),\n        buffer.readUInt32BE(imageLengthOffset)\n    ];\n}\nfunction getImageSize(type) {\n    const size = ICON_TYPE_SIZE[type];\n    return { width: size, height: size, type };\n}\nexports.ICNS = {\n    validate(buffer) {\n        return ('icns' === buffer.toString('ascii', 0, 4));\n    },\n    calculate(buffer) {\n        const bufferLength = buffer.length;\n        const fileLength = buffer.readUInt32BE(FILE_LENGTH_OFFSET);\n        let imageOffset = SIZE_HEADER;\n        let imageHeader = readImageHeader(buffer, imageOffset);\n        let imageSize = getImageSize(imageHeader[0]);\n        imageOffset += imageHeader[1];\n        if (imageOffset === fileLength) {\n            return imageSize;\n        }\n        const result = {\n            height: imageSize.height,\n            images: [imageSize],\n            width: imageSize.width\n        };\n        while (imageOffset < fileLength && imageOffset < bufferLength) {\n            imageHeader = readImageHeader(buffer, imageOffset);\n            imageSize = getImageSize(imageHeader[0]);\n            imageOffset += imageHeader[1];\n            result.images.push(imageSize);\n        }\n        return result;\n    }\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  icon: IconDefinition;\n  floatLeft?: boolean;\n  disabled?: boolean;\n  transform?: string | Transform;\n  onClick: (() => void) | ((e: any) => void);\n}\n\nconst IconButton = ({ icon, floatLeft, disabled, transform, onClick }: $Props) => {\n  return (\n    <>\n      {!disabled && (\n        <SimpleButton left={floatLeft} onClick={onClick}>\n          <Icon icon={icon} transform={transform} />\n        </SimpleButton>\n      )}\n      {disabled && (\n        <DisabledSimpleButton>\n          <Icon icon={icon} transform={transform} />\n        </DisabledSimpleButton>\n      )}\n    </>\n  );\n};\n\nexport default IconButton;\n\ntype FloatMpde = {\n  left?: boolean;\n};\n\nconst SimpleButton = styled.div<FloatMpde>`\n  color: ${({ theme }) => theme.buttons.color};\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  cursor: pointer;\n\n  font-size: 16px;\n  overflow: hidden;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: ${({ left }) => (left ? \"left\" : \"right\")};\n  padding: 10px;\n  margin: 5px;\n  border-radius: 10px;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n\n  transition: color 0.2s;\n\n  &:hover {\n    color: white;\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst DisabledSimpleButton = styled(SimpleButton)`\n  color: ${({ theme }) => theme.buttons.backgroundColor};\n  background-color: ${({ theme }) => theme.buttons.color};\n  cursor: not-allowed;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n`;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.J2C = void 0;\nexports.J2C = {\n    validate(buffer) {\n        // TODO: this doesn't seem right. SIZ marker doesnt have to be right after the SOC\n        return buffer.toString('hex', 0, 4) === 'ff4fff51';\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32BE(12),\n            width: buffer.readUInt32BE(8),\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JP2 = void 0;\nconst BoxTypes = {\n    ftyp: '66747970',\n    ihdr: '69686472',\n    jp2h: '6a703268',\n    jp__: '6a502020',\n    rreq: '72726571',\n    xml_: '786d6c20'\n};\nconst calculateRREQLength = (box) => {\n    const unit = box.readUInt8(0);\n    let offset = 1 + (2 * unit);\n    const numStdFlags = box.readUInt16BE(offset);\n    const flagsLength = numStdFlags * (2 + unit);\n    offset = offset + 2 + flagsLength;\n    const numVendorFeatures = box.readUInt16BE(offset);\n    const featuresLength = numVendorFeatures * (16 + unit);\n    return offset + 2 + featuresLength;\n};\nconst parseIHDR = (box) => {\n    return {\n        height: box.readUInt32BE(4),\n        width: box.readUInt32BE(8),\n    };\n};\nexports.JP2 = {\n    validate(buffer) {\n        const signature = buffer.toString('hex', 4, 8);\n        const signatureLength = buffer.readUInt32BE(0);\n        if (signature !== BoxTypes.jp__ || signatureLength < 1) {\n            return false;\n        }\n        const ftypeBoxStart = signatureLength + 4;\n        const ftypBoxLength = buffer.readUInt32BE(signatureLength);\n        const ftypBox = buffer.slice(ftypeBoxStart, ftypeBoxStart + ftypBoxLength);\n        return ftypBox.toString('hex', 0, 4) === BoxTypes.ftyp;\n    },\n    calculate(buffer) {\n        const signatureLength = buffer.readUInt32BE(0);\n        const ftypBoxLength = buffer.readUInt16BE(signatureLength + 2);\n        let offset = signatureLength + 4 + ftypBoxLength;\n        const nextBoxType = buffer.toString('hex', offset, offset + 4);\n        switch (nextBoxType) {\n            case BoxTypes.rreq:\n                // WHAT ARE THESE 4 BYTES?????\n                // eslint-disable-next-line no-case-declarations\n                const MAGIC = 4;\n                offset = offset + 4 + MAGIC + calculateRREQLength(buffer.slice(offset + 4));\n                return parseIHDR(buffer.slice(offset + 8, offset + 24));\n            case BoxTypes.jp2h:\n                return parseIHDR(buffer.slice(offset + 8, offset + 24));\n            default:\n                throw new TypeError('Unsupported header found: ' + buffer.toString('ascii', offset, offset + 4));\n        }\n    }\n};\n","\"use strict\";\n// NOTE: we only support baseline and progressive JPGs here\n// due to the structure of the loader class, we only get a buffer\n// with a maximum size of 4096 bytes. so if the SOF marker is outside\n// if this range we can't detect the file size correctly.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JPG = void 0;\nconst readUInt_1 = require(\"../readUInt\");\nconst EXIF_MARKER = '45786966';\nconst APP1_DATA_SIZE_BYTES = 2;\nconst EXIF_HEADER_BYTES = 6;\nconst TIFF_BYTE_ALIGN_BYTES = 2;\nconst BIG_ENDIAN_BYTE_ALIGN = '4d4d';\nconst LITTLE_ENDIAN_BYTE_ALIGN = '4949';\n// Each entry is exactly 12 bytes\nconst IDF_ENTRY_BYTES = 12;\nconst NUM_DIRECTORY_ENTRIES_BYTES = 2;\nfunction isEXIF(buffer) {\n    return (buffer.toString('hex', 2, 6) === EXIF_MARKER);\n}\nfunction extractSize(buffer, index) {\n    return {\n        height: buffer.readUInt16BE(index),\n        width: buffer.readUInt16BE(index + 2)\n    };\n}\nfunction extractOrientation(exifBlock, isBigEndian) {\n    // TODO: assert that this contains 0x002A\n    // let STATIC_MOTOROLA_TIFF_HEADER_BYTES = 2\n    // let TIFF_IMAGE_FILE_DIRECTORY_BYTES = 4\n    // TODO: derive from TIFF_IMAGE_FILE_DIRECTORY_BYTES\n    const idfOffset = 8;\n    // IDF osset works from right after the header bytes\n    // (so the offset includes the tiff byte align)\n    const offset = EXIF_HEADER_BYTES + idfOffset;\n    const idfDirectoryEntries = readUInt_1.readUInt(exifBlock, 16, offset, isBigEndian);\n    for (let directoryEntryNumber = 0; directoryEntryNumber < idfDirectoryEntries; directoryEntryNumber++) {\n        const start = offset + NUM_DIRECTORY_ENTRIES_BYTES + (directoryEntryNumber * IDF_ENTRY_BYTES);\n        const end = start + IDF_ENTRY_BYTES;\n        // Skip on corrupt EXIF blocks\n        if (start > exifBlock.length) {\n            return;\n        }\n        const block = exifBlock.slice(start, end);\n        const tagNumber = readUInt_1.readUInt(block, 16, 0, isBigEndian);\n        // 0x0112 (decimal: 274) is the `orientation` tag ID\n        if (tagNumber === 274) {\n            const dataFormat = readUInt_1.readUInt(block, 16, 2, isBigEndian);\n            if (dataFormat !== 3) {\n                return;\n            }\n            // unsinged int has 2 bytes per component\n            // if there would more than 4 bytes in total it's a pointer\n            const numberOfComponents = readUInt_1.readUInt(block, 32, 4, isBigEndian);\n            if (numberOfComponents !== 1) {\n                return;\n            }\n            return readUInt_1.readUInt(block, 16, 8, isBigEndian);\n        }\n    }\n}\nfunction validateExifBlock(buffer, index) {\n    // Skip APP1 Data Size\n    const exifBlock = buffer.slice(APP1_DATA_SIZE_BYTES, index);\n    // Consider byte alignment\n    const byteAlign = exifBlock.toString('hex', EXIF_HEADER_BYTES, EXIF_HEADER_BYTES + TIFF_BYTE_ALIGN_BYTES);\n    // Ignore Empty EXIF. Validate byte alignment\n    const isBigEndian = byteAlign === BIG_ENDIAN_BYTE_ALIGN;\n    const isLittleEndian = byteAlign === LITTLE_ENDIAN_BYTE_ALIGN;\n    if (isBigEndian || isLittleEndian) {\n        return extractOrientation(exifBlock, isBigEndian);\n    }\n}\nfunction validateBuffer(buffer, index) {\n    // index should be within buffer limits\n    if (index > buffer.length) {\n        throw new TypeError('Corrupt JPG, exceeded buffer limits');\n    }\n    // Every JPEG block must begin with a 0xFF\n    if (buffer[index] !== 0xFF) {\n        throw new TypeError('Invalid JPG, marker table corrupted');\n    }\n}\nexports.JPG = {\n    validate(buffer) {\n        const SOIMarker = buffer.toString('hex', 0, 2);\n        return ('ffd8' === SOIMarker);\n    },\n    calculate(buffer) {\n        // Skip 4 chars, they are for signature\n        buffer = buffer.slice(4);\n        let orientation;\n        let next;\n        while (buffer.length) {\n            // read length of the next block\n            const i = buffer.readUInt16BE(0);\n            if (isEXIF(buffer)) {\n                orientation = validateExifBlock(buffer, i);\n            }\n            // ensure correct format\n            validateBuffer(buffer, i);\n            // 0xFFC0 is baseline standard(SOF)\n            // 0xFFC1 is baseline optimized(SOF)\n            // 0xFFC2 is progressive(SOF2)\n            next = buffer[i + 1];\n            if (next === 0xC0 || next === 0xC1 || next === 0xC2) {\n                const size = extractSize(buffer, i + 5);\n                // TODO: is orientation=0 a valid answer here?\n                if (!orientation) {\n                    return size;\n                }\n                return {\n                    height: size.height,\n                    orientation,\n                    width: size.width\n                };\n            }\n            // move to the next block\n            buffer = buffer.slice(i + 2);\n        }\n        throw new TypeError('Invalid JPG, no size found');\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KTX = void 0;\nconst SIGNATURE = 'KTX 11';\nexports.KTX = {\n    validate(buffer) {\n        return SIGNATURE === buffer.toString('ascii', 1, 7);\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32LE(40),\n            width: buffer.readUInt32LE(36),\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PNG = void 0;\nconst pngSignature = 'PNG\\r\\n\\x1a\\n';\nconst pngImageHeaderChunkName = 'IHDR';\n// Used to detect \"fried\" png's: http://www.jongware.com/pngdefry.html\nconst pngFriedChunkName = 'CgBI';\nexports.PNG = {\n    validate(buffer) {\n        if (pngSignature === buffer.toString('ascii', 1, 8)) {\n            let chunkName = buffer.toString('ascii', 12, 16);\n            if (chunkName === pngFriedChunkName) {\n                chunkName = buffer.toString('ascii', 28, 32);\n            }\n            if (chunkName !== pngImageHeaderChunkName) {\n                throw new TypeError('Invalid PNG');\n            }\n            return true;\n        }\n        return false;\n    },\n    calculate(buffer) {\n        if (buffer.toString('ascii', 12, 16) === pngFriedChunkName) {\n            return {\n                height: buffer.readUInt32BE(36),\n                width: buffer.readUInt32BE(32)\n            };\n        }\n        return {\n            height: buffer.readUInt32BE(20),\n            width: buffer.readUInt32BE(16)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PNM = void 0;\nconst PNMTypes = {\n    P1: 'pbm/ascii',\n    P2: 'pgm/ascii',\n    P3: 'ppm/ascii',\n    P4: 'pbm',\n    P5: 'pgm',\n    P6: 'ppm',\n    P7: 'pam',\n    PF: 'pfm'\n};\nconst Signatures = Object.keys(PNMTypes);\nconst handlers = {\n    default: (lines) => {\n        let dimensions = [];\n        while (lines.length > 0) {\n            const line = lines.shift();\n            if (line[0] === '#') {\n                continue;\n            }\n            dimensions = line.split(' ');\n            break;\n        }\n        if (dimensions.length === 2) {\n            return {\n                height: parseInt(dimensions[1], 10),\n                width: parseInt(dimensions[0], 10),\n            };\n        }\n        else {\n            throw new TypeError('Invalid PNM');\n        }\n    },\n    pam: (lines) => {\n        const size = {};\n        while (lines.length > 0) {\n            const line = lines.shift();\n            if (line.length > 16 || line.charCodeAt(0) > 128) {\n                continue;\n            }\n            const [key, value] = line.split(' ');\n            if (key && value) {\n                size[key.toLowerCase()] = parseInt(value, 10);\n            }\n            if (size.height && size.width) {\n                break;\n            }\n        }\n        if (size.height && size.width) {\n            return {\n                height: size.height,\n                width: size.width\n            };\n        }\n        else {\n            throw new TypeError('Invalid PAM');\n        }\n    }\n};\nexports.PNM = {\n    validate(buffer) {\n        const signature = buffer.toString('ascii', 0, 2);\n        return Signatures.includes(signature);\n    },\n    calculate(buffer) {\n        const signature = buffer.toString('ascii', 0, 2);\n        const type = PNMTypes[signature];\n        // TODO: this probably generates garbage. move to a stream based parser\n        const lines = buffer.toString('ascii', 3).split(/[\\r\\n]+/);\n        const handler = handlers[type] || handlers.default;\n        return handler(lines);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PSD = void 0;\nexports.PSD = {\n    validate(buffer) {\n        return ('8BPS' === buffer.toString('ascii', 0, 4));\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32BE(14),\n            width: buffer.readUInt32BE(18)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SVG = void 0;\nconst svgReg = /<svg\\s([^>\"']|\"[^\"]*\"|'[^']*')*>/;\nconst extractorRegExps = {\n    height: /\\sheight=(['\"])([^%]+?)\\1/,\n    root: svgReg,\n    viewbox: /\\sviewBox=(['\"])(.+?)\\1/,\n    width: /\\swidth=(['\"])([^%]+?)\\1/,\n};\nconst INCH_CM = 2.54;\nconst units = {\n    cm: 96 / INCH_CM,\n    em: 16,\n    ex: 8,\n    m: 96 / INCH_CM * 100,\n    mm: 96 / INCH_CM / 10,\n    pc: 96 / 72 / 12,\n    pt: 96 / 72,\n};\nfunction parseLength(len) {\n    const m = /([0-9.]+)([a-z]*)/.exec(len);\n    if (!m) {\n        return undefined;\n    }\n    return Math.round(parseFloat(m[1]) * (units[m[2]] || 1));\n}\nfunction parseViewbox(viewbox) {\n    const bounds = viewbox.split(' ');\n    return {\n        height: parseLength(bounds[3]),\n        width: parseLength(bounds[2])\n    };\n}\nfunction parseAttributes(root) {\n    const width = root.match(extractorRegExps.width);\n    const height = root.match(extractorRegExps.height);\n    const viewbox = root.match(extractorRegExps.viewbox);\n    return {\n        height: height && parseLength(height[2]),\n        viewbox: viewbox && parseViewbox(viewbox[2]),\n        width: width && parseLength(width[2]),\n    };\n}\nfunction calculateByDimensions(attrs) {\n    return {\n        height: attrs.height,\n        width: attrs.width,\n    };\n}\nfunction calculateByViewbox(attrs, viewbox) {\n    const ratio = viewbox.width / viewbox.height;\n    if (attrs.width) {\n        return {\n            height: Math.floor(attrs.width / ratio),\n            width: attrs.width,\n        };\n    }\n    if (attrs.height) {\n        return {\n            height: attrs.height,\n            width: Math.floor(attrs.height * ratio),\n        };\n    }\n    return {\n        height: viewbox.height,\n        width: viewbox.width,\n    };\n}\nexports.SVG = {\n    validate(buffer) {\n        const str = String(buffer);\n        return svgReg.test(str);\n    },\n    calculate(buffer) {\n        const root = buffer.toString('utf8').match(extractorRegExps.root);\n        if (root) {\n            const attrs = parseAttributes(root[0]);\n            if (attrs.width && attrs.height) {\n                return calculateByDimensions(attrs);\n            }\n            if (attrs.viewbox) {\n                return calculateByViewbox(attrs, attrs.viewbox);\n            }\n        }\n        throw new TypeError('Invalid SVG');\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TIFF = void 0;\n// based on http://www.compix.com/fileformattif.htm\n// TO-DO: support big-endian as well\nconst fs = require(\"fs\");\nconst readUInt_1 = require(\"../readUInt\");\n// Read IFD (image-file-directory) into a buffer\nfunction readIFD(buffer, filepath, isBigEndian) {\n    const ifdOffset = readUInt_1.readUInt(buffer, 32, 4, isBigEndian);\n    // read only till the end of the file\n    let bufferSize = 1024;\n    const fileSize = fs.statSync(filepath).size;\n    if (ifdOffset + bufferSize > fileSize) {\n        bufferSize = fileSize - ifdOffset - 10;\n    }\n    // populate the buffer\n    const endBuffer = Buffer.alloc(bufferSize);\n    const descriptor = fs.openSync(filepath, 'r');\n    fs.readSync(descriptor, endBuffer, 0, bufferSize, ifdOffset);\n    fs.closeSync(descriptor);\n    return endBuffer.slice(2);\n}\n// TIFF values seem to be messed up on Big-Endian, this helps\nfunction readValue(buffer, isBigEndian) {\n    const low = readUInt_1.readUInt(buffer, 16, 8, isBigEndian);\n    const high = readUInt_1.readUInt(buffer, 16, 10, isBigEndian);\n    return (high << 16) + low;\n}\n// move to the next tag\nfunction nextTag(buffer) {\n    if (buffer.length > 24) {\n        return buffer.slice(12);\n    }\n}\n// Extract IFD tags from TIFF metadata\nfunction extractTags(buffer, isBigEndian) {\n    const tags = {};\n    let temp = buffer;\n    while (temp && temp.length) {\n        const code = readUInt_1.readUInt(temp, 16, 0, isBigEndian);\n        const type = readUInt_1.readUInt(temp, 16, 2, isBigEndian);\n        const length = readUInt_1.readUInt(temp, 32, 4, isBigEndian);\n        // 0 means end of IFD\n        if (code === 0) {\n            break;\n        }\n        else {\n            // 256 is width, 257 is height\n            // if (code === 256 || code === 257) {\n            if (length === 1 && (type === 3 || type === 4)) {\n                tags[code] = readValue(temp, isBigEndian);\n            }\n            // move to the next tag\n            temp = nextTag(temp);\n        }\n    }\n    return tags;\n}\n// Test if the TIFF is Big Endian or Little Endian\nfunction determineEndianness(buffer) {\n    const signature = buffer.toString('ascii', 0, 2);\n    if ('II' === signature) {\n        return 'LE';\n    }\n    else if ('MM' === signature) {\n        return 'BE';\n    }\n}\nconst signatures = [\n    // '492049', // currently not supported\n    '49492a00',\n    '4d4d002a',\n];\nexports.TIFF = {\n    validate(buffer) {\n        return signatures.includes(buffer.toString('hex', 0, 4));\n    },\n    calculate(buffer, filepath) {\n        if (!filepath) {\n            throw new TypeError('Tiff doesn\\'t support buffer');\n        }\n        // Determine BE/LE\n        const isBigEndian = determineEndianness(buffer) === 'BE';\n        // read the IFD\n        const ifdBuffer = readIFD(buffer, filepath, isBigEndian);\n        // extract the tags from the IFD\n        const tags = extractTags(ifdBuffer, isBigEndian);\n        const width = tags[256];\n        const height = tags[257];\n        if (!width || !height) {\n            throw new TypeError('Invalid Tiff. Missing tags');\n        }\n        return { height, width };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WEBP = void 0;\nfunction calculateExtended(buffer) {\n    return {\n        height: 1 + buffer.readUIntLE(7, 3),\n        width: 1 + buffer.readUIntLE(4, 3)\n    };\n}\nfunction calculateLossless(buffer) {\n    return {\n        height: 1 + (((buffer[4] & 0xF) << 10) | (buffer[3] << 2) | ((buffer[2] & 0xC0) >> 6)),\n        width: 1 + (((buffer[2] & 0x3F) << 8) | buffer[1])\n    };\n}\nfunction calculateLossy(buffer) {\n    // `& 0x3fff` returns the last 14 bits\n    // TO-DO: include webp scaling in the calculations\n    return {\n        height: buffer.readInt16LE(8) & 0x3fff,\n        width: buffer.readInt16LE(6) & 0x3fff\n    };\n}\nexports.WEBP = {\n    validate(buffer) {\n        const riffHeader = 'RIFF' === buffer.toString('ascii', 0, 4);\n        const webpHeader = 'WEBP' === buffer.toString('ascii', 8, 12);\n        const vp8Header = 'VP8' === buffer.toString('ascii', 12, 15);\n        return (riffHeader && webpHeader && vp8Header);\n    },\n    calculate(buffer) {\n        const chunkHeader = buffer.toString('ascii', 12, 16);\n        buffer = buffer.slice(20, 30);\n        // Extended webp stream signature\n        if (chunkHeader === 'VP8X') {\n            const extendedHeader = buffer[0];\n            const validStart = (extendedHeader & 0xc0) === 0;\n            const validEnd = (extendedHeader & 0x01) === 0;\n            if (validStart && validEnd) {\n                return calculateExtended(buffer);\n            }\n            else {\n                // TODO: breaking change\n                throw new TypeError('Invalid WebP');\n            }\n        }\n        // Lossless webp stream signature\n        if (chunkHeader === 'VP8 ' && buffer[0] !== 0x2f) {\n            return calculateLossy(buffer);\n        }\n        // Lossy webp stream signature\n        const signature = buffer.toString('hex', 3, 6);\n        if (chunkHeader === 'VP8L' && signature !== '9d012a') {\n            return calculateLossless(buffer);\n        }\n        throw new TypeError('Invalid WebP');\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detector = void 0;\nconst types_1 = require(\"./types\");\nconst keys = Object.keys(types_1.typeHandlers);\n// This map helps avoid validating for every single image type\nconst firstBytes = {\n    0x38: 'psd',\n    0x42: 'bmp',\n    0x44: 'dds',\n    0x47: 'gif',\n    0x49: 'tiff',\n    0x4d: 'tiff',\n    0x52: 'webp',\n    0x69: 'icns',\n    0x89: 'png',\n    0xff: 'jpg'\n};\nfunction detector(buffer) {\n    const byte = buffer[0];\n    if (byte in firstBytes) {\n        const type = firstBytes[byte];\n        if (types_1.typeHandlers[type].validate(buffer)) {\n            return type;\n        }\n    }\n    const finder = (key) => types_1.typeHandlers[key].validate(buffer);\n    return keys.find(finder);\n}\nexports.detector = detector;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  text: string;\n  disabled?: boolean;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onClick: () => void;\n}\n\nconst TextButton = ({ text, icon, transform, disabled, onClick }: $Props) => {\n  return (\n    <SimpleButton onClick={onClick} disabled={disabled}>\n      {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {text}\n    </SimpleButton>\n  );\n};\n\nexport default TextButton;\n\nconst SimpleButton = styled.button`\n  color: ${({ theme }) => theme.buttons.color};\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: right;\n  padding: 10px;\n  margin: 5px;\n  border-radius: 10px;\n  cursor: pointer;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n  box-sizing: content-box;\n  border: none;\n\n  transition: color 0.2s;\n\n  &:hover {\n    color: ${({ theme }) => theme.buttons.hoverColor};\n  }\n\n  &:disabled {\n    background-color: ${({ theme }) => theme.buttons.disabled};\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n  margin-right: 5px;\n`;\n","import React, { useCallback, useState } from \"react\";\nimport Location from \"../../../../data/world/Location\";\nimport styled from \"styled-components\";\n\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../../../form_elements/TextButton\";\nimport Map from \"../../../general_elements/map/Map\";\nimport P2PSender from \"../../../p2p/P2PSender\";\n\nimport \"leaflet/dist/leaflet.css\";\n\ninterface $Props {\n  location: Location;\n}\n\nconst LocationView = ({ location }: $Props) => {\n  const [send, setSend] = useState<boolean>(false);\n\n  const getPicture = useCallback(() => {\n    if (location !== undefined) {\n      if (location.map === \"\" || location.map === null) {\n        return \"\";\n      }\n      return location.map;\n    }\n    return \"\";\n  }, [location]);\n\n  return (\n    <CenterWrapper>\n      <View>\n        {getPicture() !== \"\" ? (\n          <ImageName>\n            <Image pic={getPicture()}></Image>\n            <b>{location.name}</b>\n          </ImageName>\n        ) : (\n          <Name>\n            <b>{location.name}</b>\n          </Name>\n        )}\n      </View>\n\n      <Map editable={false} location={location} />\n      <View>\n        <PropWrapper>\n          {!send && (\n            <TextButton\n              text={`Send ${location.name}`}\n              icon={faPaperPlane}\n              onClick={() => setSend(true)}\n            />\n          )}\n          {!!send && <P2PSender data={location} mode={\"THIS\"} />}\n        </PropWrapper>\n      </View>\n    </CenterWrapper>\n  );\n};\n\nexport default LocationView;\n\nconst CenterWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n`;\n\nconst View = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  max-width: 800px;\n  padding: 5px;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nconst Name = styled.div`\n  height: auto;\n  float: left;\n  padding: 10px;\n  margin: 5px 5px 10px 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 5px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n`;\n\nconst ImageName = styled.div`\n  height: 30px;\n  float: left;\n  padding: 10px;\n  margin: 5px 5px 10px 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 50px 5px 5px 50px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n`;\n\nconst PropWrapper = styled.div`\n  height: auto;\n  width: calc(100% - 6px);\n  float: left;\n  padding: 3px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`;\n\ninterface $ImageProps {\n  pic: string;\n}\n\nconst Image = ({ pic }: $ImageProps) => {\n  const style = {\n    backgroundImage: `url(${pic})`,\n    backgroundPosition: \"center\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n  };\n\n  if (pic !== \"\") {\n    return <ImageElm style={style}></ImageElm>;\n  } else {\n    return <Empty />;\n  }\n};\n\nconst ImageElm = styled.div`\n  margin: -10px 5px -10px -10px;\n  height: 47px;\n  width: 47px;\n  float: left;\n  border-radius: 100px;\n  border: 3px solid ${({ theme }) => theme.main.highlight};\n  background-color: white;\n  overflow: hidden;\n`;\nconst Empty = styled.div``;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\n\nimport {\n  faArrowLeft,\n  faSave,\n  faTrash,\n  faExclamationTriangle,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport LocationView from \"./LocationView\";\nimport LocationEditView from \"./LocationEditView\";\nimport BackButton from \"../../../form_elements/BackButton\";\nimport Location from \"../../../../data/world/Location\";\nimport IconButton from \"../../../form_elements/IconButton\";\nimport { remove, updateWithCallback } from \"../../../../services/DatabaseService\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Dialog from \"../../../general_elements/Dialog\";\nimport { EditToggle, ToggleLeft, ToggleRight } from \"../../../general_elements/ToggleStyle\";\n\ninterface $Props {\n  location: Location;\n  isNew: boolean;\n}\n\nconst LocationDetail = ({ location, isNew }: $Props) => {\n  const [editMode, setMode] = useState<boolean>(isNew);\n  const [locationObj, editLocation] = useState<Location>(location);\n  const [showAlert, setAlert] = useState<boolean>(false);\n  const [showDeleteDialog, setDeleteDialog] = useState<boolean>(false);\n  const [message, setMessage] = useState<string>(\"\");\n  const [unsavedChanges, setUnsavedChanges] = useState<boolean>(false);\n  let history = useHistory();\n\n  const deleteLocation = () => {\n    setDeleteDialog(true);\n  };\n\n  useEffect(() => {\n    if (locationObj !== location) {\n      setUnsavedChanges(true);\n    }\n  }, [locationObj, location]);\n\n  const updateLocation = useCallback((tableName: string, locationObj: Location) => {\n    updateWithCallback(tableName, locationObj, (result) => {\n      if (result > 0) {\n        setUnsavedChanges(false);\n        setMessage(\"Saved successful!\");\n        setAlert(true);\n      } else {\n        setMessage(\"Something went wrong!\");\n        setAlert(true);\n      }\n      setTimeout(() => {\n        setAlert(false);\n      }, 3000);\n    });\n  },[]);\n\n  return (\n    <>\n      {showDeleteDialog && (\n        <Dialog\n          message={`Delete ${location.name}?`}\n          icon={faExclamationTriangle}\n          confirmeText={\"Delete\"}\n          confirmeClick={() => {\n            remove(\"locations\", location.id);\n            history.goBack();\n          }}\n          abortText={\"Back\"}\n          abortClick={() => {\n            setDeleteDialog(false);\n          }}\n        />\n      )}\n      <TopBar>\n        <BackButton icon={faArrowLeft} action={() => history.goBack()} />\n        <EditToggle mode={editMode.toString()}>\n          <ToggleLeft onClick={() => setMode(false)}>View</ToggleLeft>\n          <ToggleRight onClick={() => setMode(true)}>Edit</ToggleRight>\n        </EditToggle>\n        {unsavedChanges && <Icon icon={faExclamationTriangle} title={\"Unsaved changes!\"} />}\n        {editMode && (\n          <>\n            <IconButton onClick={() => updateLocation(\"locations\", locationObj)} icon={faSave} />\n            <IconButton onClick={() => deleteLocation()} icon={faTrash} />\n            {message && showAlert && <Message>{message}</Message>}\n          </>\n        )}\n      </TopBar>\n      {editMode ? (\n        <LocationEditView location={locationObj} onEdit={(value) => editLocation(value)} />\n      ) : (\n        <LocationView location={locationObj} />\n      )}\n    </>\n  );\n};\n\nexport default LocationDetail;\n\nconst TopBar = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  overflow: hidden;\n  flex: 1 1;\n  min-width: calc(100% - 20px);\n  height: 45px;\n  padding: 10px;\n`;\n\nconst Message = styled.div`\n  padding: 5px;\n  width: 150px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 5px;\n  float: right;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  float: right;\n  line-height: 30px;\n  display: block;\n  height: 30px;\n  padding: 10px;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  value: string;\n  label: string;\n  placeholder?: string;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: string) => void;\n}\n\nconst StringField = ({ value, label, placeholder, icon, transform, onChange }: $Props) => (\n  <Field>\n    <LabelText>\n      {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n    </LabelText>\n    <Input\n      type=\"text\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      placeholder={placeholder}\n    ></Input>\n  </Field>\n);\n\nexport default StringField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1 auto;\n`;\n\nconst Input = styled.input`\n  flex: 3 1 auto;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n  width: 0;\n  min-width: 100px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport packageJson from \"../../../package.json\";\nimport LogoImg from \"../../logo192.png\";\n\nconst Header = () => {\n  return (\n    <Bar>\n      <NameWrapper>\n        <Logo src={LogoImg} />\n        <Name>DnDTome</Name>\n      </NameWrapper>\n      <HomeCredits>v{packageJson.version}</HomeCredits>\n    </Bar>\n  );\n};\n\nexport default Header;\n\nconst Bar = styled.div`\n  width: calc(100% - 20px);\n  height: 30px;\n  line-height: 30px;\n  padding: 10px 10px 10px 10px;\n  background-color: ${({ theme }) => theme.header.backgroundColor};\n  color: ${({ theme }) => theme.header.color};\n  box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.25);\n  display: flex;\n  position: fixed;\n  justify-content: space-between;\n  z-index: 1000;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n\n  @media (max-width: 576px) {\n    width: calc(100% - 60px);\n    padding: 10px 10px 10px 50px;\n  }\n`;\n\nconst NameWrapper = styled.div`\n  width: 150px;\n  svg {\n    float: left;\n    font-size: 30px;\n    margin-right: 5px;\n  }\n`;\n\nconst Name = styled.div`\n  width: 95px;\n  height: 30px;\n  font-size: 20px;\n  font-family: \"Quicksand\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: none;\n  line-height: 30px;\n  float: left;\n`;\n\nconst HomeCredits = styled.div`\n  width: 60px;\n  height: 30px;\n  font-size: 10px;\n  font-family: \"Quicksand\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: none;\n  line-height: 30px;\n  text-align: center;\n`;\n\nconst Logo = styled.img`\n  height: 30px;\n  float: left;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\ninterface $Props {\n  open: boolean;\n  setOpen: (value: boolean) => void;\n}\n\nconst NavButton = ({ open, setOpen }: $Props) => {\n  return (\n    <Button open={open} onClick={() => setOpen(!open)}>\n      <div />\n      <div />\n      <div />\n    </Button>\n  );\n};\n\nexport default NavButton;\n\ntype ButtonType = {\n  open?: boolean;\n};\n\nconst Button = styled.button<ButtonType>`\n  position: fixed;\n  top: 15px;\n  left: 20px;\n  display: none;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 20px;\n  height: 20px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 1001;\n\n  &:focus {\n    outline: none;\n  }\n\n  div {\n    width: 20px;\n    height: 2px;\n    background: ${({ theme }) => theme.buttons.color};\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ${({ open }) => (open ? \"rotate(45deg)\" : \"rotate(0)\")};\n    }\n\n    :nth-child(2) {\n      opacity: ${({ open }) => (open ? \"0\" : \"1\")};\n      transform: ${({ open }) => (open ? \"translateX(20px)\" : \"translateX(0)\")};\n    }\n\n    :nth-child(3) {\n      transform: ${({ open }) => (open ? \"rotate(-45deg)\" : \"rotate(0)\")};\n    }\n  }\n\n  @media (max-width: 576px) {\n    display: flex;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMeteor,\n  faCog,\n  faDragon,\n  faIdCard,\n  faChartPie,\n  faHome,\n  faTable,\n  faMapMarkedAlt,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  GiBackpack,\n  GiWomanElfFace,\n  GiCrystalWand,\n  GiPlagueDoctorProfile,\n  GiSwordClash,\n  GiBookmarklet,\n  GiBookshelf,\n  GiSolarSystem,\n  GiScrollUnfurled,\n  GiDjinn,\n} from \"react-icons/gi\";\nimport { BiSelectMultiple } from \"react-icons/bi\";\nimport { HiUserGroup } from \"react-icons/hi\";\nimport { RightTooltip } from \"../SearchbarStyle\";\nimport { MdEvent } from \"react-icons/md\";\n\ninterface $Props {\n  open: boolean;\n}\n\nconst NavMenu = ({ open }: $Props) => {\n  const location = useLocation();\n\n  return (\n    <Menu open={open}>\n      <TopSide>\n        <Link\n          to=\"/home\"\n          className={\n            location.pathname === \"/home\" || location.pathname === \"/\" ? \"menuItemActiv\" : \"\"\n          }\n        >\n          <FontAwesomeIcon icon={faHome} />\n          <RightTooltip>Home</RightTooltip>\n        </Link>\n        <Seperator />\n      </TopSide>\n      <MiddleSide>\n        <LeftSide>\n          <Link\n            to=\"/campaign-overview\"\n            className={location.pathname === \"/campaign-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiBookmarklet />\n            <RightTooltip>Campaigns</RightTooltip>\n          </Link>\n          <Link\n            to=\"/quest-overview\"\n            className={location.pathname === \"/quest-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiScrollUnfurled />\n            <RightTooltip>Quests</RightTooltip>\n          </Link>\n           <Link\n            to=\"/group-overview\"\n            className={location.pathname === \"/group-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <HiUserGroup />\n            <RightTooltip>Groups</RightTooltip>\n          </Link>\n          <Link\n            to=\"/npc-overview\"\n            className={location.pathname === \"/npc-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiDjinn />\n            <RightTooltip>Npc's</RightTooltip>\n          </Link>\n          <Seperator />\n          <Link\n            to=\"/world-overview\"\n            className={location.pathname === \"/world-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiSolarSystem />\n            <RightTooltip>Worlds</RightTooltip>\n          </Link>\n          <Link\n            to=\"/location-overview\"\n            className={location.pathname === \"/location-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <FontAwesomeIcon icon={faMapMarkedAlt} />\n            <RightTooltip>Locations</RightTooltip>\n          </Link>\n          <Link\n            to=\"/event-overview\"\n            className={location.pathname === \"/event-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <MdEvent />\n            <RightTooltip>Events</RightTooltip>\n          </Link>\n          <Seperator />\n          <Link\n            to=\"/randomTable-overview\"\n            className={location.pathname === \"/randomTable-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <FontAwesomeIcon icon={faTable} />\n            <RightTooltip>Random Tables</RightTooltip>\n          </Link>\n          <Seperator />\n          <Link to=\"/library\" className={location.pathname === \"/library\" ? \"menuItemActiv\" : \"\"}>\n            <GiBookshelf />\n            <RightTooltip>Library</RightTooltip>\n          </Link>\n        </LeftSide>\n        <RightSide>\n          <Link\n            to=\"/spell-overview\"\n            className={location.pathname === \"/spell-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <FontAwesomeIcon icon={faMeteor} />\n            <RightTooltip>Spells</RightTooltip>\n          </Link>\n          <Link\n            to=\"/item-overview\"\n            className={location.pathname === \"/item-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiCrystalWand />\n            <RightTooltip>Magic Items</RightTooltip>\n          </Link>\n          <Link\n            to=\"/gear-overview\"\n            className={location.pathname === \"/gear-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiBackpack />\n            <RightTooltip>Gear</RightTooltip>\n          </Link>\n          <Link\n            to=\"/race-overview\"\n            className={location.pathname === \"/race-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiWomanElfFace />\n            <RightTooltip>Races</RightTooltip>\n          </Link>\n          <Link\n            to=\"/class-overview\"\n            className={location.pathname === \"/class-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiPlagueDoctorProfile />\n            <RightTooltip>Classes</RightTooltip>\n          </Link>\n          <Link\n            to=\"/selection-overview\"\n            className={location.pathname === \"/selection-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <BiSelectMultiple />\n            <RightTooltip>Selections</RightTooltip>\n          </Link>\n          <Link\n            to=\"/char-overview\"\n            className={location.pathname === \"/char-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <FontAwesomeIcon icon={faIdCard} />\n            <RightTooltip>Chars</RightTooltip>\n          </Link>\n          <Seperator />\n          <Link\n            to=\"/monster-overview\"\n            className={location.pathname === \"/monster-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <FontAwesomeIcon icon={faDragon} />\n            <RightTooltip>Monsters</RightTooltip>\n          </Link>\n          <Link\n            to=\"/encounter-overview\"\n            className={location.pathname === \"/encounter-overview\" ? \"menuItemActiv\" : \"\"}\n          >\n            <GiSwordClash />\n            <RightTooltip>Encounters</RightTooltip>\n          </Link>\n        </RightSide>\n      </MiddleSide>\n      <BottomSide>\n        <Seperator />\n        <Link\n          to=\"/statistics\"\n          className={location.pathname === \"/statistics\" ? \"menuItemActiv\" : \"\"}\n        >\n          <FontAwesomeIcon icon={faChartPie} />\n          <RightTooltip>Statistics</RightTooltip>\n        </Link>\n        <Link to=\"/options\" className={location.pathname === \"/options\" ? \"menuItemActiv\" : \"\"}>\n          <FontAwesomeIcon icon={faCog} />\n          <RightTooltip>Options</RightTooltip>\n        </Link>\n      </BottomSide>\n    </Menu>\n  );\n};\n\nexport default NavMenu;\n\ntype MenuType = {\n  open?: boolean;\n};\n\nexport const Menu = styled.div<MenuType>`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n\n  background: ${({ theme }) => theme.main.backgroundColor};\n  height: calc(100vh - 1.5em - 55px);\n  text-align: center;\n  padding: 1rem;\n\n  overflow: visible;\n\n  position: fixed;\n  z-index: 950;\n  top: 50px;\n  left: 0;\n\n  @media (max-width: 576px) {\n    transition: transform 0.3s ease-in-out;\n    transform: ${({ open }) => (open ? \"translateX(0)\" : \"translateX(-100%)\")};\n  }\n`;\n\nconst Seperator = styled.div`\n  border-bottom: 2px solid ${({ theme }) => theme.tile.backgroundColor};\n  flex: 1 1 auto;\n  min-width: 100%;\n  max-height: 0px;\n  margin-top: -1px;\n  margin-bottom: -1px;\n`;\n\nconst TopSide = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  width: calc(100% - 10px);\n\n  svg {\n    margin-right: 5px;\n  }\n\n  a {\n    flex: 1 1 auto;\n    max-height: 20px;\n    font-size: 20px;\n    text-align: center;\n    padding: 0.75rem 0;\n    color: ${({ theme }) => theme.tile.color};\n    text-decoration: none;\n    transition: color 0.3s linear;\n\n    position: relative;\n    display: inline-block;\n\n    svg {\n      padding: 0px;\n      margin: 0px;\n    }\n  }\n\n  a:hover {\n    color: ${({ theme }) => theme.tile.color};\n    ${RightTooltip} {\n      opacity: 1;\n      visibility: visible;\n    }\n  }\n\n  a.menuItemActiv {\n    color: ${({ theme }) => theme.main.highlight};\n  }\n`;\nconst MiddleSide = styled.div``;\nconst BottomSide = styled(TopSide)``;\nconst LeftSide = styled(TopSide)`\n  width: 32px;\n  float: left;\n`;\nconst RightSide = styled(LeftSide)`\n  margin-left: 5px;\n  padding-left: 5px;\n  border-left: 2px solid ${({ theme }) => theme.tile.backgroundColor};\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport NavButton from \"./NavButton\";\nimport NavMenu from \"./NavMenu\";\n\ninterface $Props {\n  open: boolean;\n  setOpen: (value: boolean) => void;\n}\n\nconst Navigation = ({ open, setOpen }: $Props) => {\n  return (\n    <Nav>\n      <NavButton open={open} setOpen={setOpen} />\n      <NavMenu open={open} />\n    </Nav>\n  );\n};\n\nexport default Navigation;\n\nconst Nav = styled.div`\n  max-width: 100px;\n  height: auto;\n  background-color: ${({ theme }) => theme.main.backgroundColor}\n  display: flex;\n  flex-wrap: wrap;\n`;\n","import React, { ReactNode, useState } from \"react\";\nimport { useSwipeable } from \"react-swipeable\";\nimport styled from \"styled-components\";\nimport Header from \"./navigation/Header\";\nimport Navigation from \"./navigation/Navigation\";\n\ninterface $Props {\n  children: ReactNode;\n}\n\nconst AppWrapper = ({ children }: $Props) => {\n  const [open, setOpen] = useState(false);\n\n  const moveNav = (mode: string) => {\n    if (mode === \"open\") {\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  };\n\n  const handlers = useSwipeable({\n    onSwipedRight: () => moveNav(\"open\"),\n    onSwipedLeft: () => moveNav(\"close\"),\n  });\n\n  return (\n    <App {...handlers}>\n      <Header />\n      <Navigation open={open} setOpen={setOpen} />\n      <Content>{children}</Content>\n    </App>\n  );\n};\n\nexport default AppWrapper;\n\nconst App = styled.div`\n  padding-top: 4rem;\n  width: 100%;\n  height: 100%;\n  min-height: calc(100vh - 4rem);\n  background-color: ${({ theme }) => theme.main.backgroundColor};\n  display: flex;\n  flex-wrap: no-wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  overflow-x: hidden;\n`;\n\nconst Content = styled.div`\n  margin-left: 105px;\n  width: 100%;\n\n  @media (max-width: 576px) {\n    margin-left: 0px;\n  }\n`;\n","import React, { useEffect, useState } from \"react\";\nimport { BiError, BiHistory, BiSelectMultiple } from \"react-icons/bi\";\nimport {\n  GiCrystalWand,\n  GiBackpack,\n  GiWomanElfFace,\n  GiPlagueDoctorProfile,\n  GiSwordClash,\n  GiBookmarklet,\n  GiScrollUnfurled,\n  GiSolarSystem,\n  GiDjinn,\n  GiBookshelf,\n} from \"react-icons/gi\";\nimport {\n  faMeteor,\n  faIdCard,\n  faDragon,\n  faMapMarkedAlt,\n  faTable,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { MdEvent } from \"react-icons/md\";\nimport { HiUserGroup } from \"react-icons/hi\";\nimport { recivePromiseByAttributeCount } from \"../../services/DatabaseService\";\n\ninterface $Props {\n  type: string;\n  name: string;\n}\n\nconst LinkCheck = ({ type, name }: $Props) => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [entitiyFound, setEntity] = useState<boolean>(false);\n\n  useEffect(() => {\n    recivePromiseByAttributeCount(type + \"s\", \"name\", name).then((count: number) => {\n      setEntity(count > 0);\n      setLoading(false);\n    });\n  }, [type, name]);\n\n  const formatIcon = (type: string) => {\n    switch (type) {\n      case \"spell\":\n        return <FontAwesomeIcon icon={faMeteor} />;\n      case \"item\":\n        return <GiCrystalWand />;\n      case \"gear\":\n        return <GiBackpack />;\n      case \"race\":\n        return <GiWomanElfFace />;\n      case \"class\":\n        return <GiPlagueDoctorProfile />;\n      case \"selection\":\n        return <BiSelectMultiple />;\n      case \"char\":\n        return <FontAwesomeIcon icon={faIdCard} />;\n      case \"monster\":\n        return <FontAwesomeIcon icon={faDragon} />;\n      case \"encounter\":\n        return <GiSwordClash />;\n      case \"campaign\":\n        return <GiBookmarklet />;\n      case \"quest\":\n        return <GiScrollUnfurled />;\n      case \"event\":\n        return <MdEvent />;\n      case \"world\":\n        return <GiSolarSystem />;\n      case \"location\":\n        return <FontAwesomeIcon icon={faMapMarkedAlt} />;\n      case \"npc\":\n        return <GiDjinn />;\n      case \"randomTable\":\n        return <FontAwesomeIcon icon={faTable} />;\n      case \"book\":\n        return <GiBookshelf />;\n        case \"group\":\n          return <HiUserGroup />;\n      default:\n        return \"\";\n    }\n  };\n\n  return (\n    <>\n      {loading && <BiHistory />}\n      {!loading && !entitiyFound && <BiError />}\n      {!loading && entitiyFound && <>{formatIcon(type)}</>}\n    </>\n  );\n};\n\nexport default LinkCheck;\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\nimport LinkCheck from \"./LinkCheck\";\n\ninterface $Props {\n  text: string;\n}\n\nconst FormatedText = ({ text }: $Props) => {\n  const [formatedText, setFormatedText] = useState<JSX.Element>();\n  let history = useHistory();\n\n  const cut = (str: string, cutStart: number, cutEnd: number) => {\n    return str.substr(0, cutStart) + str.substr(cutEnd + 1);\n  };\n\n  const formatLink = useCallback(\n    (text: string) => {\n      if (text !== undefined) {\n        if (text.includes(\"[[\") && text.includes(\"]]\")) {\n          const parts = text.split(\"[[\");\n          let formattedParts: any[] = [];\n          parts.forEach((part: string, index: number) => {\n            if (part.includes(\"]]\")) {\n              const codePart: string[] = part.split(\"]]\");\n              const linkParts: string[] = codePart[0].split(\".\");\n              const link: string = \"/\" + linkParts[0] + \"-detail/name/\" + linkParts[1];\n              formattedParts.push(\n                <TextPart key={index}>\n                  <Link onClick={() => history.push(link)}>\n                    <LinkCheck type={linkParts[0]} name={linkParts[1]} /> {linkParts[1]}\n                  </Link>\n                  <TextPart>{codePart[1]}</TextPart>\n                </TextPart>\n              );\n            } else {\n              if (part !== \"\") formattedParts.push(<TextPart key={index}>{part}</TextPart>);\n            }\n          });\n          return <>{formattedParts}</>;\n        } else {\n          return <TextPart>{text}</TextPart>;\n        }\n      }\n    },\n    [history]\n  );\n\n  const formatTable = useCallback(\n    (textPart: string) => {\n      if (textPart.includes(\"||table||\")) {\n        const table: string[] = text.split(\"||table||\");\n        const tableRows: string[] = table[1].split(\"||\");\n        let isHead = true;\n        return (\n          <>\n            {formatLink(table[0])}\n            <table>\n              <tbody>\n                {tableRows.map((row: string, index: number) => {\n                  if (row.includes(\"|\")) {\n                    if (isHead) {\n                      isHead = false;\n                      const cells = row.split(\"|\");\n                      return (\n                        <tr key={index}>\n                          {cells.map((cell: string, index: number) => {\n                            return <TableHeadProp key={index}>{cell}</TableHeadProp>;\n                          })}\n                        </tr>\n                      );\n                    } else {\n                      const cells = row.split(\"|\");\n                      return (\n                        <tr key={index}>\n                          {cells.map((cell: string, index: number) => {\n                            return <TableProp key={index}>{formatLink(cell)}</TableProp>;\n                          })}\n                        </tr>\n                      );\n                    }\n                  } else {\n                    return <></>;\n                  }\n                })}\n              </tbody>\n            </table>\n            {formatLink(table[2])}\n          </>\n        );\n      } else {\n        return formatLink(textPart);\n      }\n    },\n    [text, formatLink]\n  );\n\n  const formatText = useCallback(\n    (textPart: string) => {\n      while (textPart.includes(\"{{\")) {\n        const cutStart = textPart.indexOf(\"{{\");\n        const cutEnd = textPart.indexOf(\"}}\") + 1;\n        textPart = cut(textPart, cutStart, cutEnd);\n      }\n      return formatTable(textPart);\n    },\n    [formatTable]\n  );\n\n  useEffect(() => {\n    if (text !== undefined) {\n      let formatedText = formatText(text);\n      setFormatedText(formatedText);\n    }\n  }, [text, history, formatText]);\n\n  return <>{formatedText}</>;\n};\n\nexport default FormatedText;\n\nconst Link = styled.span`\n  display: inline-block;\n  background-color: ${({ theme }) => theme.tile.backgroundColorLink};\n  border-radius: 5px;\n  text-decoration: none;\n  color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 14px;\n  padding: 0px 5px 0px 5px;\n  cursor: pointer;\n  white-space: pre;\n`;\n\nconst TextPart = styled.span`\n  white-space: pre-line;\n`;\n\nconst TableHeadProp = styled.th`\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  border-radius: 5px;\n  padding: 2px 5px 2px 5px;\n`;\n\nconst TableProp = styled.td`\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  border-radius: 5px;\n  padding: 5px;\n  text-align: center;\n`;\n","import Dexie from \"dexie\";\nimport { useReducer, useEffect, useCallback, useState } from \"react\";\nimport Filter from \"../data/Filter\";\nimport ReactDOM from \"react-dom\";\n\ntype TableState<T> = [T[] | undefined, boolean, Dexie.DexieError | undefined];\ntype TableAction<T> =\n  | { type: \"resolved\"; data: T[] }\n  | { type: \"empty\" }\n  | { type: \"reset\" }\n  | { type: \"error\"; error: Dexie.DexieError };\n\ntype ItemState<T> = [T | undefined, boolean, Dexie.DexieError | undefined];\ntype ItemAction<T> =\n  | { type: \"resolved\"; data: T }\n  | { type: \"empty\" }\n  | { type: \"reset\" }\n  | { type: \"error\"; error: Dexie.DexieError };\n\nexport const useTable = <T, U>(table: Dexie.Table<T, U>): TableState<T> => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: TableState<T>, action: TableAction<T>): TableState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .toArray()\n          .then((data) => {\n            dispatch({\n              type: \"resolved\",\n              data,\n            });\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, effect]);\n\n  return state;\n};\n\nexport const useTableByFilter = <T, U>(\n  table: Dexie.Table<T, U>,\n  filters: Filter[]\n): TableState<T> => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const [filter, setFilter] = useState<Filter[]>(filters);\n  const reducer = useCallback((state: TableState<T>, action: TableAction<T>): TableState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      case \"reset\":\n        return [undefined, true, undefined];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (filter !== filters) {\n      ReactDOM.unstable_batchedUpdates(() => {\n        dispatch({ type: \"reset\" });\n        setFilter(filters);\n        setEffect(true);\n      });\n    }\n  }, [filter, filters, setEffect]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () => console.time(\"filtered get all\");\n      table\n        .filter((obj: T) => {\n          let test: boolean[] = [];\n          filters.forEach((filter) => {\n            if (typeof filter.value === \"string\") {\n              test.push(\n                // @ts-ignore\n                obj[filter.fieldName].toLowerCase().includes(filter.value.toLowerCase())\n              );\n            } else if (typeof filter.value === \"number\") {\n              // @ts-ignore\n              test.push(obj[filter.fieldName] === filter.value);\n            } else if (typeof filter.value === \"boolean\") {\n              // @ts-ignore\n              test.push(obj[filter.fieldName] === filter.value);\n            } else if (filter.value instanceof Array) {\n              let arrayTest: boolean = false;\n              filter.value.forEach((filterPart: string | boolean | number) => {\n                if (typeof filterPart === \"string\") {\n                  if (\n                    // @ts-ignore\n                    obj[filter.fieldName].toLowerCase().includes(filterPart.toLowerCase())\n                  )\n                    arrayTest = true;\n                } else if (typeof filterPart === \"number\") {\n                  // @ts-ignore\n                  if (obj[filter.fieldName] === filterPart) arrayTest = true;\n                } else if (typeof filterPart === \"boolean\") {\n                  // @ts-ignore\n                  if (obj[filter.fieldName] === filterPart) arrayTest = true;\n                }\n              });\n              test.push(arrayTest);\n            }\n          });\n\n          let result = true;\n          test.forEach((val) => {\n            if (!val) result = false;\n          });\n          return result;\n        })\n        .sortBy(\"name\")\n        .then((data) => {\n          console.timeEnd(\"filtered get all\");\n          dispatch({\n            type: \"resolved\",\n            data,\n          });\n        })\n        .catch((error) => {\n          dispatch({\n            type: \"error\",\n            error,\n          });\n        });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, effect, filters]);\n\n  return state;\n};\n\nexport const useItem = <T, U>(table: Dexie.Table<T, U>, id: U) => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: ItemState<T>, action: ItemAction<T>): ItemState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"empty\":\n        return [undefined, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .get(id)\n          .then((data) => {\n            if (data !== undefined) {\n              dispatch({\n                type: \"resolved\",\n                data,\n              });\n            } else {\n              dispatch({\n                type: \"empty\",\n              });\n            }\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, id, effect]);\n\n  return state;\n};\n\nexport const useItemByAttr = <T, U>(table: Dexie.Table<T, U>, attr: string, attrValue: string) => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: ItemState<T>, action: ItemAction<T>): ItemState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"empty\":\n        return [undefined, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .where(attr)\n          .equals(attrValue)\n          .first()\n          .then((data) => {\n            if (data !== undefined) {\n              dispatch({\n                type: \"resolved\",\n                data,\n              });\n            } else {\n              dispatch({\n                type: \"empty\",\n              });\n            }\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, attr, attrValue, effect]);\n\n  return state;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  icon: IconDefinition;\n  transform?: string | Transform;\n  action: () => void;\n}\n\nconst BackButton = ({ icon, transform, action }: $Props) => {\n  return (\n    <Back onClick={action}>\n      <Icon icon={icon} transform={transform} />\n    </Back>\n  );\n};\n\nexport default BackButton;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n  &:hover {\n    color: ${({ theme }) => theme.buttons.color};\n  }\n`;\n\nconst Back = styled.div`\n  float: left;\n  font-size: calc(${({ theme }) => theme.buttons.height} + 10px);\n  margin: 10px 0px 0px 10px;\n  cursor: pointer;\n`;\n","import styled from \"styled-components\";\n\nexport const ToggleLeft = styled.div`\n  width: auto;\n  padding: 10px;\n  margin: 5px 0px 5px 5px;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: left;\n  cursor: pointer;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n  border-radius: 5px 0px 0px 5px;\n\n  transition: color 0.2s, background-color 0.2s;\n\n  &:hover {\n    color: ${({ theme }) => theme.buttons.hoverColor};\n  }\n`;\n\nexport const ToggleRight = styled(ToggleLeft)`\n  margin: 5px 5px 5px 0px;\n\n  border-radius: 0px 5px 5px 0px;\n`;\n\ntype EditMode = {\n  mode: string;\n};\n\nexport const EditToggle = styled.div<EditMode>`\n  width: auto;\n  height: ${({ theme }) => theme.buttons.height};\n  float: right;\n  color: ${({ theme }) => theme.buttons.color};\n\n  ${ToggleLeft} {\n    background-color: ${(props) => {\n      if (props.mode !== \"true\") {\n        return ({ theme }) => theme.buttons.backgroundColor;\n      } else {\n        return ({ theme }) => theme.tile.backgroundColor;\n      }\n    }};\n  }\n\n  ${ToggleRight} {\n    background-color: ${(props) => {\n      if (props.mode === \"true\") {\n        return ({ theme }) => theme.buttons.backgroundColor;\n      } else {\n        return ({ theme }) => theme.tile.backgroundColor;\n      }\n    }};\n  }\n`;\n","import Dexie from \"dexie\";\nimport Book from \"../data/Book\";\nimport Campaign from \"../data/campaign/Campaign\";\nimport Npc from \"../data/campaign/Npc\";\nimport Quest from \"../data/campaign/Quest\";\nimport Char from \"../data/chars/Char\";\nimport Class from \"../data/classes/Class\";\nimport Subclass from \"../data/classes/Subclass\";\nimport Encounter from \"../data/encounter/Encounter\";\nimport Gear from \"../data/Gear\";\nimport Item from \"../data/Item\";\nimport Monster from \"../data/Monster\";\nimport Race from \"../data/races/Race\";\nimport Subrace from \"../data/races/Subrace\";\nimport RandomTable from \"../data/RandomTable\";\nimport Selection from \"../data/Selection\";\nimport Spell from \"../data/Spell\";\nimport World from \"../data/world/World\";\nimport Location from \"../data/world/Location\";\nimport Event from \"../data/world/Event\";\nimport Group from \"../data/campaign/Group\";\n\nexport class MyAppDatabase extends Dexie {\n  spells: Dexie.Table<Spell, number>; // number = type of the primkey\n  items: Dexie.Table<Item, number>; // number = type of the primkey\n  gears: Dexie.Table<Gear, number>; // number = type of the primkey\n  monsters: Dexie.Table<Monster, number>; // number = type of the primkey\n  races: Dexie.Table<Race, number>; // number = type of the primkey\n  subraces: Dexie.Table<Subrace, number>; // number = type of the primkey\n  classes: Dexie.Table<Class, number>; // number = type of the primkey\n  subclasses: Dexie.Table<Subclass, number>; // number = type of the primkey\n  chars: Dexie.Table<Char, number>; // number = type of the primkey\n  encounters: Dexie.Table<Encounter, number>; // number = type of the primkey\n  books: Dexie.Table<Book, number>; // number = type of the primkey\n  selections: Dexie.Table<Selection, number>; // number = type of the primkey\n  randomTables: Dexie.Table<RandomTable, number>; // number = type of the primkey\n  campaigns: Dexie.Table<Campaign, number>; // number = type of the primkey\n  quests: Dexie.Table<Quest, number>; // number = type of the primkey\n  npcs: Dexie.Table<Npc, number>; // number = type of the primkey\n  worlds: Dexie.Table<World, number>; // number = type of the primkey\n  locations: Dexie.Table<Location, number>; // number = type of the primkey\n  events: Dexie.Table<Event, number>; // number = type of the primkey\n  groups: Dexie.Table<Group, number>; // number = type of the primkey\n\n  constructor() {\n    super(\"DnDTomeDB\");\n    this.version(1).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n    });\n    this.version(2).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n    });\n    this.version(3).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n    });\n    this.version(4).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n    });\n    this.version(5).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      chars:\n        \"++id, name, player, prof, level, pic, classes, race, background, ac, hp, currentHp, hitDice, init, speed, str, dex, con, int, wis, cha, strSave, dexSave, conSave, intSave, wisSave, chaSave, strSaveProf, dexSaveProf, conSaveProf, intSaveProf, wisSaveProf, chaSaveProf, actions, bonusActions, reactions, features, classFeatures, racialFeatures, profsLangs, senses, passivPerception, passivInsight, passivInvestigation, notesOne, notesTwo, notesThree, acrobatics, animalHandling, arcana, athletics, deception, history, insight, intimidation, investigation, medicine, nature, perception, performance, persuasion, religion, sleightOfHand, stealth, survival, acrobaticsProf, animalHandlingProf, arcanaProf, athleticsProf, deceptionProf, historyProf, insightProf, intimidationProf, investigationProf, medicineProf, natureProf, perceptionProf, performanceProf, persuasionProf, religionProf, sleightOfHandProf, stealthProf, survivalProf, spellNotes, alignment, inspiration, castingHit, castingDC\",\n    });\n    this.version(6).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      chars:\n        \"++id, name, player, prof, level, pic, classes, race, background, ac, hp, currentHp, hitDice, init, speed, str, dex, con, int, wis, cha, strSave, dexSave, conSave, intSave, wisSave, chaSave, strSaveProf, dexSaveProf, conSaveProf, intSaveProf, wisSaveProf, chaSaveProf, actions, bonusActions, reactions, features, classFeatures, racialFeatures, profsLangs, senses, passivPerception, passivInsight, passivInvestigation, notesOne, notesTwo, notesThree, acrobatics, animalHandling, arcana, athletics, deception, history, insight, intimidation, investigation, medicine, nature, perception, performance, persuasion, religion, sleightOfHand, stealth, survival, acrobaticsProf, animalHandlingProf, arcanaProf, athleticsProf, deceptionProf, historyProf, insightProf, intimidationProf, investigationProf, medicineProf, natureProf, perceptionProf, performanceProf, persuasionProf, religionProf, sleightOfHandProf, stealthProf, survivalProf, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      chars_spells: \"++id, char_id, spell_id, prepared\",\n      chars_monsters: \"++id, char_id, monster_id\",\n      chars_items:\n        \"++id, char_id, item_id, gear_id, amount, equiped, attuned, damage, hit, range, properties\",\n    });\n    this.version(7).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n    });\n    this.version(8).stores({\n      chars_spells: null,\n      chars_monsters: null,\n      chars_items: null,\n\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n    });\n    this.version(9).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n    });\n    this.version(10).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n    });\n    this.version(11).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n    });\n    this.version(12).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n    });\n    this.version(13).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n    });\n    this.version(14).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, quests, npcs, notes, players, sources, filename\",\n    });\n    this.version(15).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, quests, npcs, notes, players, sources, filename\",\n      quests:\n        \"++id, name, pic, locations, origin, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, locations, events, notes, sources, filename\",\n      locations: \"++id, name, map, description, events, notes, sources, filename\",\n      events: \"++id, name, description, locations, npcs, notes, sources, filename\",\n    });\n    this.version(16).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, quests, npcs, notes, players, map, sources, filename\",\n      quests:\n        \"++id, name, pic, locations, origin, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, locations, events, notes, sources, filename\",\n      locations: \"++id, name, map, description, events, notes, sources, filename\",\n      events: \"++id, name, description, locations, npcs, notes, sources, filename\",\n    });\n    this.version(17).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, npcs, notes, logs, players, flow, map, sources, filename\",\n      quests: \"++id, name, pic, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, events, notes, sources, filename\",\n      locations:\n        \"++id, name, map, dimension, description, events, notes, markers, sources, filename\",\n      events: \"++id, name, description, npcs, notes, sources, filename\",\n    });\n    this.version(18).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, npcs, notes, logs, players, flow, map, sources, filename\",\n      quests: \"++id, name, pic, description, rewards, followQuest, sources, filename\",\n      groups: \"++id, name, pic, description, npcs, players, monsters, flow, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, locations, events, map, sources, filename\",\n      locations:\n        \"++id, name, map, dimension, description, events, notes, markers, sources, filename\",\n      events: \"++id, name, description, date, sources, filename\",\n    });\n\n    this.spells = this.table(\"spells\");\n    this.items = this.table(\"items\");\n    this.gears = this.table(\"gears\");\n    this.monsters = this.table(\"monsters\");\n    this.races = this.table(\"races\");\n    this.subraces = this.table(\"subraces\");\n    this.classes = this.table(\"classes\");\n    this.subclasses = this.table(\"subclasses\");\n    this.chars = this.table(\"chars\");\n    this.encounters = this.table(\"encounters\");\n    this.books = this.table(\"books\");\n    this.selections = this.table(\"selections\");\n    this.randomTables = this.table(\"randomTables\");\n    this.campaigns = this.table(\"campaigns\");\n    this.quests = this.table(\"quests\");\n    this.npcs = this.table(\"npcs\");\n    this.worlds = this.table(\"worlds\");\n    this.locations = this.table(\"locations\");\n    this.events = this.table(\"events\");\n    this.groups = this.table(\"groups\");\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Peer from \"peerjs\";\nimport { reciveAllPromise } from \"../../services/DatabaseService\";\nimport IEntity from \"../../data/IEntity\";\nimport { generateBrokerId } from \"../../services/PeerIdService\";\n\nimport { faExclamationCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport StringField from \"../form_elements/StringField\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\ninterface $Props {\n  data: string | IEntity;\n  mode: \"ALL\" | \"THIS\";\n}\n\nconst P2PSender = ({ data, mode }: $Props) => {\n  const [name, setName] = useState<string>(\"\");\n  const [peer, setPeer] = useState<Peer>();\n  const [error, setError] = useState<any>();\n\n  useEffect(() => {\n    if (peer === undefined) {\n      const brokerId = generateBrokerId();\n      const newPeer = new Peer(brokerId, {\n        host: \"peerjs.thedndtome.com\",\n        secure: true,\n      });\n      console.log(newPeer);\n      newPeer.on(\"connection\", function (conn) {\n        conn.on(\"error\", function (errorData) {\n          setError(errorData);\n        });\n        conn.on(\"open\", function () {\n          conn.send(data);\n        });\n      });\n      setPeer(newPeer);\n    }\n  }, [data, peer]);\n\n  useEffect(() => {\n    if (peer !== undefined) {\n      if (peer.disconnected && !peer.destroyed) {\n        peer.reconnect();\n      }\n      if (mode === \"ALL\" && typeof data === \"string\") {\n        reciveAllPromise(data).then((results) => {\n          console.log(results);\n          setName(data);\n          peer.on(\"connection\", function (conn) {\n            conn.on(\"error\", function (errorData) {\n              setError(errorData);\n            });\n            conn.on(\"open\", function () {\n              conn.send(results);\n            });\n          });\n        });\n      } else if (mode === \"THIS\" && typeof data !== \"string\") {\n        setName(data.name);\n        peer.on(\"connection\", function (conn) {\n          conn.on(\"error\", function (errorData) {\n            setError(errorData);\n          });\n          conn.on(\"open\", function () {\n            conn.send(data);\n          });\n        });\n      }\n    }\n  }, [data, mode, peer]);\n\n  return (\n    <>\n      {peer !== undefined && peer.id !== null && (\n        <>\n          <StringField value={peer.id} label={`Your ${name} ID:`} onChange={() => {}} />\n        </>\n      )}\n      {error && <Icon icon={faExclamationCircle} />}\n    </>\n  );\n};\n\nexport default P2PSender;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n","const getRandomInteger = (min: number, max: number) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\nexport const generateBrokerId = () => {\n  let password = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  for (let i = 0; i < 13; i++) {\n    password += characters[getRandomInteger(0, characters.length - 1)];\n  }\n  return password;\n};\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { MyAppDatabase } from \"../../../../../database/MyDatabase\";\nimport { useItem } from \"../../../../../hooks/DexieHooks\";\nimport { LoadingSpinner } from \"../../../../Loading\";\nimport AppWrapper from \"../../../../AppWrapper\";\nimport LocationDetail from \"../LocationDetail\";\n\ntype TParams = { id: string };\n\nconst IdToLocation = ({ match }: RouteComponentProps<TParams>) => {\n  const db = new MyAppDatabase();\n  const [location, loading, error] = useItem(db.locations, +match.params.id);\n\n  return (\n    <AppWrapper>\n      {!error && loading && <LoadingSpinner />}\n      {error && !loading && <>Fail by Id</>}\n      {!error && !loading && location !== undefined && (\n        <LocationDetail location={location} isNew={location.name === \"\" ? true : false} />\n      )}\n    </AppWrapper>\n  );\n};\n\nexport default IdToLocation;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../form_elements/TextButton\";\n\ninterface $Props {\n  message: string;\n  icon?: IconDefinition;\n  confirmeText: string;\n  confirmeClick: () => void;\n  abortText: string;\n  abortClick: () => void;\n}\n\nconst Dialog = ({\n  message,\n  icon,\n  confirmeText,\n  confirmeClick,\n  abortText,\n  abortClick,\n}: $Props) => {\n  return (\n    <DialogWrapper>\n      <Message>\n        {icon ? <Icon icon={icon} /> : \"\"} {message}\n      </Message>\n      <ButtonBar>\n        <TextButton text={abortText} onClick={abortClick} />\n        <TextButton text={confirmeText} onClick={confirmeClick} />\n      </ButtonBar>\n    </DialogWrapper>\n  );\n};\n\nexport default Dialog;\n\nconst DialogWrapper = styled.div`\n  width: 180px;\n  position: absolute;\n  z-index: 1010;\n  top: 10px;\n  left: calc(50% - 100px);\n  padding: 10px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  color: ${({ theme }) => theme.tile.color};\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  text-align: center;\n`;\n\nconst ButtonBar = styled.div`\n  width: 100%;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n  margin-right: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  value: number;\n  label: string;\n  max?: number;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: number) => void;\n}\n\nconst NumberField = ({\n  value,\n  max,\n  label,\n  icon,\n  transform,\n  onChange,\n}: $Props) => {\n  return (\n    <Field>\n      <LabelText>\n        {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n      </LabelText>\n      {max && (\n        <Input\n          type=\"number\"\n          max={max}\n          value={value}\n          onChange={(e) => onChange(+e.target.value)}\n        />\n      )}\n      {!max && (\n        <Input\n          type=\"number\"\n          value={value}\n          onChange={(e) => onChange(+e.target.value)}\n        />\n      )}\n    </Field>\n  );\n};\n\nexport default NumberField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1;\n`;\n\nconst Input = styled.input`\n  flex: 1 1 auto;\n  max-width: 6em;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n`;\n","import styled from \"styled-components\";\n\nconst Tooltip = styled.span`\n  visibility: hidden;\n  width: 120px;\n  font-size: 16px;\n  background-color: ${({ theme }) => theme.main.highlight};\n  color: #fff;\n  text-align: center;\n  border-radius: 10px;\n  padding: 5px 0;\n  position: absolute;\n  z-index: 1;\n  opacity: 0.6;\n  transition: 0.3s;\n`;\n\nexport const LeftTooltip = styled(Tooltip)`\n  right: 150%;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    left: 100%;\n    margin-top: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: transparent transparent transparent ${({ theme }) => theme.main.highlight};\n  }\n`;\n\nexport const RightTooltip = styled(Tooltip)`\n  left: 150%;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    right: 100%;\n    margin-top: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: transparent ${({ theme }) => theme.main.highlight} transparent transparent;\n  }\n`;\n\ntype SearchMode = {\n  open?: boolean;\n};\n\nexport const Bar = styled.div<SearchMode>`\n  position: absolute;\n  z-index: 50;\n\n  transition: transform 0.3s ease-in-out;\n  transform: ${({ open }) => (open ? \"translateY(0)\" : \"translateY(-100%)\")};\n\n  height: auto;\n  min-height: 30px;\n  min-width: calc(100% - 125px);\n  padding: 10px 10px 10px 10px;\n  background: ${({ theme }) => theme.main.backgroundColor};\n  box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.25);\n\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n`;\n\nexport const FixedBar = styled(Bar)<SearchMode>`\n  position: fixed;\n  top: 40px;\n  left: 100px;\n  z-index: 900;\n\n  @media (max-width: 576px) {\n    min-width: calc(100% - 20px);\n    left: 0px;\n  }\n`;\n\nexport const SearchBar = styled.div<SearchMode>`\n  position: absolute;\n  bottom: -35px;\n  left: calc(50% - 17px);\n\n  height: 40px;\n  width: 40px;\n  transform: rotate(45deg);\n  color: ${({ theme }) => theme.buttons.color};\n  box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.25);\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  text-align: center;\n  line-height: 40px;\n\n  @media (max-width: 576px) {\n    left: calc(50% - 20px);\n  }\n\n  svg {\n    transform: rotate(-45deg);\n  }\n`;\n\nexport const CreateButton = styled.button`\n    position: fixed;\n    bottom: 10px;\n    right: 10px;\n    top: auto;\n  \n    background-color: ${({ theme }) => theme.buttons.backgroundColor};\n    color: ${({ theme }) => theme.buttons.color};\n    box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);\n    border: none;\n    padding 10px;\n    box-sizing:content-box;\n    line-height: 20px;\n    cursor: pointer;\n  \n    width: 30px;\n    height: 30px;\n    border-radius: 40px;\n    text-decoration: none;\n  \n    &:hover {\n      color: ${({ theme }) => theme.buttons.hoverColor};\n      ${LeftTooltip} {\n        opacity: 1;\n        visibility: visible;\n      }\n    }\n  `;\n\nexport const ExportButton = styled(CreateButton)`\n  bottom: 70px;\n`;\n\nexport const FieldGroup = styled.div`\n  flex: 2 1 auto;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-around;\n`;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 95;"],"sourceRoot":""}