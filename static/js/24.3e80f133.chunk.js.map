{"version":3,"sources":["../node_modules/inherits/inherits_browser.js","data/world/Location.tsx","../node_modules/readable-stream/lib/_stream_duplex.js","../node_modules/events/events.js","../node_modules/core-util-is/lib/util.js","components/general_elements/map/MarkerEditDialog.tsx","components/general_elements/map/Map.tsx","../node_modules/process-nextick-args/index.js","../node_modules/webpack/buildin/module.js","../node_modules/readable-stream/node_modules/safe-buffer/index.js","../node_modules/url/url.js","../node_modules/stream-http/lib/capability.js","../node_modules/stream-http/lib/response.js","../node_modules/readable-stream/readable-browser.js","../node_modules/readable-stream/lib/_stream_readable.js","../node_modules/readable-stream/lib/internal/streams/stream-browser.js","../node_modules/readable-stream/lib/internal/streams/destroy.js","../node_modules/readable-stream/lib/_stream_writable.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/readable-stream/lib/_stream_transform.js","../node_modules/image-size/dist/types.js","../node_modules/image-size/dist/types/ico.js","../node_modules/image-size/dist/readUInt.js","components/entities/location/details/LocationEditView.tsx","../node_modules/node-libs-browser/node_modules/punycode/punycode.js","../node_modules/url/util.js","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js","../node_modules/stream-http/index.js","../node_modules/stream-http/lib/request.js","../node_modules/readable-stream/lib/internal/streams/BufferList.js","../node_modules/util-deprecate/browser.js","../node_modules/safe-buffer/index.js","../node_modules/readable-stream/lib/_stream_passthrough.js","../node_modules/to-arraybuffer/index.js","../node_modules/xtend/immutable.js","../node_modules/builtin-status-codes/browser.js","../node_modules/image-size/dist/index.js","../node_modules/path-browserify/index.js","../node_modules/queue/index.js","../node_modules/image-size/dist/types/bmp.js","../node_modules/image-size/dist/types/cur.js","../node_modules/image-size/dist/types/dds.js","../node_modules/image-size/dist/types/gif.js","../node_modules/image-size/dist/types/icns.js","../node_modules/image-size/dist/types/j2c.js","../node_modules/image-size/dist/types/jp2.js","../node_modules/image-size/dist/types/jpg.js","../node_modules/image-size/dist/types/ktx.js","../node_modules/image-size/dist/types/png.js","../node_modules/image-size/dist/types/pnm.js","../node_modules/image-size/dist/types/psd.js","../node_modules/image-size/dist/types/svg.js","../node_modules/image-size/dist/types/tiff.js","../node_modules/image-size/dist/types/webp.js","../node_modules/image-size/dist/detector.js","components/entities/location/details/LocationView.tsx","components/entities/location/details/LocationDetail.tsx","services/DatabaseService.tsx","components/form_elements/IconButton.tsx","components/form_elements/TextButton.tsx","components/form_elements/StringField.tsx","components/general_elements/LinkCheck.tsx","components/general_elements/FormatedText.tsx","hooks/DexieHooks.tsx","components/entities/location/details/link_wrapper/NameToLocation.tsx","components/form_elements/BackButton.tsx","components/general_elements/ToggleStyle.tsx","database/MyDatabase.tsx","components/p2p/P2PSender.tsx","services/PeerIdService.tsx","components/general_elements/Dialog.tsx","components/form_elements/NumberField.tsx","components/general_elements/ErrorTile.tsx","../node_modules/peerjs/dist sync"],"names":["Object","create","module","exports","ctor","superCtor","super_","prototype","constructor","value","enumerable","writable","configurable","TempCtor","Location","id","name","sources","map","dimension","markers","this","height","width","isLocation","arg","nameCheck","undefined","sourcesCheck","mapCheck","pna","require","objectKeys","keys","obj","key","push","Duplex","util","inherits","Readable","Writable","v","length","method","options","call","readable","allowHalfOpen","once","onend","_writableState","ended","nextTick","onEndNT","self","end","defineProperty","get","highWaterMark","_readableState","destroyed","set","_destroy","err","cb","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","emitter","Promise","resolve","reject","eventListener","errorListener","removeListener","slice","arguments","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","newListener","emit","unshift","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","handler","len","listeners","addListener","on","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","objectToString","o","toString","isArray","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","re","isObject","isDate","d","isError","e","isFunction","isPrimitive","isBuffer","Buffer","EditDialog","activeElement","onSave","onClose","onDelete","useState","text","label","setLabel","useEffect","Dialog","StringField","onChange","TextButton","icon","faTimes","onClick","faSave","newElement","onSaveClick","styled","div","theme","tile","color","main","backgroundColor","boxShadow","Map","location","editable","onEdit","showEditDialog","setEditDialaog","setActive","mapWrap","useRef","setMap","mapHeight","setHeight","bounds","setBounds","gcd","useCallback","a","b","divisor","widthratio","heightratio","number","fitBounds","current","clientHeight","MapWrapper","ref","MarkerEditDialog","element","markerList","splice","MapContainer","style","center","zoom","scrollWheelZoom","whenCreated","TileLayer","url","ImageOverlay","markerPositions","Markers","useMapEvents","click","latlng","Icon","iconRetinaUrl","iconUrl","shadowUrl","iconSize","iconAnchor","marker","Marker","Popup","autoPan","minWidth","onOpen","log","editMarker","FormatedText","process","version","indexOf","fn","arg1","arg2","arg3","webpackPolyfill","deprecate","paths","children","l","buffer","copyProps","src","dst","SafeBuffer","encodingOrOffset","from","alloc","allocUnsafe","allocUnsafeSlow","size","fill","encoding","buf","SlowBuffer","punycode","Url","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","parse","urlParse","source","relative","resolveObject","format","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","split","replace","rest","join","trim","simplePath","exec","substr","proto","lowerProto","toLowerCase","match","atSign","hostEnd","hec","lastIndexOf","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","j","k","charCodeAt","validParts","notHost","bit","toASCII","p","h","ae","esc","encodeURIComponent","escape","qm","s","stringify","charAt","rel","result","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","last","hasTrailingSlash","up","isAbsolute","fetch","global","ReadableStream","writableStream","WritableStream","abortController","AbortController","blobConstructor","Blob","ArrayBuffer","xhr","getXHR","XMLHttpRequest","open","XDomainRequest","checkTypeSupport","responseType","haveArrayBuffer","haveSlice","arraybuffer","msstream","mozchunkedarraybuffer","overrideMimeType","vbArray","VBArray","capability","stream","rStates","readyStates","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","IncomingMessage","response","mode","fetchTimer","_mode","headers","rawHeaders","trailers","rawTrailers","_fetchResponse","statusCode","status","statusMessage","statusText","forEach","header","write","chunk","_destroyed","_resumeFetch","close","clearTimeout","abort","body","pipeTo","catch","reader","getReader","read","then","done","_xhr","_pos","responseURL","getAllResponseHeaders","matches","_charset","mimeType","charsetMatch","_read","_onXHRProgress","readyState","responseBody","toArray","responseText","newData","Uint8Array","MSStreamReader","onprogress","byteLength","onload","readAsArrayBuffer","Stream","Transform","PassThrough","ReadableState","EElistenerCount","OurUint8Array","debugUtil","debug","debuglog","StringDecoder","BufferList","destroyImpl","kProxyEvents","isDuplex","objectMode","readableObjectMode","hwm","readableHwm","readableHighWaterMark","defaultHwm","Math","floor","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","awaitDrain","readingMore","decoder","destroy","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","_uint8ArrayToBuffer","addChunk","maybeReadMore","needMoreData","_undestroy","undestroy","isPaused","setEncoding","enc","howMuchToRead","head","data","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","clear","hasStrings","c","next","str","nb","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","x","parseInt","nOrig","doRead","pipe","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onclose","onfinish","ondrain","onerror","ondata","cleanedUp","needDrain","pipeOnDrain","increasedAwaitDrain","pause","event","resume","dests","ev","res","wrap","_this","paused","_fromList","emitErrorNT","readableDestroyed","writableDestroyed","errorEmitted","ending","finished","CorkedRequest","entry","finish","corkReq","callback","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","browser","setImmediate","WritableState","internalUtil","realHasInstance","nop","writableObjectMode","writableHwm","writableHighWaterMark","finalCalled","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","final","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","getBuffer","out","_","Symbol","hasInstance","object","writeAfterEnd","valid","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","isEncoding","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","r","utf8CheckExtraBytes","total","utf8CheckIncomplete","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","transform","_transform","flush","_flush","_this2","err2","typeHandlers","bmp_1","cur_1","dds_1","gif_1","icns_1","ico_1","j2c_1","jp2_1","jpg_1","ktx_1","png_1","pnm_1","psd_1","svg_1","tiff_1","webp_1","bmp","BMP","cur","CUR","dds","DDS","gif","GIF","icns","ICNS","ico","ICO","j2c","J2C","jp2","JP2","jpg","JPG","ktx","KTX","png","PNG","pnm","PNM","psd","PSD","svg","SVG","tiff","TIFF","webp","WEBP","getSizeFromOffset","offset","readUInt8","getImageSize","imageIndex","validate","readUInt16LE","calculate","nbImages","imageSize","imgs","images","readUInt","bits","isBigEndian","LocationEditView","http","sizeOf","chunks","CenterWrapper","View","faImage","pic","faLink","root","nodeType","freeGlobal","window","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","stringFromCharCode","fromCharCode","array","mapDomain","string","parts","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","base","decode","input","basic","oldi","t","baseMinusT","codePoint","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","test","define","hasOwnProperty","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","idx","stringifyPrimitive","isFinite","ks","f","ClientRequest","extend","statusCodes","request","opts","defaultProtocol","toUpperCase","req","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","toArrayBuffer","preferBinary","_opts","_body","_headers","setHeader","useFetch","decideMode","_fetchTimer","_onFinish","lowerName","unsafeHeaders","getHeader","removeHeader","headersObj","headersList","keyName","signal","controller","_fetchAbortController","requestTimeout","setTimeout","credentials","withCredentials","_connect","reason","timeout","ontimeout","setRequestHeader","_response","onreadystatechange","send","statusValid","flushHeaders","setNoDelay","setSocketKeepAlive","instance","Constructor","_classCallCheck","inspect","custom","config","localStorage","val","msg","trace","byteOffset","arrayCopy","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","types","setConcurrency","fs","queue_1","types_1","detector_1","queue","default","concurrency","autostart","lookup","filepath","detector","descriptor","openSync","fstatSync","closeSync","bufferSize","min","readSync","syncFileToBuffer","promises","handle","stat","asyncFileToBuffer","normalizeArray","allowAboveRoot","filter","resolvedPath","resolvedAbsolute","cwd","normalize","trailingSlash","to","start","fromParts","toParts","samePartsLength","outputParts","delimiter","dirname","code","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","Queue","Infinity","results","pending","session","running","jobs","timers","begin","reverse","clearTimers","timeoutId","callOnErrorOrEnd","methodResult","job","didTimeout","resultIndex","promise","stop","abs","readInt32LE","readUInt32LE","gifRegexp","signature","ICON_TYPE_SIZE","ICON","icm4","icm8","ics4","ics8","is32","s8mk","icp4","icl4","icl8","il32","l8mk","icp5","ic11","ich4","ich8","ih32","h8mk","icp6","ic12","it32","t8mk","ic07","ic08","ic13","ic09","ic14","ic10","readImageHeader","imageOffset","imageLengthOffset","readUInt32BE","bufferLength","fileLength","imageHeader","BoxTypes","parseIHDR","box","signatureLength","ftypeBoxStart","ftypBoxLength","readUInt16BE","unit","calculateRREQLength","readUInt_1","isEXIF","extractSize","validateExifBlock","exifBlock","byteAlign","EXIF_HEADER_BYTES","idfDirectoryEntries","directoryEntryNumber","block","extractOrientation","validateBuffer","orientation","chunkName","PNMTypes","P1","P2","P3","P4","P5","P6","P7","PF","Signatures","handlers","lines","dimensions","line","pam","includes","svgReg","extractorRegExps","viewbox","units","cm","em","ex","mm","pc","pt","parseLength","round","parseFloat","parseViewbox","attrs","parseAttributes","calculateByDimensions","ratio","calculateByViewbox","readValue","low","nextTag","signatures","determineEndianness","tags","temp","extractTags","ifdOffset","fileSize","statSync","endBuffer","readIFD","riffHeader","webpHeader","vp8Header","chunkHeader","extendedHeader","readUIntLE","calculateExtended","readInt16LE","calculateLossy","calculateLossless","firstBytes","find","LocationView","setSend","getPicture","ImageName","Name","PropWrapper","faPaperPlane","P2PSender","Image","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","ImageElm","Empty","highlight","LocationDetail","isNew","editMode","setMode","locationObj","editLocation","showAlert","setAlert","showDeleteDialog","setDeleteDialog","setMessage","unsavedChanges","setUnsavedChanges","history","useHistory","updateLocation","tableName","updateWithCallback","faExclamationTriangle","confirmeText","confirmeClick","remove","goBack","abortText","abortClick","TopBar","BackButton","faArrowLeft","action","title","IconButton","faTrash","Message","FontAwesomeIcon","update","db","MyAppDatabase","table","finally","saveNew","entity","filename","put","prom","saveWithCallback","add","delete","reciveAll","reciveCount","reciveCountPromise","reciveByAttribute","where","equalsIgnoreCase","recivePromiseByAttribute","recivePromiseByAttributeCount","equals","reciveAllPromise","applyFilters","filters","fieldName","hasTag","fieldPart","arrayTest","filterPart","reciveAllFiltered","sortedFiled","sort","sortBy","reciveAttributeSelection","attribute","orderBy","uniqueKeys","reciveAttributeSelectionPromise","createNewWithId","deleteAll","exportFilteredFromTable","all","navigator","msSaveOrOpenBlob","blob","encodeURI","JSON","document","createElement","download","appendChild","removeChild","floatLeft","disabled","SimpleButton","left","DisabledSimpleButton","buttons","button","hoverColor","placeholder","Field","LabelText","Input","LinkCheck","loading","setLoading","entitiyFound","setEntity","faMeteor","faIdCard","faDragon","faMapMarkedAlt","faTable","formatIcon","formatedText","setFormatedText","cut","cutStart","cutEnd","formatLink","formattedParts","codePart","linkParts","link","TextPart","Link","formatTable","textPart","tableRows","isHead","row","cells","cell","TableHeadProp","TableProp","formatText","span","backgroundColorLink","th","td","useItem","effect","setEffect","reducer","useReducer","dispatch","useItemByAttr","attr","attrValue","first","NameToLocation","locations","params","buttonText","onButton","newLocation","createNewLocation","Back","ToggleLeft","ToggleRight","EditToggle","props","spells","items","gears","monsters","races","subraces","classes","subclasses","chars","encounters","books","selections","randomTables","campaigns","quests","npcs","worlds","groups","stores","chars_spells","chars_monsters","chars_items","Dexie","setName","peer","setPeer","setError","brokerId","max","password","characters","random","generateBrokerId","newPeer","Peer","secure","conn","errorData","disconnected","reconnect","faExclamationCircle","DialogWrapper","ButtonBar","NumberField","ErrorTile","Tile","Text","PropTitle","faPlusCircle","headerColor","webpackEmptyContext"],"mappings":"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C,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,+RACFC,WAAY,gCACZC,MAAO,yCAET,EAAK9+B,QAAQ,IAAIs/B,OAAO,CACtBlB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,+RACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,2CAEd,EAAK/+B,QAAQ,IAAIs/B,OAAO,CACtBlB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,2CAEd,EAAK/+B,QAAQ,IAAIs/B,OAAO,CACtBlB,OACE,oGACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,uCAEhB,EAAKh/B,QAAQ,IAAIs/B,OAAO,CACtBlB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,uCAEhB,EAAKh/B,QAAQ,IAAIs/B,OAAO,CACtBlB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MAAO,uCACPC,WAAY,yCACZC,aAAc,qCACdC,UACE,yFAEJ,EAAKj/B,QAAQ,IAAIs/B,OAAO,CACtBlB,OACE,8GACFC,MACE,6FACFC,MACE,0FACFC,SACE,mOACFC,MACE,+FACFC,SAAU,6DACVC,QAAS,qFACTC,WAAY,gDACZC,MACE,iTACFC,WAAY,gCACZC,MA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","file":"static/js/24.3e80f133.chunk.js","sourcesContent":["if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","import { LatLng } from \"leaflet\";\nimport IEntity from \"../IEntity\";\n\nexport default class Location implements IEntity {\n  id?: number;\n  name: string;\n  map: string;\n  dimension: { height: number; width: number };\n  markers: { position: LatLng; text: string }[];\n  sources: string;\n\n  constructor(\n    id?: number,\n    name?: string,\n    sources?: string,\n    map?: string,\n    dimension?: { height: number; width: number },\n    markers?: { position: LatLng; text: string }[]\n  ) {\n    this.id = id;\n    this.name = name || \"\";\n    this.sources = sources || \"\";\n    this.map = map || \"\";\n    this.dimension = dimension || {\n      height: 1,\n      width: 1,\n    };\n    this.markers = markers || [];\n  }\n}\n\nexport function isLocation(arg: any): arg is Location {\n  const nameCheck = arg.name !== undefined && typeof arg.name == \"string\";\n  const sourcesCheck = arg.sources !== undefined && typeof arg.sources == \"string\";\n  const mapCheck = arg.map !== undefined && typeof arg.map == \"string\";\n  return arg && nameCheck && sourcesCheck && mapCheck;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport StringField from \"../../form_elements/StringField\";\nimport { faSave, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../../form_elements/TextButton\";\nimport { LatLng } from \"leaflet\";\n\ninterface $Props {\n  activeElement: { position: LatLng; text: string };\n  onSave: (element: { position: LatLng; text: string }) => void;\n  onDelete: () => void;\n  onClose: () => void;\n}\n\nconst EditDialog = ({ activeElement, onSave, onClose, onDelete }: $Props) => {\n  const [label, setLabel] = useState<string>(activeElement.text);\n\n  useEffect(() => {\n    setLabel(activeElement.text);\n  }, [activeElement]);\n\n  const onSaveClick = () => {\n    let newElement = { ...activeElement };\n    newElement.text = label;\n    onSave(newElement);\n  };\n\n  return (\n    <Dialog>\n      <StringField value={label} label=\"Label\" onChange={setLabel} />\n      <TextButton text={\"Cancel\"} icon={faTimes} onClick={onClose} />\n      <TextButton text={\"Delete\"} icon={faTimes} onClick={onDelete} />\n      <TextButton text={\"Save\"} icon={faSave} onClick={() => onSaveClick()} />\n    </Dialog>\n  );\n};\n\nexport default EditDialog;\n\nconst Dialog = styled.div`\n  position: absolute;\n  z-index: 1000;\n  top: 0px;\n\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.main.backgroundColor};\n  margin: 0.5em;\n  padding: 10px;\n  border-radius: 10px;\n  box-shadow: ${({ theme }) => theme.tile.boxShadow};\n`;\n","import { Icon, LatLng } from \"leaflet\";\nimport React, { useRef, useState, useCallback, useEffect } from \"react\";\nimport { ImageOverlay, MapContainer, Marker, TileLayer, Popup, useMapEvents } from \"react-leaflet\";\nimport styled from \"styled-components\";\nimport Location from \"../../../data/world/Location\";\nimport FormatedText from \"../FormatedText\";\nimport MarkerEditDialog from \"./MarkerEditDialog\";\n\ninterface $Props {\n  location: Location;\n  editable: boolean;\n  onEdit?: (value: Location) => void;\n}\n\nconst Map = ({ location, editable, onEdit }: $Props) => {\n  const [showEditDialog, setEditDialaog] = useState<boolean>(false);\n  const [activeElement, setActive] = useState<number>();\n\n  const mapWrap = useRef<HTMLDivElement>(null);\n  const [map, setMap] = useState<any>(null);\n  const [mapHeight, setHeight] = useState<string>();\n  const [bounds, setBounds] = useState<any>();\n  const position: any = [0, 0];\n\n  const gcd = useCallback((a: number, b: number): number => {\n    return b ? gcd(b, a % b) : a;\n  }, []);\n\n  const reduceBounds = (number: number[][]): number[][] => {\n    const newBounds = [\n      [number[0][0] * 0.5, number[0][1] * 0.5],\n      [number[1][0] * 0.5, number[1][1] * 0.5],\n    ];\n    return newBounds;\n  };\n\n  useEffect(() => {\n    if (\n      location.dimension !== undefined &&\n      location.map !== undefined &&\n      location.map !== \"\" &&\n      location.dimension !== { height: 0, width: 0 }\n    ) {\n      const divisor = gcd(location.dimension.width, location.dimension.height);\n      const widthratio = location.dimension.width / divisor;\n      const heightratio = location.dimension.height / divisor;\n      const bounds: any = [\n        [-(heightratio / 2), -(widthratio / 2)],\n        [heightratio / 2, widthratio / 2],\n      ];\n      setBounds(bounds);\n    }\n  }, [location.map, location.dimension, gcd]);\n\n  useEffect(() => {\n    if (map !== null && bounds) {\n      map.fitBounds(reduceBounds(bounds));\n    }\n  }, [map, bounds]);\n\n  useEffect(() => {\n    if (mapWrap && mapWrap.current) {\n      const height = mapWrap.current.clientHeight;\n      setHeight(height + \"px\");\n    }\n  }, []);\n\n  const onSave = (element: { position: LatLng; text: string }) => {\n    if (editable && onEdit !== undefined && activeElement !== undefined) {\n      let markerList = [...location.markers];\n      markerList[activeElement] = element;\n      onEdit({\n        ...location,\n        markers: markerList,\n      });\n    }\n  };\n\n  const onDelete = () => {\n    if (editable && onEdit !== undefined && activeElement !== undefined) {\n      let markerList = [...location.markers];\n      markerList.splice(activeElement, 1);\n      setEditDialaog(false);\n      setActive(undefined);\n      onEdit({\n        ...location,\n        markers: markerList,\n      });\n    }\n  };\n\n  return (\n    <MapWrapper ref={mapWrap}>\n      {showEditDialog && activeElement !== undefined && (\n        <MarkerEditDialog\n          activeElement={location.markers[activeElement]}\n          onSave={onSave}\n          onDelete={onDelete}\n          onClose={() => setEditDialaog(false)}\n        ></MarkerEditDialog>\n      )}\n      {location.map && mapHeight && bounds && (\n        <MapContainer\n          style={{ height: mapHeight, width: \"100%\" }}\n          center={position}\n          zoom={1}\n          scrollWheelZoom={false}\n          whenCreated={setMap}\n        >\n          <TileLayer url={\"\"} />\n          <ImageOverlay bounds={bounds} url={location.map} />\n          <Markers\n            markerPositions={location.markers}\n            location={location}\n            editable={editable}\n            onEdit={onEdit}\n            setActive={setActive}\n            setEditDialaog={setEditDialaog}\n          />\n        </MapContainer>\n      )}\n    </MapWrapper>\n  );\n};\n\nexport default Map;\n\ninterface $MarkersProps {\n  location: Location;\n  editable: boolean;\n  markerPositions: { position: LatLng; text: string }[];\n  onEdit?: (value: Location) => void;\n  setActive: (value: number) => void;\n  setEditDialaog: (value: boolean) => void;\n}\n\nconst Markers = ({\n  location,\n  editable,\n  markerPositions,\n  onEdit,\n  setActive,\n  setEditDialaog,\n}: $MarkersProps) => {\n  useMapEvents({\n    click(e) {\n      if (editable && onEdit !== undefined) {\n        onEdit({\n          ...location,\n          markers: [...location.markers, { position: e.latlng, text: \"New\" }],\n        });\n      }\n    },\n  });\n\n  const editMarker = (index: number) => {\n    if (editable && onEdit !== undefined) {\n      console.log(index);\n      setActive(index);\n      setEditDialaog(true);\n    }\n  };\n\n  let icon = new Icon({\n    iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\n    iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\n    shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n  });\n\n  return (\n    <>\n      {markerPositions &&\n        markerPositions.map((marker: { position: LatLng; text: string }, index: number) => {\n          return (\n            <Marker key={index} position={marker.position} icon={icon}>\n              <Popup autoPan={true} minWidth={120} onOpen={() => editMarker(index)}>\n                <FormatedText text={marker.text} />\n              </Popup>\n            </Marker>\n          );\n        })}\n    </>\n  );\n};\n\nconst MapWrapper = styled.div`\n  float: left;\n  padding: 3px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  position: relative;\n\n  height: calc(100vh - 265px);\n  width: calc(100% - 6px);\n\n  & .leaflet-popup {\n    .leaflet-popup-content-wrapper {\n      background-color: ${({ theme }) => theme.tile.backgroundColor};\n      color: ${({ theme }) => theme.tile.color};\n    }\n    .leaflet-popup-tip {\n      background-color: ${({ theme }) => theme.tile.backgroundColor};\n    }\n  }\n`;\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeHandlers = void 0;\nconst bmp_1 = require(\"./types/bmp\");\nconst cur_1 = require(\"./types/cur\");\nconst dds_1 = require(\"./types/dds\");\nconst gif_1 = require(\"./types/gif\");\nconst icns_1 = require(\"./types/icns\");\nconst ico_1 = require(\"./types/ico\");\nconst j2c_1 = require(\"./types/j2c\");\nconst jp2_1 = require(\"./types/jp2\");\nconst jpg_1 = require(\"./types/jpg\");\nconst ktx_1 = require(\"./types/ktx\");\nconst png_1 = require(\"./types/png\");\nconst pnm_1 = require(\"./types/pnm\");\nconst psd_1 = require(\"./types/psd\");\nconst svg_1 = require(\"./types/svg\");\nconst tiff_1 = require(\"./types/tiff\");\nconst webp_1 = require(\"./types/webp\");\nexports.typeHandlers = {\n    bmp: bmp_1.BMP,\n    cur: cur_1.CUR,\n    dds: dds_1.DDS,\n    gif: gif_1.GIF,\n    icns: icns_1.ICNS,\n    ico: ico_1.ICO,\n    j2c: j2c_1.J2C,\n    jp2: jp2_1.JP2,\n    jpg: jpg_1.JPG,\n    ktx: ktx_1.KTX,\n    png: png_1.PNG,\n    pnm: pnm_1.PNM,\n    psd: psd_1.PSD,\n    svg: svg_1.SVG,\n    tiff: tiff_1.TIFF,\n    webp: webp_1.WEBP,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ICO = void 0;\nconst TYPE_ICON = 1;\n/**\n * ICON Header\n *\n * | Offset | Size | Purpose |\n * | 0\t    | 2    | Reserved. Must always be 0.  |\n * | 2      | 2    | Image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid. |\n * | 4      | 2    | Number of images in the file. |\n *\n */\nconst SIZE_HEADER = 2 + 2 + 2; // 6\n/**\n * Image Entry\n *\n * | Offset | Size | Purpose |\n * | 0\t    | 1    | Image width in pixels. Can be any number between 0 and 255. Value 0 means width is 256 pixels. |\n * | 1      | 1    | Image height in pixels. Can be any number between 0 and 255. Value 0 means height is 256 pixels. |\n * | 2      | 1    | Number of colors in the color palette. Should be 0 if the image does not use a color palette. |\n * | 3      | 1    | Reserved. Should be 0. |\n * | 4      | 2    | ICO format: Color planes. Should be 0 or 1. |\n * |        |      | CUR format: The horizontal coordinates of the hotspot in number of pixels from the left. |\n * | 6      | 2    | ICO format: Bits per pixel. |\n * |        |      | CUR format: The vertical coordinates of the hotspot in number of pixels from the top. |\n * | 8      | 4    | The size of the image's data in bytes |\n * | 12     | 4    | The offset of BMP or PNG data from the beginning of the ICO/CUR file |\n *\n */\nconst SIZE_IMAGE_ENTRY = 1 + 1 + 1 + 1 + 2 + 2 + 4 + 4; // 16\nfunction getSizeFromOffset(buffer, offset) {\n    const value = buffer.readUInt8(offset);\n    return value === 0 ? 256 : value;\n}\nfunction getImageSize(buffer, imageIndex) {\n    const offset = SIZE_HEADER + (imageIndex * SIZE_IMAGE_ENTRY);\n    return {\n        height: getSizeFromOffset(buffer, offset + 1),\n        width: getSizeFromOffset(buffer, offset)\n    };\n}\nexports.ICO = {\n    validate(buffer) {\n        if (buffer.readUInt16LE(0) !== 0) {\n            return false;\n        }\n        return buffer.readUInt16LE(2) === TYPE_ICON;\n    },\n    calculate(buffer) {\n        const nbImages = buffer.readUInt16LE(4);\n        const imageSize = getImageSize(buffer, 0);\n        if (nbImages === 1) {\n            return imageSize;\n        }\n        const imgs = [imageSize];\n        for (let imageIndex = 1; imageIndex < nbImages; imageIndex += 1) {\n            imgs.push(getImageSize(buffer, imageIndex));\n        }\n        const result = {\n            height: imageSize.height,\n            images: imgs,\n            width: imageSize.width\n        };\n        return result;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readUInt = void 0;\n// Abstract reading multi-byte unsigned integers\nfunction readUInt(buffer, bits, offset, isBigEndian) {\n    offset = offset || 0;\n    const endian = isBigEndian ? 'BE' : 'LE';\n    const methodName = ('readUInt' + bits + endian);\n    return buffer[methodName].call(buffer, offset);\n}\nexports.readUInt = readUInt;\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Location from \"../../../../data/world/Location\";\n\nimport StringField from \"../../../form_elements/StringField\";\nimport Map from \"../../../general_elements/map/Map\";\n\nimport { faLink, faImage } from \"@fortawesome/free-solid-svg-icons\";\nimport NumberField from \"../../../form_elements/NumberField\";\n\ninterface $Props {\n  location: Location;\n  onEdit: (value: Location) => void;\n}\n\nconst LocationEditView = ({ location, onEdit }: $Props) => {\n  useEffect(() => {\n    if (location.map !== undefined && location.map !== \"\") {\n      let url = require(\"url\");\n      let http = require(\"http\");\n      let sizeOf = require(\"image-size\");\n\n      let options = url.parse(location.map);\n      http.get(options, function (response: any) {\n        let chunks: any = [];\n        response\n          .on(\"data\", function (chunk: any) {\n            chunks.push(chunk);\n          })\n          .on(\"end\", function () {\n            let buffer = Buffer.concat(chunks);\n            let size = sizeOf(buffer);\n            console.log(size);\n            onEdit({ ...location, dimension: { height: size.height, width: size.width } });\n          });\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.map]);\n\n  return (\n    <CenterWrapper>\n      <View>\n        <StringField\n          value={location.name}\n          label=\"Name\"\n          onChange={(name) => onEdit({ ...location, name: name })}\n        />\n\n        <StringField\n          value={location.map}\n          label=\"Picture\"\n          icon={faImage}\n          onChange={(pic) => onEdit({ ...location, map: pic })}\n        />\n        <NumberField\n          value={location.dimension.width}\n          label=\"Map width\"\n          onChange={(width) =>\n            onEdit({ ...location, dimension: { ...location.dimension, width: width } })\n          }\n        />\n        <NumberField\n          value={location.dimension.height}\n          label=\"Map height\"\n          onChange={(height) =>\n            onEdit({ ...location, dimension: { ...location.dimension, height: height } })\n          }\n        />\n        <StringField\n          value={location.sources}\n          label=\"Sources\"\n          icon={faLink}\n          onChange={(sources) => onEdit({ ...location, sources: sources })}\n        />\n      </View>\n      <Map editable={true} location={location} onEdit={onEdit} />\n    </CenterWrapper>\n  );\n};\n\nexport default LocationEditView;\n\nconst CenterWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n`;\n\nconst View = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  padding: 5px;\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`;\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.types = exports.setConcurrency = exports.imageSize = void 0;\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst queue_1 = require(\"queue\");\nconst types_1 = require(\"./types\");\nconst detector_1 = require(\"./detector\");\n// Maximum buffer size, with a default of 512 kilobytes.\n// TO-DO: make this adaptive based on the initial signature of the image\nconst MaxBufferSize = 512 * 1024;\n// This queue is for async `fs` operations, to avoid reaching file-descriptor limits\nconst queue = new queue_1.default({ concurrency: 100, autostart: true });\n/**\n * Return size information based on a buffer\n *\n * @param {Buffer} buffer\n * @param {String} filepath\n * @returns {Object}\n */\nfunction lookup(buffer, filepath) {\n    // detect the file type.. don't rely on the extension\n    const type = detector_1.detector(buffer);\n    // find an appropriate handler for this file type\n    if (type && type in types_1.typeHandlers) {\n        const size = types_1.typeHandlers[type].calculate(buffer, filepath);\n        if (size !== undefined) {\n            size.type = type;\n            return size;\n        }\n    }\n    // throw up, if we don't understand the file\n    throw new TypeError('unsupported file type: ' + type + ' (file: ' + filepath + ')');\n}\n/**\n * Reads a file into a buffer.\n * @param {String} filepath\n * @returns {Promise<Buffer>}\n */\nfunction asyncFileToBuffer(filepath) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const handle = yield fs.promises.open(filepath, 'r');\n        const { size } = yield handle.stat();\n        if (size <= 0) {\n            yield handle.close();\n            throw new Error('Empty file');\n        }\n        const bufferSize = Math.min(size, MaxBufferSize);\n        const buffer = Buffer.alloc(bufferSize);\n        yield handle.read(buffer, 0, bufferSize, 0);\n        yield handle.close();\n        return buffer;\n    });\n}\n/**\n * Synchronously reads a file into a buffer, blocking the nodejs process.\n *\n * @param {String} filepath\n * @returns {Buffer}\n */\nfunction syncFileToBuffer(filepath) {\n    // read from the file, synchronously\n    const descriptor = fs.openSync(filepath, 'r');\n    const { size } = fs.fstatSync(descriptor);\n    if (size <= 0) {\n        fs.closeSync(descriptor);\n        throw new Error('Empty file');\n    }\n    const bufferSize = Math.min(size, MaxBufferSize);\n    const buffer = Buffer.alloc(bufferSize);\n    fs.readSync(descriptor, buffer, 0, bufferSize, 0);\n    fs.closeSync(descriptor);\n    return buffer;\n}\n// eslint-disable-next-line @typescript-eslint/no-use-before-define\nmodule.exports = exports = imageSize; // backwards compatibility\nexports.default = imageSize;\n/**\n * @param {Buffer|string} input - buffer or relative/absolute path of the image file\n * @param {Function=} [callback] - optional function for async detection\n */\nfunction imageSize(input, callback) {\n    // Handle buffer input\n    if (Buffer.isBuffer(input)) {\n        return lookup(input);\n    }\n    // input should be a string at this point\n    if (typeof input !== 'string') {\n        throw new TypeError('invalid invocation');\n    }\n    // resolve the file path\n    const filepath = path.resolve(input);\n    if (typeof callback === 'function') {\n        queue.push(() => asyncFileToBuffer(filepath)\n            .then((buffer) => process.nextTick(callback, null, lookup(buffer, filepath)))\n            .catch(callback));\n    }\n    else {\n        const buffer = syncFileToBuffer(filepath);\n        return lookup(buffer, filepath);\n    }\n}\nexports.imageSize = imageSize;\nexports.setConcurrency = (c) => { queue.concurrency = c; };\nexports.types = Object.keys(types_1.typeHandlers);\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","var inherits = require('inherits')\nvar EventEmitter = require('events').EventEmitter\n\nmodule.exports = Queue\nmodule.exports.default = Queue\n\nfunction Queue (options) {\n  if (!(this instanceof Queue)) {\n    return new Queue(options)\n  }\n\n  EventEmitter.call(this)\n  options = options || {}\n  this.concurrency = options.concurrency || Infinity\n  this.timeout = options.timeout || 0\n  this.autostart = options.autostart || false\n  this.results = options.results || null\n  this.pending = 0\n  this.session = 0\n  this.running = false\n  this.jobs = []\n  this.timers = {}\n}\ninherits(Queue, EventEmitter)\n\nvar arrayMethods = [\n  'pop',\n  'shift',\n  'indexOf',\n  'lastIndexOf'\n]\n\narrayMethods.forEach(function (method) {\n  Queue.prototype[method] = function () {\n    return Array.prototype[method].apply(this.jobs, arguments)\n  }\n})\n\nQueue.prototype.slice = function (begin, end) {\n  this.jobs = this.jobs.slice(begin, end)\n  return this\n}\n\nQueue.prototype.reverse = function () {\n  this.jobs.reverse()\n  return this\n}\n\nvar arrayAddMethods = [\n  'push',\n  'unshift',\n  'splice'\n]\n\narrayAddMethods.forEach(function (method) {\n  Queue.prototype[method] = function () {\n    var methodResult = Array.prototype[method].apply(this.jobs, arguments)\n    if (this.autostart) {\n      this.start()\n    }\n    return methodResult\n  }\n})\n\nObject.defineProperty(Queue.prototype, 'length', {\n  get: function () {\n    return this.pending + this.jobs.length\n  }\n})\n\nQueue.prototype.start = function (cb) {\n  if (cb) {\n    callOnErrorOrEnd.call(this, cb)\n  }\n\n  this.running = true\n\n  if (this.pending >= this.concurrency) {\n    return\n  }\n\n  if (this.jobs.length === 0) {\n    if (this.pending === 0) {\n      done.call(this)\n    }\n    return\n  }\n\n  var self = this\n  var job = this.jobs.shift()\n  var once = true\n  var session = this.session\n  var timeoutId = null\n  var didTimeout = false\n  var resultIndex = null\n  var timeout = job.timeout || this.timeout\n\n  function next (err, result) {\n    if (once && self.session === session) {\n      once = false\n      self.pending--\n      if (timeoutId !== null) {\n        delete self.timers[timeoutId]\n        clearTimeout(timeoutId)\n      }\n\n      if (err) {\n        self.emit('error', err, job)\n      } else if (didTimeout === false) {\n        if (resultIndex !== null) {\n          self.results[resultIndex] = Array.prototype.slice.call(arguments, 1)\n        }\n        self.emit('success', result, job)\n      }\n\n      if (self.session === session) {\n        if (self.pending === 0 && self.jobs.length === 0) {\n          done.call(self)\n        } else if (self.running) {\n          self.start()\n        }\n      }\n    }\n  }\n\n  if (timeout) {\n    timeoutId = setTimeout(function () {\n      didTimeout = true\n      if (self.listeners('timeout').length > 0) {\n        self.emit('timeout', next, job)\n      } else {\n        next()\n      }\n    }, timeout)\n    this.timers[timeoutId] = timeoutId\n  }\n\n  if (this.results) {\n    resultIndex = this.results.length\n    this.results[resultIndex] = null\n  }\n\n  this.pending++\n  self.emit('start', job)\n  var promise = job(next)\n  if (promise && promise.then && typeof promise.then === 'function') {\n    promise.then(function (result) {\n      return next(null, result)\n    }).catch(function (err) {\n      return next(err || true)\n    })\n  }\n\n  if (this.running && this.jobs.length > 0) {\n    this.start()\n  }\n}\n\nQueue.prototype.stop = function () {\n  this.running = false\n}\n\nQueue.prototype.end = function (err) {\n  clearTimers.call(this)\n  this.jobs.length = 0\n  this.pending = 0\n  done.call(this, err)\n}\n\nfunction clearTimers () {\n  for (var key in this.timers) {\n    var timeoutId = this.timers[key]\n    delete this.timers[key]\n    clearTimeout(timeoutId)\n  }\n}\n\nfunction callOnErrorOrEnd (cb) {\n  var self = this\n  this.on('error', onerror)\n  this.on('end', onend)\n\n  function onerror (err) { self.end(err) }\n  function onend (err) {\n    self.removeListener('error', onerror)\n    self.removeListener('end', onend)\n    cb(err, this.results)\n  }\n}\n\nfunction done (err) {\n  this.session++\n  this.running = false\n  this.emit('end', err)\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BMP = void 0;\nexports.BMP = {\n    validate(buffer) {\n        return ('BM' === buffer.toString('ascii', 0, 2));\n    },\n    calculate(buffer) {\n        return {\n            height: Math.abs(buffer.readInt32LE(22)),\n            width: buffer.readUInt32LE(18)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CUR = void 0;\nconst ico_1 = require(\"./ico\");\nconst TYPE_CURSOR = 2;\nexports.CUR = {\n    validate(buffer) {\n        if (buffer.readUInt16LE(0) !== 0) {\n            return false;\n        }\n        return buffer.readUInt16LE(2) === TYPE_CURSOR;\n    },\n    calculate(buffer) {\n        return ico_1.ICO.calculate(buffer);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DDS = void 0;\nexports.DDS = {\n    validate(buffer) {\n        return buffer.readUInt32LE(0) === 0x20534444;\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32LE(12),\n            width: buffer.readUInt32LE(16)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GIF = void 0;\nconst gifRegexp = /^GIF8[79]a/;\nexports.GIF = {\n    validate(buffer) {\n        const signature = buffer.toString('ascii', 0, 6);\n        return (gifRegexp.test(signature));\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt16LE(8),\n            width: buffer.readUInt16LE(6)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ICNS = void 0;\n/**\n * ICNS Header\n *\n * | Offset | Size | Purpose                                                |\n * | 0\t    | 4    | Magic literal, must be \"icns\" (0x69, 0x63, 0x6e, 0x73) |\n * | 4      | 4    | Length of file, in bytes, msb first.                   |\n *\n */\nconst SIZE_HEADER = 4 + 4; // 8\nconst FILE_LENGTH_OFFSET = 4; // MSB => BIG ENDIAN\n/**\n * Image Entry\n *\n * | Offset | Size | Purpose                                                          |\n * | 0\t    | 4    | Icon type, see OSType below.                                     |\n * | 4      | 4    | Length of data, in bytes (including type and length), msb first. |\n * | 8      | n    | Icon data                                                        |\n */\nconst ENTRY_LENGTH_OFFSET = 4; // MSB => BIG ENDIAN\nconst ICON_TYPE_SIZE = {\n    ICON: 32,\n    'ICN#': 32,\n    // m => 16 x 16\n    'icm#': 16,\n    icm4: 16,\n    icm8: 16,\n    // s => 16 x 16\n    'ics#': 16,\n    ics4: 16,\n    ics8: 16,\n    is32: 16,\n    s8mk: 16,\n    icp4: 16,\n    // l => 32 x 32\n    icl4: 32,\n    icl8: 32,\n    il32: 32,\n    l8mk: 32,\n    icp5: 32,\n    ic11: 32,\n    // h => 48 x 48\n    ich4: 48,\n    ich8: 48,\n    ih32: 48,\n    h8mk: 48,\n    // . => 64 x 64\n    icp6: 64,\n    ic12: 32,\n    // t => 128 x 128\n    it32: 128,\n    t8mk: 128,\n    ic07: 128,\n    // . => 256 x 256\n    ic08: 256,\n    ic13: 256,\n    // . => 512 x 512\n    ic09: 512,\n    ic14: 512,\n    // . => 1024 x 1024\n    ic10: 1024,\n};\nfunction readImageHeader(buffer, imageOffset) {\n    const imageLengthOffset = imageOffset + ENTRY_LENGTH_OFFSET;\n    return [\n        buffer.toString('ascii', imageOffset, imageLengthOffset),\n        buffer.readUInt32BE(imageLengthOffset)\n    ];\n}\nfunction getImageSize(type) {\n    const size = ICON_TYPE_SIZE[type];\n    return { width: size, height: size, type };\n}\nexports.ICNS = {\n    validate(buffer) {\n        return ('icns' === buffer.toString('ascii', 0, 4));\n    },\n    calculate(buffer) {\n        const bufferLength = buffer.length;\n        const fileLength = buffer.readUInt32BE(FILE_LENGTH_OFFSET);\n        let imageOffset = SIZE_HEADER;\n        let imageHeader = readImageHeader(buffer, imageOffset);\n        let imageSize = getImageSize(imageHeader[0]);\n        imageOffset += imageHeader[1];\n        if (imageOffset === fileLength) {\n            return imageSize;\n        }\n        const result = {\n            height: imageSize.height,\n            images: [imageSize],\n            width: imageSize.width\n        };\n        while (imageOffset < fileLength && imageOffset < bufferLength) {\n            imageHeader = readImageHeader(buffer, imageOffset);\n            imageSize = getImageSize(imageHeader[0]);\n            imageOffset += imageHeader[1];\n            result.images.push(imageSize);\n        }\n        return result;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.J2C = void 0;\nexports.J2C = {\n    validate(buffer) {\n        // TODO: this doesn't seem right. SIZ marker doesnt have to be right after the SOC\n        return buffer.toString('hex', 0, 4) === 'ff4fff51';\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32BE(12),\n            width: buffer.readUInt32BE(8),\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JP2 = void 0;\nconst BoxTypes = {\n    ftyp: '66747970',\n    ihdr: '69686472',\n    jp2h: '6a703268',\n    jp__: '6a502020',\n    rreq: '72726571',\n    xml_: '786d6c20'\n};\nconst calculateRREQLength = (box) => {\n    const unit = box.readUInt8(0);\n    let offset = 1 + (2 * unit);\n    const numStdFlags = box.readUInt16BE(offset);\n    const flagsLength = numStdFlags * (2 + unit);\n    offset = offset + 2 + flagsLength;\n    const numVendorFeatures = box.readUInt16BE(offset);\n    const featuresLength = numVendorFeatures * (16 + unit);\n    return offset + 2 + featuresLength;\n};\nconst parseIHDR = (box) => {\n    return {\n        height: box.readUInt32BE(4),\n        width: box.readUInt32BE(8),\n    };\n};\nexports.JP2 = {\n    validate(buffer) {\n        const signature = buffer.toString('hex', 4, 8);\n        const signatureLength = buffer.readUInt32BE(0);\n        if (signature !== BoxTypes.jp__ || signatureLength < 1) {\n            return false;\n        }\n        const ftypeBoxStart = signatureLength + 4;\n        const ftypBoxLength = buffer.readUInt32BE(signatureLength);\n        const ftypBox = buffer.slice(ftypeBoxStart, ftypeBoxStart + ftypBoxLength);\n        return ftypBox.toString('hex', 0, 4) === BoxTypes.ftyp;\n    },\n    calculate(buffer) {\n        const signatureLength = buffer.readUInt32BE(0);\n        const ftypBoxLength = buffer.readUInt16BE(signatureLength + 2);\n        let offset = signatureLength + 4 + ftypBoxLength;\n        const nextBoxType = buffer.toString('hex', offset, offset + 4);\n        switch (nextBoxType) {\n            case BoxTypes.rreq:\n                // WHAT ARE THESE 4 BYTES?????\n                // eslint-disable-next-line no-case-declarations\n                const MAGIC = 4;\n                offset = offset + 4 + MAGIC + calculateRREQLength(buffer.slice(offset + 4));\n                return parseIHDR(buffer.slice(offset + 8, offset + 24));\n            case BoxTypes.jp2h:\n                return parseIHDR(buffer.slice(offset + 8, offset + 24));\n            default:\n                throw new TypeError('Unsupported header found: ' + buffer.toString('ascii', offset, offset + 4));\n        }\n    }\n};\n","\"use strict\";\n// NOTE: we only support baseline and progressive JPGs here\n// due to the structure of the loader class, we only get a buffer\n// with a maximum size of 4096 bytes. so if the SOF marker is outside\n// if this range we can't detect the file size correctly.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JPG = void 0;\nconst readUInt_1 = require(\"../readUInt\");\nconst EXIF_MARKER = '45786966';\nconst APP1_DATA_SIZE_BYTES = 2;\nconst EXIF_HEADER_BYTES = 6;\nconst TIFF_BYTE_ALIGN_BYTES = 2;\nconst BIG_ENDIAN_BYTE_ALIGN = '4d4d';\nconst LITTLE_ENDIAN_BYTE_ALIGN = '4949';\n// Each entry is exactly 12 bytes\nconst IDF_ENTRY_BYTES = 12;\nconst NUM_DIRECTORY_ENTRIES_BYTES = 2;\nfunction isEXIF(buffer) {\n    return (buffer.toString('hex', 2, 6) === EXIF_MARKER);\n}\nfunction extractSize(buffer, index) {\n    return {\n        height: buffer.readUInt16BE(index),\n        width: buffer.readUInt16BE(index + 2)\n    };\n}\nfunction extractOrientation(exifBlock, isBigEndian) {\n    // TODO: assert that this contains 0x002A\n    // let STATIC_MOTOROLA_TIFF_HEADER_BYTES = 2\n    // let TIFF_IMAGE_FILE_DIRECTORY_BYTES = 4\n    // TODO: derive from TIFF_IMAGE_FILE_DIRECTORY_BYTES\n    const idfOffset = 8;\n    // IDF osset works from right after the header bytes\n    // (so the offset includes the tiff byte align)\n    const offset = EXIF_HEADER_BYTES + idfOffset;\n    const idfDirectoryEntries = readUInt_1.readUInt(exifBlock, 16, offset, isBigEndian);\n    for (let directoryEntryNumber = 0; directoryEntryNumber < idfDirectoryEntries; directoryEntryNumber++) {\n        const start = offset + NUM_DIRECTORY_ENTRIES_BYTES + (directoryEntryNumber * IDF_ENTRY_BYTES);\n        const end = start + IDF_ENTRY_BYTES;\n        // Skip on corrupt EXIF blocks\n        if (start > exifBlock.length) {\n            return;\n        }\n        const block = exifBlock.slice(start, end);\n        const tagNumber = readUInt_1.readUInt(block, 16, 0, isBigEndian);\n        // 0x0112 (decimal: 274) is the `orientation` tag ID\n        if (tagNumber === 274) {\n            const dataFormat = readUInt_1.readUInt(block, 16, 2, isBigEndian);\n            if (dataFormat !== 3) {\n                return;\n            }\n            // unsinged int has 2 bytes per component\n            // if there would more than 4 bytes in total it's a pointer\n            const numberOfComponents = readUInt_1.readUInt(block, 32, 4, isBigEndian);\n            if (numberOfComponents !== 1) {\n                return;\n            }\n            return readUInt_1.readUInt(block, 16, 8, isBigEndian);\n        }\n    }\n}\nfunction validateExifBlock(buffer, index) {\n    // Skip APP1 Data Size\n    const exifBlock = buffer.slice(APP1_DATA_SIZE_BYTES, index);\n    // Consider byte alignment\n    const byteAlign = exifBlock.toString('hex', EXIF_HEADER_BYTES, EXIF_HEADER_BYTES + TIFF_BYTE_ALIGN_BYTES);\n    // Ignore Empty EXIF. Validate byte alignment\n    const isBigEndian = byteAlign === BIG_ENDIAN_BYTE_ALIGN;\n    const isLittleEndian = byteAlign === LITTLE_ENDIAN_BYTE_ALIGN;\n    if (isBigEndian || isLittleEndian) {\n        return extractOrientation(exifBlock, isBigEndian);\n    }\n}\nfunction validateBuffer(buffer, index) {\n    // index should be within buffer limits\n    if (index > buffer.length) {\n        throw new TypeError('Corrupt JPG, exceeded buffer limits');\n    }\n    // Every JPEG block must begin with a 0xFF\n    if (buffer[index] !== 0xFF) {\n        throw new TypeError('Invalid JPG, marker table corrupted');\n    }\n}\nexports.JPG = {\n    validate(buffer) {\n        const SOIMarker = buffer.toString('hex', 0, 2);\n        return ('ffd8' === SOIMarker);\n    },\n    calculate(buffer) {\n        // Skip 4 chars, they are for signature\n        buffer = buffer.slice(4);\n        let orientation;\n        let next;\n        while (buffer.length) {\n            // read length of the next block\n            const i = buffer.readUInt16BE(0);\n            if (isEXIF(buffer)) {\n                orientation = validateExifBlock(buffer, i);\n            }\n            // ensure correct format\n            validateBuffer(buffer, i);\n            // 0xFFC0 is baseline standard(SOF)\n            // 0xFFC1 is baseline optimized(SOF)\n            // 0xFFC2 is progressive(SOF2)\n            next = buffer[i + 1];\n            if (next === 0xC0 || next === 0xC1 || next === 0xC2) {\n                const size = extractSize(buffer, i + 5);\n                // TODO: is orientation=0 a valid answer here?\n                if (!orientation) {\n                    return size;\n                }\n                return {\n                    height: size.height,\n                    orientation,\n                    width: size.width\n                };\n            }\n            // move to the next block\n            buffer = buffer.slice(i + 2);\n        }\n        throw new TypeError('Invalid JPG, no size found');\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KTX = void 0;\nconst SIGNATURE = 'KTX 11';\nexports.KTX = {\n    validate(buffer) {\n        return SIGNATURE === buffer.toString('ascii', 1, 7);\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32LE(40),\n            width: buffer.readUInt32LE(36),\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PNG = void 0;\nconst pngSignature = 'PNG\\r\\n\\x1a\\n';\nconst pngImageHeaderChunkName = 'IHDR';\n// Used to detect \"fried\" png's: http://www.jongware.com/pngdefry.html\nconst pngFriedChunkName = 'CgBI';\nexports.PNG = {\n    validate(buffer) {\n        if (pngSignature === buffer.toString('ascii', 1, 8)) {\n            let chunkName = buffer.toString('ascii', 12, 16);\n            if (chunkName === pngFriedChunkName) {\n                chunkName = buffer.toString('ascii', 28, 32);\n            }\n            if (chunkName !== pngImageHeaderChunkName) {\n                throw new TypeError('Invalid PNG');\n            }\n            return true;\n        }\n        return false;\n    },\n    calculate(buffer) {\n        if (buffer.toString('ascii', 12, 16) === pngFriedChunkName) {\n            return {\n                height: buffer.readUInt32BE(36),\n                width: buffer.readUInt32BE(32)\n            };\n        }\n        return {\n            height: buffer.readUInt32BE(20),\n            width: buffer.readUInt32BE(16)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PNM = void 0;\nconst PNMTypes = {\n    P1: 'pbm/ascii',\n    P2: 'pgm/ascii',\n    P3: 'ppm/ascii',\n    P4: 'pbm',\n    P5: 'pgm',\n    P6: 'ppm',\n    P7: 'pam',\n    PF: 'pfm'\n};\nconst Signatures = Object.keys(PNMTypes);\nconst handlers = {\n    default: (lines) => {\n        let dimensions = [];\n        while (lines.length > 0) {\n            const line = lines.shift();\n            if (line[0] === '#') {\n                continue;\n            }\n            dimensions = line.split(' ');\n            break;\n        }\n        if (dimensions.length === 2) {\n            return {\n                height: parseInt(dimensions[1], 10),\n                width: parseInt(dimensions[0], 10),\n            };\n        }\n        else {\n            throw new TypeError('Invalid PNM');\n        }\n    },\n    pam: (lines) => {\n        const size = {};\n        while (lines.length > 0) {\n            const line = lines.shift();\n            if (line.length > 16 || line.charCodeAt(0) > 128) {\n                continue;\n            }\n            const [key, value] = line.split(' ');\n            if (key && value) {\n                size[key.toLowerCase()] = parseInt(value, 10);\n            }\n            if (size.height && size.width) {\n                break;\n            }\n        }\n        if (size.height && size.width) {\n            return {\n                height: size.height,\n                width: size.width\n            };\n        }\n        else {\n            throw new TypeError('Invalid PAM');\n        }\n    }\n};\nexports.PNM = {\n    validate(buffer) {\n        const signature = buffer.toString('ascii', 0, 2);\n        return Signatures.includes(signature);\n    },\n    calculate(buffer) {\n        const signature = buffer.toString('ascii', 0, 2);\n        const type = PNMTypes[signature];\n        // TODO: this probably generates garbage. move to a stream based parser\n        const lines = buffer.toString('ascii', 3).split(/[\\r\\n]+/);\n        const handler = handlers[type] || handlers.default;\n        return handler(lines);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PSD = void 0;\nexports.PSD = {\n    validate(buffer) {\n        return ('8BPS' === buffer.toString('ascii', 0, 4));\n    },\n    calculate(buffer) {\n        return {\n            height: buffer.readUInt32BE(14),\n            width: buffer.readUInt32BE(18)\n        };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SVG = void 0;\nconst svgReg = /<svg\\s([^>\"']|\"[^\"]*\"|'[^']*')*>/;\nconst extractorRegExps = {\n    height: /\\sheight=(['\"])([^%]+?)\\1/,\n    root: svgReg,\n    viewbox: /\\sviewBox=(['\"])(.+?)\\1/,\n    width: /\\swidth=(['\"])([^%]+?)\\1/,\n};\nconst INCH_CM = 2.54;\nconst units = {\n    cm: 96 / INCH_CM,\n    em: 16,\n    ex: 8,\n    m: 96 / INCH_CM * 100,\n    mm: 96 / INCH_CM / 10,\n    pc: 96 / 72 / 12,\n    pt: 96 / 72,\n};\nfunction parseLength(len) {\n    const m = /([0-9.]+)([a-z]*)/.exec(len);\n    if (!m) {\n        return undefined;\n    }\n    return Math.round(parseFloat(m[1]) * (units[m[2]] || 1));\n}\nfunction parseViewbox(viewbox) {\n    const bounds = viewbox.split(' ');\n    return {\n        height: parseLength(bounds[3]),\n        width: parseLength(bounds[2])\n    };\n}\nfunction parseAttributes(root) {\n    const width = root.match(extractorRegExps.width);\n    const height = root.match(extractorRegExps.height);\n    const viewbox = root.match(extractorRegExps.viewbox);\n    return {\n        height: height && parseLength(height[2]),\n        viewbox: viewbox && parseViewbox(viewbox[2]),\n        width: width && parseLength(width[2]),\n    };\n}\nfunction calculateByDimensions(attrs) {\n    return {\n        height: attrs.height,\n        width: attrs.width,\n    };\n}\nfunction calculateByViewbox(attrs, viewbox) {\n    const ratio = viewbox.width / viewbox.height;\n    if (attrs.width) {\n        return {\n            height: Math.floor(attrs.width / ratio),\n            width: attrs.width,\n        };\n    }\n    if (attrs.height) {\n        return {\n            height: attrs.height,\n            width: Math.floor(attrs.height * ratio),\n        };\n    }\n    return {\n        height: viewbox.height,\n        width: viewbox.width,\n    };\n}\nexports.SVG = {\n    validate(buffer) {\n        const str = String(buffer);\n        return svgReg.test(str);\n    },\n    calculate(buffer) {\n        const root = buffer.toString('utf8').match(extractorRegExps.root);\n        if (root) {\n            const attrs = parseAttributes(root[0]);\n            if (attrs.width && attrs.height) {\n                return calculateByDimensions(attrs);\n            }\n            if (attrs.viewbox) {\n                return calculateByViewbox(attrs, attrs.viewbox);\n            }\n        }\n        throw new TypeError('Invalid SVG');\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TIFF = void 0;\n// based on http://www.compix.com/fileformattif.htm\n// TO-DO: support big-endian as well\nconst fs = require(\"fs\");\nconst readUInt_1 = require(\"../readUInt\");\n// Read IFD (image-file-directory) into a buffer\nfunction readIFD(buffer, filepath, isBigEndian) {\n    const ifdOffset = readUInt_1.readUInt(buffer, 32, 4, isBigEndian);\n    // read only till the end of the file\n    let bufferSize = 1024;\n    const fileSize = fs.statSync(filepath).size;\n    if (ifdOffset + bufferSize > fileSize) {\n        bufferSize = fileSize - ifdOffset - 10;\n    }\n    // populate the buffer\n    const endBuffer = Buffer.alloc(bufferSize);\n    const descriptor = fs.openSync(filepath, 'r');\n    fs.readSync(descriptor, endBuffer, 0, bufferSize, ifdOffset);\n    fs.closeSync(descriptor);\n    return endBuffer.slice(2);\n}\n// TIFF values seem to be messed up on Big-Endian, this helps\nfunction readValue(buffer, isBigEndian) {\n    const low = readUInt_1.readUInt(buffer, 16, 8, isBigEndian);\n    const high = readUInt_1.readUInt(buffer, 16, 10, isBigEndian);\n    return (high << 16) + low;\n}\n// move to the next tag\nfunction nextTag(buffer) {\n    if (buffer.length > 24) {\n        return buffer.slice(12);\n    }\n}\n// Extract IFD tags from TIFF metadata\nfunction extractTags(buffer, isBigEndian) {\n    const tags = {};\n    let temp = buffer;\n    while (temp && temp.length) {\n        const code = readUInt_1.readUInt(temp, 16, 0, isBigEndian);\n        const type = readUInt_1.readUInt(temp, 16, 2, isBigEndian);\n        const length = readUInt_1.readUInt(temp, 32, 4, isBigEndian);\n        // 0 means end of IFD\n        if (code === 0) {\n            break;\n        }\n        else {\n            // 256 is width, 257 is height\n            // if (code === 256 || code === 257) {\n            if (length === 1 && (type === 3 || type === 4)) {\n                tags[code] = readValue(temp, isBigEndian);\n            }\n            // move to the next tag\n            temp = nextTag(temp);\n        }\n    }\n    return tags;\n}\n// Test if the TIFF is Big Endian or Little Endian\nfunction determineEndianness(buffer) {\n    const signature = buffer.toString('ascii', 0, 2);\n    if ('II' === signature) {\n        return 'LE';\n    }\n    else if ('MM' === signature) {\n        return 'BE';\n    }\n}\nconst signatures = [\n    // '492049', // currently not supported\n    '49492a00',\n    '4d4d002a',\n];\nexports.TIFF = {\n    validate(buffer) {\n        return signatures.includes(buffer.toString('hex', 0, 4));\n    },\n    calculate(buffer, filepath) {\n        if (!filepath) {\n            throw new TypeError('Tiff doesn\\'t support buffer');\n        }\n        // Determine BE/LE\n        const isBigEndian = determineEndianness(buffer) === 'BE';\n        // read the IFD\n        const ifdBuffer = readIFD(buffer, filepath, isBigEndian);\n        // extract the tags from the IFD\n        const tags = extractTags(ifdBuffer, isBigEndian);\n        const width = tags[256];\n        const height = tags[257];\n        if (!width || !height) {\n            throw new TypeError('Invalid Tiff. Missing tags');\n        }\n        return { height, width };\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WEBP = void 0;\nfunction calculateExtended(buffer) {\n    return {\n        height: 1 + buffer.readUIntLE(7, 3),\n        width: 1 + buffer.readUIntLE(4, 3)\n    };\n}\nfunction calculateLossless(buffer) {\n    return {\n        height: 1 + (((buffer[4] & 0xF) << 10) | (buffer[3] << 2) | ((buffer[2] & 0xC0) >> 6)),\n        width: 1 + (((buffer[2] & 0x3F) << 8) | buffer[1])\n    };\n}\nfunction calculateLossy(buffer) {\n    // `& 0x3fff` returns the last 14 bits\n    // TO-DO: include webp scaling in the calculations\n    return {\n        height: buffer.readInt16LE(8) & 0x3fff,\n        width: buffer.readInt16LE(6) & 0x3fff\n    };\n}\nexports.WEBP = {\n    validate(buffer) {\n        const riffHeader = 'RIFF' === buffer.toString('ascii', 0, 4);\n        const webpHeader = 'WEBP' === buffer.toString('ascii', 8, 12);\n        const vp8Header = 'VP8' === buffer.toString('ascii', 12, 15);\n        return (riffHeader && webpHeader && vp8Header);\n    },\n    calculate(buffer) {\n        const chunkHeader = buffer.toString('ascii', 12, 16);\n        buffer = buffer.slice(20, 30);\n        // Extended webp stream signature\n        if (chunkHeader === 'VP8X') {\n            const extendedHeader = buffer[0];\n            const validStart = (extendedHeader & 0xc0) === 0;\n            const validEnd = (extendedHeader & 0x01) === 0;\n            if (validStart && validEnd) {\n                return calculateExtended(buffer);\n            }\n            else {\n                // TODO: breaking change\n                throw new TypeError('Invalid WebP');\n            }\n        }\n        // Lossless webp stream signature\n        if (chunkHeader === 'VP8 ' && buffer[0] !== 0x2f) {\n            return calculateLossy(buffer);\n        }\n        // Lossy webp stream signature\n        const signature = buffer.toString('hex', 3, 6);\n        if (chunkHeader === 'VP8L' && signature !== '9d012a') {\n            return calculateLossless(buffer);\n        }\n        throw new TypeError('Invalid WebP');\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detector = void 0;\nconst types_1 = require(\"./types\");\nconst keys = Object.keys(types_1.typeHandlers);\n// This map helps avoid validating for every single image type\nconst firstBytes = {\n    0x38: 'psd',\n    0x42: 'bmp',\n    0x44: 'dds',\n    0x47: 'gif',\n    0x49: 'tiff',\n    0x4d: 'tiff',\n    0x52: 'webp',\n    0x69: 'icns',\n    0x89: 'png',\n    0xff: 'jpg'\n};\nfunction detector(buffer) {\n    const byte = buffer[0];\n    if (byte in firstBytes) {\n        const type = firstBytes[byte];\n        if (types_1.typeHandlers[type].validate(buffer)) {\n            return type;\n        }\n    }\n    const finder = (key) => types_1.typeHandlers[key].validate(buffer);\n    return keys.find(finder);\n}\nexports.detector = detector;\n","import React, { useCallback, useState } from \"react\";\nimport Location from \"../../../../data/world/Location\";\nimport styled from \"styled-components\";\n\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../../../form_elements/TextButton\";\nimport Map from \"../../../general_elements/map/Map\";\nimport P2PSender from \"../../../p2p/P2PSender\";\n\nimport \"leaflet/dist/leaflet.css\";\n\ninterface $Props {\n  location: Location;\n}\n\nconst LocationView = ({ location }: $Props) => {\n  const [send, setSend] = useState<boolean>(false);\n\n  const getPicture = useCallback(() => {\n    if (location !== undefined) {\n      if (location.map === \"\" || location.map === null) {\n        return \"\";\n      }\n      return location.map;\n    }\n    return \"\";\n  }, [location]);\n\n  return (\n    <CenterWrapper>\n      <View>\n        {getPicture() !== \"\" ? (\n          <ImageName>\n            <Image pic={getPicture()}></Image>\n            <b>{location.name}</b>\n          </ImageName>\n        ) : (\n          <Name>\n            <b>{location.name}</b>\n          </Name>\n        )}\n      </View>\n\n      <Map editable={false} location={location} />\n      <View>\n        <PropWrapper>\n          {!send && (\n            <TextButton\n              text={`Send ${location.name}`}\n              icon={faPaperPlane}\n              onClick={() => setSend(true)}\n            />\n          )}\n          {!!send && <P2PSender data={location} mode={\"THIS\"} />}\n        </PropWrapper>\n      </View>\n    </CenterWrapper>\n  );\n};\n\nexport default LocationView;\n\nconst CenterWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n`;\n\nconst View = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  max-width: 800px;\n  padding: 5px;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nconst Name = styled.div`\n  height: auto;\n  float: left;\n  padding: 10px;\n  margin: 5px 5px 10px 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 5px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n`;\n\nconst ImageName = styled.div`\n  height: 30px;\n  float: left;\n  padding: 10px;\n  margin: 5px 5px 10px 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 50px 5px 5px 50px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n`;\n\nconst PropWrapper = styled.div`\n  height: auto;\n  width: calc(100% - 6px);\n  float: left;\n  padding: 3px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`;\n\ninterface $ImageProps {\n  pic: string;\n}\n\nconst Image = ({ pic }: $ImageProps) => {\n  const style = {\n    backgroundImage: `url(${pic})`,\n    backgroundPosition: \"center\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n  };\n\n  if (pic !== \"\") {\n    return <ImageElm style={style}></ImageElm>;\n  } else {\n    return <Empty />;\n  }\n};\n\nconst ImageElm = styled.div`\n  margin: -10px 5px -10px -10px;\n  height: 47px;\n  width: 47px;\n  float: left;\n  border-radius: 100px;\n  border: 3px solid ${({ theme }) => theme.main.highlight};\n  background-color: white;\n  overflow: hidden;\n`;\nconst Empty = styled.div``;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\n\nimport {\n  faArrowLeft,\n  faSave,\n  faTrash,\n  faExclamationTriangle,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport LocationView from \"./LocationView\";\nimport LocationEditView from \"./LocationEditView\";\nimport BackButton from \"../../../form_elements/BackButton\";\nimport Location from \"../../../../data/world/Location\";\nimport IconButton from \"../../../form_elements/IconButton\";\nimport { remove, updateWithCallback } from \"../../../../services/DatabaseService\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Dialog from \"../../../general_elements/Dialog\";\nimport { EditToggle, ToggleLeft, ToggleRight } from \"../../../general_elements/ToggleStyle\";\n\ninterface $Props {\n  location: Location;\n  isNew: boolean;\n}\n\nconst LocationDetail = ({ location, isNew }: $Props) => {\n  const [editMode, setMode] = useState<boolean>(isNew);\n  const [locationObj, editLocation] = useState<Location>(location);\n  const [showAlert, setAlert] = useState<boolean>(false);\n  const [showDeleteDialog, setDeleteDialog] = useState<boolean>(false);\n  const [message, setMessage] = useState<string>(\"\");\n  const [unsavedChanges, setUnsavedChanges] = useState<boolean>(false);\n  let history = useHistory();\n\n  const deleteLocation = () => {\n    setDeleteDialog(true);\n  };\n\n  useEffect(() => {\n    if (locationObj !== location) {\n      setUnsavedChanges(true);\n    }\n  }, [locationObj, location]);\n\n  const updateLocation = useCallback((tableName: string, locationObj: Location) => {\n    updateWithCallback(tableName, locationObj, (result) => {\n      if (result > 0) {\n        setUnsavedChanges(false);\n        setMessage(\"Saved successful!\");\n        setAlert(true);\n      } else {\n        setMessage(\"Something went wrong!\");\n        setAlert(true);\n      }\n      setTimeout(() => {\n        setAlert(false);\n      }, 3000);\n    });\n  },[]);\n\n  return (\n    <>\n      {showDeleteDialog && (\n        <Dialog\n          message={`Delete ${location.name}?`}\n          icon={faExclamationTriangle}\n          confirmeText={\"Delete\"}\n          confirmeClick={() => {\n            remove(\"locations\", location.id);\n            history.goBack();\n          }}\n          abortText={\"Back\"}\n          abortClick={() => {\n            setDeleteDialog(false);\n          }}\n        />\n      )}\n      <TopBar>\n        <BackButton icon={faArrowLeft} action={() => history.goBack()} />\n        <EditToggle mode={editMode.toString()}>\n          <ToggleLeft onClick={() => setMode(false)}>View</ToggleLeft>\n          <ToggleRight onClick={() => setMode(true)}>Edit</ToggleRight>\n        </EditToggle>\n        {unsavedChanges && <Icon icon={faExclamationTriangle} title={\"Unsaved changes!\"} />}\n        {editMode && (\n          <>\n            <IconButton onClick={() => updateLocation(\"locations\", locationObj)} icon={faSave} />\n            <IconButton onClick={() => deleteLocation()} icon={faTrash} />\n            {message && showAlert && <Message>{message}</Message>}\n          </>\n        )}\n      </TopBar>\n      {editMode ? (\n        <LocationEditView location={locationObj} onEdit={(value) => editLocation(value)} />\n      ) : (\n        <LocationView location={locationObj} />\n      )}\n    </>\n  );\n};\n\nexport default LocationDetail;\n\nconst TopBar = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  overflow: hidden;\n  flex: 1 1;\n  min-width: calc(100% - 20px);\n  height: 45px;\n  padding: 10px;\n`;\n\nconst Message = styled.div`\n  padding: 5px;\n  width: 150px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 5px;\n  float: right;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  float: right;\n  line-height: 30px;\n  display: block;\n  height: 30px;\n  padding: 10px;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n","import { MyAppDatabase } from \"../database/MyDatabase\";\nimport { IndexableType } from \"dexie\";\nimport IEntity from \"../data/IEntity\";\nimport Filter from \"../data/Filter\";\n\nexport const update = (tableName: string, data: IEntity) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).update(data.id, data);\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const updateWithCallback = (\n  tableName: string,\n  data: IEntity,\n  callback: (data: number) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .update(data.id, data)\n        .then((result: number) => {\n          callback(result);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const save = (tableName: string, data: IEntity) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).add(data);\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const saveNew = (tableName: string, entity: IEntity, filename: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(async function () {\n      delete entity[\"id\"];\n      const prom = await db.table(tableName).put({ ...entity, filename: filename });\n      return prom;\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const saveNewFromList = (\n  tableName: string,\n  entities: IEntity[],\n  filename: string,\n  callback: () => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      const refinedEntities = (entities as IEntity[]).map((entity: IEntity) => {\n        delete entity[\"id\"];\n        return { ...entity, filename: filename };\n      });\n      db.table(tableName)\n        .bulkPut(refinedEntities)\n        .then(() => {\n          callback();\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const saveWithCallback = (\n  tableName: string,\n  data: IEntity,\n  callback: (data: number) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .add(data)\n        .then((result: number) => {\n          callback(result);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const remove = (tableName: string, id: number | undefined) => {\n  const db = new MyAppDatabase();\n  if (id !== undefined) {\n    db.open()\n      .then(function () {\n        db.table(tableName).delete(id);\n      })\n      .finally(function () {\n        db.close();\n      });\n  }\n};\n\nexport const reciveAll = (tableName: string, callback: (data: IndexableType[]) => void) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .toArray()\n        .then((array) => {\n          callback(array);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveCount = (tableName: string, callback: (value: number) => void) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).count((count) => {\n        callback(count);\n      });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveCountPromise = (tableName: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(function () {\n      return db.table(tableName).count();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveByAttribute = (\n  tableName: string,\n  name: string,\n  value: string,\n  callback: (data: IEntity) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .where(name)\n        .equalsIgnoreCase(value)\n        .toArray()\n        .then((array) => {\n          callback(array[0]);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const recivePromiseByAttribute = (tableName: string, name: string, value: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(async function () {\n      const array = await db.table(tableName).where(name).equalsIgnoreCase(value).toArray();\n      return array[0];\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const recivePromiseByAttributeCount = (\n  tableName: string,\n  name: string,\n  value: string | number\n) => {\n  const db = new MyAppDatabase();\n  if (typeof value === \"string\") {\n    return db\n      .open()\n      .then(async function () {\n        return await db.table(tableName).where(name).equalsIgnoreCase(value).count();\n      })\n      .finally(function () {\n        db.close();\n      });\n  } else if (typeof value === \"number\") {\n    return db\n      .open()\n      .then(async function () {\n        return await db.table(tableName).where(name).equals(value).count();\n      })\n      .finally(function () {\n        db.close();\n      });\n  } else {\n    return db\n      .open()\n      .then(async function () {\n        return await db\n          .table(tableName)\n          .where(name)\n          .equalsIgnoreCase(\"\" + value)\n          .count();\n      })\n      .finally(function () {\n        db.close();\n      });\n  }\n};\n\nexport const reciveAllPromise = (tableName: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(async function () {\n      return await db.table(tableName).toArray();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const applyFilters = (obj: any, filters: Filter[]) => {\n  let test: boolean[] = [];\n  filters.forEach((filter) => {\n    if (typeof filter.value === \"string\") {\n      if (obj[filter.fieldName] instanceof Array) {\n        let hasTag = false;\n        obj[filter.fieldName].forEach((fieldPart: string) => {\n          // @ts-ignore\n          if (fieldPart.toLowerCase().includes(filter.value.toLowerCase())) {\n            hasTag = true;\n          }\n        });\n        if (hasTag) {\n          test.push(true);\n        } else {\n          test.push(false);\n        }\n      } else {\n        test.push(\n          // @ts-ignore\n          obj[filter.fieldName].toLowerCase().includes(filter.value.toLowerCase())\n        );\n      }\n    } else if (typeof filter.value === \"number\") {\n      // @ts-ignore\n      test.push(obj[filter.fieldName] === filter.value);\n    } else if (typeof filter.value === \"boolean\") {\n      // @ts-ignore\n      test.push(obj[filter.fieldName] === filter.value);\n    } else if (filter.value instanceof Array) {\n      let arrayTest: boolean = false;\n      filter.value.forEach((filterPart: string | boolean | number) => {\n        if (typeof filterPart === \"string\") {\n          if (\n            // @ts-ignore\n            obj[filter.fieldName].toLowerCase().includes(filterPart.toLowerCase())\n          )\n            arrayTest = true;\n        } else if (typeof filterPart === \"number\") {\n          // @ts-ignore\n          if (obj[filter.fieldName] === filterPart) arrayTest = true;\n        } else if (typeof filterPart === \"boolean\") {\n          // @ts-ignore\n          if (obj[filter.fieldName] === filterPart) arrayTest = true;\n        }\n      });\n      test.push(arrayTest);\n    }\n  });\n\n  let result = true;\n  test.forEach((val) => {\n    if (!val) result = false;\n  });\n  return result;\n};\n\nexport const reciveAllFiltered = (\n  tableName: string,\n  filters: Filter[],\n  callback: (data: IndexableType[]) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      let sortedFiled: string = \"name\";\n      let reverse: boolean = false;\n\n      filters.forEach((filter: Filter) => {\n        if (filter.sort !== 0) {\n          sortedFiled = filter.fieldName;\n          if (filter.sort === 2) reverse = true;\n        }\n      });\n\n      if (reverse) {\n        db.table(tableName)\n          .filter((obj) => applyFilters(obj, filters))\n          .reverse()\n          .sortBy(sortedFiled)\n          .then((data) => {\n            callback(data);\n          });\n      } else {\n        db.table(tableName)\n          .filter((obj) => applyFilters(obj, filters))\n          .sortBy(sortedFiled)\n          .then((data) => {\n            callback(data);\n          });\n      }\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveAttributeSelection = (\n  tableName: string,\n  attribute: string,\n  callback: (data: IndexableType[]) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .orderBy(attribute)\n        .uniqueKeys(function (array) {\n          callback(array);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const reciveAttributeSelectionPromise = (tableName: string, attribute: string) => {\n  const db = new MyAppDatabase();\n  return db\n    .open()\n    .then(function () {\n      return db.table(tableName).orderBy(attribute).uniqueKeys();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const createNewWithId = (\n  tableName: string,\n  entity: IEntity,\n  callback: (id: number) => void\n) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName)\n        .put(entity)\n        .then((id: number) => {\n          callback(id);\n        });\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const deleteAll = (tableName: string) => {\n  const db = new MyAppDatabase();\n  db.open()\n    .then(function () {\n      db.table(tableName).clear();\n    })\n    .finally(function () {\n      db.close();\n    });\n};\n\nexport const exportFilteredFromTable = (tableName: string, filters: Filter[], filename: string) => {\n  reciveAllFiltered(tableName, filters, (all: IndexableType[]) => {\n    let contentType = \"application/json;charset=utf-8;\";\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n      var blob = new Blob([decodeURIComponent(encodeURI(JSON.stringify(all)))], {\n        type: contentType,\n      });\n      navigator.msSaveOrOpenBlob(blob, filename);\n    } else {\n      var a = document.createElement(\"a\");\n      a.download = filename;\n      a.href = \"data:\" + contentType + \",\" + encodeURIComponent(JSON.stringify(all));\n      a.target = \"_blank\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    }\n  });\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  icon: IconDefinition;\n  floatLeft?: boolean;\n  disabled?: boolean;\n  transform?: string | Transform;\n  onClick: (() => void) | ((e: any) => void);\n}\n\nconst IconButton = ({ icon, floatLeft, disabled, transform, onClick }: $Props) => {\n  return (\n    <>\n      {!disabled && (\n        <SimpleButton left={floatLeft} onClick={onClick}>\n          <Icon icon={icon} transform={transform} />\n        </SimpleButton>\n      )}\n      {disabled && (\n        <DisabledSimpleButton>\n          <Icon icon={icon} transform={transform} />\n        </DisabledSimpleButton>\n      )}\n    </>\n  );\n};\n\nexport default IconButton;\n\ntype FloatMpde = {\n  left?: boolean;\n};\n\nconst SimpleButton = styled.div<FloatMpde>`\n  color: ${({ theme }) => theme.buttons.color};\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  cursor: pointer;\n\n  font-size: 16px;\n  overflow: hidden;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: ${({ left }) => (left ? \"left\" : \"right\")};\n  padding: 10px;\n  margin: 5px;\n  border-radius: 10px;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n\n  transition: color 0.2s;\n\n  &:hover {\n    color: white;\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst DisabledSimpleButton = styled(SimpleButton)`\n  color: ${({ theme }) => theme.buttons.backgroundColor};\n  background-color: ${({ theme }) => theme.buttons.color};\n  cursor: not-allowed;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  text: string;\n  disabled?: boolean;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onClick: () => void;\n}\n\nconst TextButton = ({ text, icon, transform, disabled, onClick }: $Props) => {\n  return (\n    <SimpleButton onClick={onClick} disabled={disabled}>\n      {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {text}\n    </SimpleButton>\n  );\n};\n\nexport default TextButton;\n\nconst SimpleButton = styled.button`\n  color: ${({ theme }) => theme.buttons.color};\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: right;\n  padding: 10px;\n  margin: 5px;\n  border-radius: 10px;\n  cursor: pointer;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n  box-sizing: content-box;\n  border: none;\n\n  transition: color 0.2s;\n\n  &:hover {\n    color: ${({ theme }) => theme.buttons.hoverColor};\n  }\n\n  &:disabled {\n    background-color: ${({ theme }) => theme.buttons.disabled};\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n  margin-right: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  value: string;\n  label: string;\n  placeholder?: string;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: string) => void;\n}\n\nconst StringField = ({ value, label, placeholder, icon, transform, onChange }: $Props) => (\n  <Field>\n    <LabelText>\n      {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n    </LabelText>\n    <Input\n      type=\"text\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      placeholder={placeholder}\n    ></Input>\n  </Field>\n);\n\nexport default StringField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1 auto;\n`;\n\nconst Input = styled.input`\n  flex: 3 1 auto;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n  width: 0;\n  min-width: 100px;\n`;\n","import React, { useEffect, useState } from \"react\";\nimport { BiError, BiHistory, BiSelectMultiple } from \"react-icons/bi\";\nimport {\n  GiCrystalWand,\n  GiBackpack,\n  GiWomanElfFace,\n  GiPlagueDoctorProfile,\n  GiSwordClash,\n  GiBookmarklet,\n  GiScrollUnfurled,\n  GiSolarSystem,\n  GiDjinn,\n  GiBookshelf,\n} from \"react-icons/gi\";\nimport {\n  faMeteor,\n  faIdCard,\n  faDragon,\n  faMapMarkedAlt,\n  faTable,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { MdEvent } from \"react-icons/md\";\nimport { HiUserGroup } from \"react-icons/hi\";\nimport { recivePromiseByAttributeCount } from \"../../services/DatabaseService\";\n\ninterface $Props {\n  type: string;\n  name: string;\n}\n\nconst LinkCheck = ({ type, name }: $Props) => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [entitiyFound, setEntity] = useState<boolean>(false);\n\n  useEffect(() => {\n    recivePromiseByAttributeCount(type + \"s\", \"name\", name).then((count: number) => {\n      setEntity(count > 0);\n      setLoading(false);\n    });\n  }, [type, name]);\n\n  const formatIcon = (type: string) => {\n    switch (type) {\n      case \"spell\":\n        return <FontAwesomeIcon icon={faMeteor} />;\n      case \"item\":\n        return <GiCrystalWand />;\n      case \"gear\":\n        return <GiBackpack />;\n      case \"race\":\n        return <GiWomanElfFace />;\n      case \"class\":\n        return <GiPlagueDoctorProfile />;\n      case \"selection\":\n        return <BiSelectMultiple />;\n      case \"char\":\n        return <FontAwesomeIcon icon={faIdCard} />;\n      case \"monster\":\n        return <FontAwesomeIcon icon={faDragon} />;\n      case \"encounter\":\n        return <GiSwordClash />;\n      case \"campaign\":\n        return <GiBookmarklet />;\n      case \"quest\":\n        return <GiScrollUnfurled />;\n      case \"event\":\n        return <MdEvent />;\n      case \"world\":\n        return <GiSolarSystem />;\n      case \"location\":\n        return <FontAwesomeIcon icon={faMapMarkedAlt} />;\n      case \"npc\":\n        return <GiDjinn />;\n      case \"randomTable\":\n        return <FontAwesomeIcon icon={faTable} />;\n      case \"book\":\n        return <GiBookshelf />;\n        case \"group\":\n          return <HiUserGroup />;\n      default:\n        return \"\";\n    }\n  };\n\n  return (\n    <>\n      {loading && <BiHistory />}\n      {!loading && !entitiyFound && <BiError />}\n      {!loading && entitiyFound && <>{formatIcon(type)}</>}\n    </>\n  );\n};\n\nexport default LinkCheck;\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\nimport LinkCheck from \"./LinkCheck\";\n\ninterface $Props {\n  text: string;\n}\n\nconst FormatedText = ({ text }: $Props) => {\n  const [formatedText, setFormatedText] = useState<JSX.Element>();\n  let history = useHistory();\n\n  const cut = (str: string, cutStart: number, cutEnd: number) => {\n    return str.substr(0, cutStart) + str.substr(cutEnd + 1);\n  };\n\n  const formatLink = useCallback(\n    (text: string) => {\n      if (text !== undefined) {\n        if (text.includes(\"[[\") && text.includes(\"]]\")) {\n          const parts = text.split(\"[[\");\n          let formattedParts: any[] = [];\n          parts.forEach((part: string, index: number) => {\n            if (part.includes(\"]]\")) {\n              const codePart: string[] = part.split(\"]]\");\n              const linkParts: string[] = codePart[0].split(\".\");\n              const link: string = \"/\" + linkParts[0] + \"-detail/name/\" + linkParts[1];\n              formattedParts.push(\n                <TextPart key={index}>\n                  <Link onClick={() => history.push(link)}>\n                    <LinkCheck type={linkParts[0]} name={linkParts[1]} /> {linkParts[1]}\n                  </Link>\n                  <TextPart>{codePart[1]}</TextPart>\n                </TextPart>\n              );\n            } else {\n              if (part !== \"\") formattedParts.push(<TextPart key={index}>{part}</TextPart>);\n            }\n          });\n          return <>{formattedParts}</>;\n        } else {\n          return <TextPart>{text}</TextPart>;\n        }\n      }\n    },\n    [history]\n  );\n\n  const formatTable = useCallback(\n    (textPart: string) => {\n      if (textPart.includes(\"||table||\")) {\n        const table: string[] = text.split(\"||table||\");\n        const tableRows: string[] = table[1].split(\"||\");\n        let isHead = true;\n        return (\n          <>\n            {formatLink(table[0])}\n            <table>\n              <tbody>\n                {tableRows.map((row: string, index: number) => {\n                  if (row.includes(\"|\")) {\n                    if (isHead) {\n                      isHead = false;\n                      const cells = row.split(\"|\");\n                      return (\n                        <tr key={index}>\n                          {cells.map((cell: string, index: number) => {\n                            return <TableHeadProp key={index}>{cell}</TableHeadProp>;\n                          })}\n                        </tr>\n                      );\n                    } else {\n                      const cells = row.split(\"|\");\n                      return (\n                        <tr key={index}>\n                          {cells.map((cell: string, index: number) => {\n                            return <TableProp key={index}>{formatLink(cell)}</TableProp>;\n                          })}\n                        </tr>\n                      );\n                    }\n                  } else {\n                    return <></>;\n                  }\n                })}\n              </tbody>\n            </table>\n            {formatLink(table[2])}\n          </>\n        );\n      } else {\n        return formatLink(textPart);\n      }\n    },\n    [text, formatLink]\n  );\n\n  const formatText = useCallback(\n    (textPart: string) => {\n      while (textPart.includes(\"{{\")) {\n        const cutStart = textPart.indexOf(\"{{\");\n        const cutEnd = textPart.indexOf(\"}}\") + 1;\n        textPart = cut(textPart, cutStart, cutEnd);\n      }\n      return formatTable(textPart);\n    },\n    [formatTable]\n  );\n\n  useEffect(() => {\n    if (text !== undefined) {\n      let formatedText = formatText(text);\n      setFormatedText(formatedText);\n    }\n  }, [text, history, formatText]);\n\n  return <>{formatedText}</>;\n};\n\nexport default FormatedText;\n\nconst Link = styled.span`\n  display: inline-block;\n  background-color: ${({ theme }) => theme.tile.backgroundColorLink};\n  border-radius: 5px;\n  text-decoration: none;\n  color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 14px;\n  padding: 0px 5px 0px 5px;\n  cursor: pointer;\n  white-space: pre;\n`;\n\nconst TextPart = styled.span`\n  white-space: pre-line;\n`;\n\nconst TableHeadProp = styled.th`\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  border-radius: 5px;\n  padding: 2px 5px 2px 5px;\n`;\n\nconst TableProp = styled.td`\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  border-radius: 5px;\n  padding: 5px;\n  text-align: center;\n`;\n","import Dexie from \"dexie\";\nimport { useReducer, useEffect, useCallback, useState } from \"react\";\nimport Filter from \"../data/Filter\";\nimport ReactDOM from \"react-dom\";\n\ntype TableState<T> = [T[] | undefined, boolean, Dexie.DexieError | undefined];\ntype TableAction<T> =\n  | { type: \"resolved\"; data: T[] }\n  | { type: \"empty\" }\n  | { type: \"reset\" }\n  | { type: \"error\"; error: Dexie.DexieError };\n\ntype ItemState<T> = [T | undefined, boolean, Dexie.DexieError | undefined];\ntype ItemAction<T> =\n  | { type: \"resolved\"; data: T }\n  | { type: \"empty\" }\n  | { type: \"reset\" }\n  | { type: \"error\"; error: Dexie.DexieError };\n\nexport const useTable = <T, U>(table: Dexie.Table<T, U>): TableState<T> => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: TableState<T>, action: TableAction<T>): TableState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .toArray()\n          .then((data) => {\n            dispatch({\n              type: \"resolved\",\n              data,\n            });\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, effect]);\n\n  return state;\n};\n\nexport const useTableByFilter = <T, U>(\n  table: Dexie.Table<T, U>,\n  filters: Filter[]\n): TableState<T> => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const [filter, setFilter] = useState<Filter[]>(filters);\n  const reducer = useCallback((state: TableState<T>, action: TableAction<T>): TableState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      case \"reset\":\n        return [undefined, true, undefined];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (filter !== filters) {\n      ReactDOM.unstable_batchedUpdates(() => {\n        dispatch({ type: \"reset\" });\n        setFilter(filters);\n        setEffect(true);\n      });\n    }\n  }, [filter, filters, setEffect]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () => console.time(\"filtered get all\");\n      table\n        .filter((obj: T) => {\n          let test: boolean[] = [];\n          filters.forEach((filter) => {\n            if (typeof filter.value === \"string\") {\n              test.push(\n                // @ts-ignore\n                obj[filter.fieldName].toLowerCase().includes(filter.value.toLowerCase())\n              );\n            } else if (typeof filter.value === \"number\") {\n              // @ts-ignore\n              test.push(obj[filter.fieldName] === filter.value);\n            } else if (typeof filter.value === \"boolean\") {\n              // @ts-ignore\n              test.push(obj[filter.fieldName] === filter.value);\n            } else if (filter.value instanceof Array) {\n              let arrayTest: boolean = false;\n              filter.value.forEach((filterPart: string | boolean | number) => {\n                if (typeof filterPart === \"string\") {\n                  if (\n                    // @ts-ignore\n                    obj[filter.fieldName].toLowerCase().includes(filterPart.toLowerCase())\n                  )\n                    arrayTest = true;\n                } else if (typeof filterPart === \"number\") {\n                  // @ts-ignore\n                  if (obj[filter.fieldName] === filterPart) arrayTest = true;\n                } else if (typeof filterPart === \"boolean\") {\n                  // @ts-ignore\n                  if (obj[filter.fieldName] === filterPart) arrayTest = true;\n                }\n              });\n              test.push(arrayTest);\n            }\n          });\n\n          let result = true;\n          test.forEach((val) => {\n            if (!val) result = false;\n          });\n          return result;\n        })\n        .sortBy(\"name\")\n        .then((data) => {\n          console.timeEnd(\"filtered get all\");\n          dispatch({\n            type: \"resolved\",\n            data,\n          });\n        })\n        .catch((error) => {\n          dispatch({\n            type: \"error\",\n            error,\n          });\n        });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, effect, filters]);\n\n  return state;\n};\n\nexport const useItem = <T, U>(table: Dexie.Table<T, U>, id: U) => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: ItemState<T>, action: ItemAction<T>): ItemState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"empty\":\n        return [undefined, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .get(id)\n          .then((data) => {\n            if (data !== undefined) {\n              dispatch({\n                type: \"resolved\",\n                data,\n              });\n            } else {\n              dispatch({\n                type: \"empty\",\n              });\n            }\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, id, effect]);\n\n  return state;\n};\n\nexport const useItemByAttr = <T, U>(table: Dexie.Table<T, U>, attr: string, attrValue: string) => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: ItemState<T>, action: ItemAction<T>): ItemState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"empty\":\n        return [undefined, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .where(attr)\n          .equalsIgnoreCase(attrValue)\n          .first()\n          .then((data) => {\n            if (data !== undefined) {\n              dispatch({\n                type: \"resolved\",\n                data,\n              });\n            } else {\n              dispatch({\n                type: \"empty\",\n              });\n            }\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, attr, attrValue, effect]);\n\n  return state;\n};\n","import React from \"react\";\nimport { RouteComponentProps, useHistory } from \"react-router\";\nimport Location from \"../../../../../data/world/Location\";\nimport { MyAppDatabase } from \"../../../../../database/MyDatabase\";\nimport { useItemByAttr } from \"../../../../../hooks/DexieHooks\";\nimport { LoadingSpinner } from \"../../../../Loading\";\nimport LocationDetail from \"../LocationDetail\";\nimport { createNewWithId } from \"../../../../../services/DatabaseService\";\nimport ErrorTile from \"../../../../general_elements/ErrorTile\";\n\ntype TParams = { name: string };\n\nconst NameToLocation = ({ match }: RouteComponentProps<TParams>) => {\n  let history = useHistory();\n  const db = new MyAppDatabase();\n  const [location, loading, error] = useItemByAttr(db.locations, \"name\", match.params.name);\n\n  const createNewLocation = () => {\n    let newLocation = new Location(0, match.params.name);\n    delete newLocation.id;\n    createNewWithId(\"locations\", newLocation, (id) => {\n      history.push(`/location-detail/id/${id}`);\n    });\n  };\n\n  return (\n    <>\n      {!error && loading && <LoadingSpinner />}\n      {error && !loading && <>Error occured</>}\n      {!error && !loading && location === undefined && (\n        <ErrorTile\n          text={\"No such location exists. Want to creat such location?\"}\n          buttonText={\"Add\"}\n          onButton={() => createNewLocation()}\n        />\n      )}\n      {!error && !loading && location !== undefined && (\n        <LocationDetail location={location} isNew={location.name === \"\" ? true : false} />\n      )}\n    </>\n  );\n};\n\nexport default NameToLocation;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  icon: IconDefinition;\n  transform?: string | Transform;\n  action: () => void;\n}\n\nconst BackButton = ({ icon, transform, action }: $Props) => {\n  return (\n    <Back onClick={action}>\n      <Icon icon={icon} transform={transform} />\n    </Back>\n  );\n};\n\nexport default BackButton;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n  &:hover {\n    color: ${({ theme }) => theme.buttons.color};\n  }\n`;\n\nconst Back = styled.div`\n  float: left;\n  font-size: calc(${({ theme }) => theme.buttons.height} + 10px);\n  margin: 10px 0px 0px 10px;\n  cursor: pointer;\n`;\n","import styled from \"styled-components\";\n\nexport const ToggleLeft = styled.div`\n  width: auto;\n  padding: 10px;\n  margin: 5px 0px 5px 5px;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: left;\n  cursor: pointer;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n  border-radius: 5px 0px 0px 5px;\n\n  transition: color 0.2s, background-color 0.2s;\n\n  &:hover {\n    color: ${({ theme }) => theme.buttons.hoverColor};\n  }\n`;\n\nexport const ToggleRight = styled(ToggleLeft)`\n  margin: 5px 5px 5px 0px;\n\n  border-radius: 0px 5px 5px 0px;\n`;\n\ntype EditMode = {\n  mode: string;\n};\n\nexport const EditToggle = styled.div<EditMode>`\n  width: auto;\n  height: ${({ theme }) => theme.buttons.height};\n  float: right;\n  color: ${({ theme }) => theme.buttons.color};\n\n  ${ToggleLeft} {\n    background-color: ${(props) => {\n      if (props.mode !== \"true\") {\n        return ({ theme }) => theme.buttons.backgroundColor;\n      } else {\n        return ({ theme }) => theme.tile.backgroundColor;\n      }\n    }};\n  }\n\n  ${ToggleRight} {\n    background-color: ${(props) => {\n      if (props.mode === \"true\") {\n        return ({ theme }) => theme.buttons.backgroundColor;\n      } else {\n        return ({ theme }) => theme.tile.backgroundColor;\n      }\n    }};\n  }\n`;\n","import Dexie from \"dexie\";\nimport Book from \"../data/Book\";\nimport Campaign from \"../data/campaign/Campaign\";\nimport Npc from \"../data/campaign/Npc\";\nimport Quest from \"../data/campaign/Quest\";\nimport Char from \"../data/chars/Char\";\nimport Class from \"../data/classes/Class\";\nimport Subclass from \"../data/classes/Subclass\";\nimport Encounter from \"../data/encounter/Encounter\";\nimport Gear from \"../data/Gear\";\nimport Item from \"../data/Item\";\nimport Monster from \"../data/Monster\";\nimport Race from \"../data/races/Race\";\nimport Subrace from \"../data/races/Subrace\";\nimport RandomTable from \"../data/RandomTable\";\nimport Selection from \"../data/Selection\";\nimport Spell from \"../data/Spell\";\nimport World from \"../data/world/World\";\nimport Location from \"../data/world/Location\";\nimport Event from \"../data/world/Event\";\nimport Group from \"../data/campaign/Group\";\n\nexport class MyAppDatabase extends Dexie {\n  spells: Dexie.Table<Spell, number>; // number = type of the primkey\n  items: Dexie.Table<Item, number>; // number = type of the primkey\n  gears: Dexie.Table<Gear, number>; // number = type of the primkey\n  monsters: Dexie.Table<Monster, number>; // number = type of the primkey\n  races: Dexie.Table<Race, number>; // number = type of the primkey\n  subraces: Dexie.Table<Subrace, number>; // number = type of the primkey\n  classes: Dexie.Table<Class, number>; // number = type of the primkey\n  subclasses: Dexie.Table<Subclass, number>; // number = type of the primkey\n  chars: Dexie.Table<Char, number>; // number = type of the primkey\n  encounters: Dexie.Table<Encounter, number>; // number = type of the primkey\n  books: Dexie.Table<Book, number>; // number = type of the primkey\n  selections: Dexie.Table<Selection, number>; // number = type of the primkey\n  randomTables: Dexie.Table<RandomTable, number>; // number = type of the primkey\n  campaigns: Dexie.Table<Campaign, number>; // number = type of the primkey\n  quests: Dexie.Table<Quest, number>; // number = type of the primkey\n  npcs: Dexie.Table<Npc, number>; // number = type of the primkey\n  worlds: Dexie.Table<World, number>; // number = type of the primkey\n  locations: Dexie.Table<Location, number>; // number = type of the primkey\n  events: Dexie.Table<Event, number>; // number = type of the primkey\n  groups: Dexie.Table<Group, number>; // number = type of the primkey\n\n  constructor() {\n    super(\"DnDTomeDB\");\n    this.version(1).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n    });\n    this.version(2).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n    });\n    this.version(3).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n    });\n    this.version(4).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n    });\n    this.version(5).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      chars:\n        \"++id, name, player, prof, level, pic, classes, race, background, ac, hp, currentHp, hitDice, init, speed, str, dex, con, int, wis, cha, strSave, dexSave, conSave, intSave, wisSave, chaSave, strSaveProf, dexSaveProf, conSaveProf, intSaveProf, wisSaveProf, chaSaveProf, actions, bonusActions, reactions, features, classFeatures, racialFeatures, profsLangs, senses, passivPerception, passivInsight, passivInvestigation, notesOne, notesTwo, notesThree, acrobatics, animalHandling, arcana, athletics, deception, history, insight, intimidation, investigation, medicine, nature, perception, performance, persuasion, religion, sleightOfHand, stealth, survival, acrobaticsProf, animalHandlingProf, arcanaProf, athleticsProf, deceptionProf, historyProf, insightProf, intimidationProf, investigationProf, medicineProf, natureProf, perceptionProf, performanceProf, persuasionProf, religionProf, sleightOfHandProf, stealthProf, survivalProf, spellNotes, alignment, inspiration, castingHit, castingDC\",\n    });\n    this.version(6).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items: \"++id, name, sources, pic, description, type, rarity, attunment\",\n      gears: \"++id, name, sources, pic, description, type, cost, damage, weight, properties\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      chars:\n        \"++id, name, player, prof, level, pic, classes, race, background, ac, hp, currentHp, hitDice, init, speed, str, dex, con, int, wis, cha, strSave, dexSave, conSave, intSave, wisSave, chaSave, strSaveProf, dexSaveProf, conSaveProf, intSaveProf, wisSaveProf, chaSaveProf, actions, bonusActions, reactions, features, classFeatures, racialFeatures, profsLangs, senses, passivPerception, passivInsight, passivInvestigation, notesOne, notesTwo, notesThree, acrobatics, animalHandling, arcana, athletics, deception, history, insight, intimidation, investigation, medicine, nature, perception, performance, persuasion, religion, sleightOfHand, stealth, survival, acrobaticsProf, animalHandlingProf, arcanaProf, athleticsProf, deceptionProf, historyProf, insightProf, intimidationProf, investigationProf, medicineProf, natureProf, perceptionProf, performanceProf, persuasionProf, religionProf, sleightOfHandProf, stealthProf, survivalProf, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      chars_spells: \"++id, char_id, spell_id, prepared\",\n      chars_monsters: \"++id, char_id, monster_id\",\n      chars_items:\n        \"++id, char_id, item_id, gear_id, amount, equiped, attuned, damage, hit, range, properties\",\n    });\n    this.version(7).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n    });\n    this.version(8).stores({\n      chars_spells: null,\n      chars_monsters: null,\n      chars_items: null,\n\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n    });\n    this.version(9).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n    });\n    this.version(10).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n    });\n    this.version(11).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n    });\n    this.version(12).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n    });\n    this.version(13).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n    });\n    this.version(14).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, quests, npcs, notes, players, sources, filename\",\n    });\n    this.version(15).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, quests, npcs, notes, players, sources, filename\",\n      quests:\n        \"++id, name, pic, locations, origin, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, locations, events, notes, sources, filename\",\n      locations: \"++id, name, map, description, events, notes, sources, filename\",\n      events: \"++id, name, description, locations, npcs, notes, sources, filename\",\n    });\n    this.version(16).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, quests, npcs, notes, players, map, sources, filename\",\n      quests:\n        \"++id, name, pic, locations, origin, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, locations, events, notes, sources, filename\",\n      locations: \"++id, name, map, description, events, notes, sources, filename\",\n      events: \"++id, name, description, locations, npcs, notes, sources, filename\",\n    });\n    this.version(17).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, npcs, notes, logs, players, flow, map, sources, filename\",\n      quests: \"++id, name, pic, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, events, notes, sources, filename\",\n      locations:\n        \"++id, name, map, dimension, description, events, notes, markers, sources, filename\",\n      events: \"++id, name, description, npcs, notes, sources, filename\",\n    });\n    this.version(18).stores({\n      spells:\n        \"++id, name, classes, sources, level, school, time, range, components, duration, ritual, text, pic, filename\",\n      items:\n        \"++id, name, sources, pic, description, type, rarity, attunment, magicBonus, base, filename\",\n      gears:\n        \"++id, name, sources, pic, description, type, cost, damage, weight, properties, filename\",\n      monsters:\n        \"++id, name, type, subtype, cr, ac, hp, str, dex, con, int, wis, cha, senses, lang, speed, source, skills, savingThrows, dmgImmunities, dmgResistance, dmgVulnerabilitie, conImmunities, sAblt, ablt, lAblt, pic, size, alignment\",\n      races:\n        \"++id, name, abilityScores, age, alignment, size, speed, lang, traits, sources, pic, filename\",\n      subraces: \"++id, name, type, abilityScores, traits, sources, filename\",\n      classes: \"++id, name, featureSets, hitDice, proficiencies, equipment, sources, pic, filename\",\n      subclasses: \"++id, name, type, features, sources, filename\",\n      chars:\n        \"++id, name, player, pic, classes, race, background, spells, spellSlots, activeSelections, items, monsters, ac, hp, currentHp, init, speed, str, dex, con, int, wis, cha, saves, actions, bonusActions, reactions, profsLangs, senses, money, skills, spellNotes, alignment, inspiration, castingHit, castingDC\",\n      encounters: \"++id, name, monsters, players\",\n      books: \"++id, name, cover, data, pages, tags\",\n      selections: \"++id, name, selectionOptions, filename\",\n      randomTables: \"++id, name, rows, header, filename\",\n      campaigns:\n        \"++id, name, pic, description, world, npcs, notes, logs, players, flow, map, sources, filename\",\n      quests: \"++id, name, pic, description, rewards, followQuest, sources, filename\",\n      npcs: \"++id, name, pic, char, traits, description, sources, filename\",\n      worlds: \"++id, name, map, description, locations, events, sources, filename\",\n      locations:\n        \"++id, name, map, dimension, markers, sources, filename\",\n      events: \"++id, name, description, date, sources, filename\",\n      groups: \"++id, name, pic, description, npcs, players, monsters, flow, sources, filename\",\n    });\n    \n    this.spells = this.table(\"spells\");\n    this.items = this.table(\"items\");\n    this.gears = this.table(\"gears\");\n    this.monsters = this.table(\"monsters\");\n    this.races = this.table(\"races\");\n    this.subraces = this.table(\"subraces\");\n    this.classes = this.table(\"classes\");\n    this.subclasses = this.table(\"subclasses\");\n    this.chars = this.table(\"chars\");\n    this.encounters = this.table(\"encounters\");\n    this.books = this.table(\"books\");\n    this.selections = this.table(\"selections\");\n    this.randomTables = this.table(\"randomTables\");\n    this.campaigns = this.table(\"campaigns\");\n    this.quests = this.table(\"quests\");\n    this.npcs = this.table(\"npcs\");\n    this.worlds = this.table(\"worlds\");\n    this.locations = this.table(\"locations\");\n    this.events = this.table(\"events\");\n    this.groups = this.table(\"groups\");\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Peer from \"peerjs\";\nimport { reciveAllPromise } from \"../../services/DatabaseService\";\nimport IEntity from \"../../data/IEntity\";\nimport { generateBrokerId } from \"../../services/PeerIdService\";\n\nimport { faExclamationCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport StringField from \"../form_elements/StringField\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\ninterface $Props {\n  data: string | IEntity;\n  mode: \"ALL\" | \"THIS\";\n}\n\nconst P2PSender = ({ data, mode }: $Props) => {\n  const [name, setName] = useState<string>(\"\");\n  const [peer, setPeer] = useState<Peer>();\n  const [error, setError] = useState<any>();\n\n  useEffect(() => {\n    if (peer === undefined) {\n      const brokerId = generateBrokerId();\n      const newPeer = new Peer(brokerId, {\n        host: \"peerjs.thedndtome.com\",\n        secure: true,\n      });\n      console.log(newPeer);\n      newPeer.on(\"connection\", function (conn) {\n        conn.on(\"error\", function (errorData) {\n          setError(errorData);\n        });\n        conn.on(\"open\", function () {\n          conn.send(data);\n        });\n      });\n      setPeer(newPeer);\n    }\n  }, [data, peer]);\n\n  useEffect(() => {\n    if (peer !== undefined) {\n      if (peer.disconnected && !peer.destroyed) {\n        peer.reconnect();\n      }\n      if (mode === \"ALL\" && typeof data === \"string\") {\n        reciveAllPromise(data).then((results) => {\n          console.log(results);\n          setName(data);\n          peer.on(\"connection\", function (conn) {\n            conn.on(\"error\", function (errorData) {\n              setError(errorData);\n            });\n            conn.on(\"open\", function () {\n              conn.send(results);\n            });\n          });\n        });\n      } else if (mode === \"THIS\" && typeof data !== \"string\") {\n        setName(data.name);\n        peer.on(\"connection\", function (conn) {\n          conn.on(\"error\", function (errorData) {\n            setError(errorData);\n          });\n          conn.on(\"open\", function () {\n            conn.send(data);\n          });\n        });\n      }\n    }\n  }, [data, mode, peer]);\n\n  return (\n    <>\n      {peer !== undefined && peer.id !== null && (\n        <>\n          <StringField value={peer.id} label={`Your ${name} ID:`} onChange={() => {}} />\n        </>\n      )}\n      {error && <Icon icon={faExclamationCircle} />}\n    </>\n  );\n};\n\nexport default P2PSender;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n","const getRandomInteger = (min: number, max: number) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\nexport const generateBrokerId = () => {\n  let password = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  for (let i = 0; i < 13; i++) {\n    password += characters[getRandomInteger(0, characters.length - 1)];\n  }\n  return password;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../form_elements/TextButton\";\n\ninterface $Props {\n  message: string;\n  icon?: IconDefinition;\n  confirmeText: string;\n  confirmeClick: () => void;\n  abortText: string;\n  abortClick: () => void;\n}\n\nconst Dialog = ({\n  message,\n  icon,\n  confirmeText,\n  confirmeClick,\n  abortText,\n  abortClick,\n}: $Props) => {\n  return (\n    <DialogWrapper>\n      <Message>\n        {icon ? <Icon icon={icon} /> : \"\"} {message}\n      </Message>\n      <ButtonBar>\n        <TextButton text={abortText} onClick={abortClick} />\n        <TextButton text={confirmeText} onClick={confirmeClick} />\n      </ButtonBar>\n    </DialogWrapper>\n  );\n};\n\nexport default Dialog;\n\nconst DialogWrapper = styled.div`\n  width: 180px;\n  position: absolute;\n  z-index: 1010;\n  top: 10px;\n  left: calc(50% - 100px);\n  padding: 10px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  color: ${({ theme }) => theme.tile.color};\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  text-align: center;\n`;\n\nconst ButtonBar = styled.div`\n  width: 100%;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n  margin-right: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  value: number;\n  label: string;\n  max?: number;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: number) => void;\n}\n\nconst NumberField = ({\n  value,\n  max,\n  label,\n  icon,\n  transform,\n  onChange,\n}: $Props) => {\n  return (\n    <Field>\n      <LabelText>\n        {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n      </LabelText>\n      {max && (\n        <Input\n          type=\"number\"\n          max={max}\n          value={value}\n          onChange={(e) => onChange(+e.target.value)}\n        />\n      )}\n      {!max && (\n        <Input\n          type=\"number\"\n          value={value}\n          onChange={(e) => onChange(+e.target.value)}\n        />\n      )}\n    </Field>\n  );\n};\n\nexport default NumberField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1;\n`;\n\nconst Input = styled.input`\n  flex: 1 1 auto;\n  max-width: 6em;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { faPlusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../form_elements/TextButton\";\n\ninterface $Props {\n  text: string;\n  buttonText: string;\n  onButton: () => void;\n}\n\nconst ErrorTile = ({ text, buttonText, onButton }: $Props) => {\n  return (\n    <Tile>\n      <PropWrapper>\n        <Name>\n          <b>A problem occured!</b>\n        </Name>\n        <Text>\n          <PropTitle>Text: </PropTitle>\n          {text}\n        </Text>\n        <TextButton text={buttonText} onClick={() => onButton()} icon={faPlusCircle} />\n      </PropWrapper>\n    </Tile>\n  );\n};\n\nexport default ErrorTile;\n\nconst Tile = styled.div`\n  flex: 1 1 15em;\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  margin: 0.5em;\n  border-radius: 10px;\n  box-shadow: ${({ theme }) => theme.tile.boxShadow};\n  overflow: hidden;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n`;\n\nconst Name = styled.div`\n  height: auto;\n  float: left;\n  padding: 10px;\n  margin: 0 5px 5px 5px;\n  font-size: 14px;\n  width: calc(100% - 30px);\n  color: ${({ theme }) => theme.tile.headerColor};\n  text-align: center;\n  border-radius: 5px;\n`;\n\nconst PropWrapper = styled.div`\n  height: auto;\n  width: calc(100% - 10px);\n  float: left;\n  padding: 5px 5px 0 5px;\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst PropTitle = styled.span`\n  display: inline-block;\n  color: ${({ theme }) => theme.tile.backgroundColorLink};\n  text-decoration: none;\n  margin: 0px 5px 0px 5px;\n`;\n\nconst Text = styled.div`\n  height: auto;\n  width: calc(100% - 30px);\n  margin: 10px 5px 5px 5px;\n  float: left;\n  line-height: 18px;\n  padding: 10px;\n  border-radius: 5px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n`;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 98;"],"sourceRoot":""}