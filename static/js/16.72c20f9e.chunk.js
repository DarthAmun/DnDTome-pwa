(this.webpackJsonpdndtome=this.webpackJsonpdndtome||[]).push([[16],{149:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var r=function(){for(var n,e,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<13;a++)t+=r[(n=0,e=r.length-1,Math.floor(Math.random()*(e-n+1))+n)];return t}},336:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=336},544:function(n,e,t){"use strict";var r=t(4),a=t(28),o=t(15),i=t(1),c=t.n(i),u=t(3),l=t(87);function d(){var n=Object(r.a)([""]);return d=function(){return n},n}function f(){var n=Object(r.a)(["\n  margin: 3px;\n  float: left;\n  border-radius: 500px;\n  border: 3px solid ",";\n  box-shadow: 0px 0px 10px 0px rgba(172, 172, 172, 0.2);\n  background-color: white;\n  overflow: hidden;\n  box-sizing: border-box;\n  cursor: move;\n  position: absolute;\n  text-align: center;\n"]);return f=function(){return n},n}function p(){var n=Object(r.a)(["\n  flex: 1;\n  min-height: ","px;\n  min-width: ","px;\n  max-height: ","px;\n  max-width: ","px;\n\n  box-sizing: border-box;\n  border: 1px solid rgba(0, 0, 0, 0.3);\n  position: releativ;\n"]);return p=function(){return n},n}function s(){var n=Object(r.a)(["\n  flex: 1 1 auto;\n  min-width: max-content;\n  display: flex;\n  flex-wrap: wrap;\n"]);return s=function(){return n},n}function b(){var n=Object(r.a)(["\n  flex: 1 1 100%;\n\n  height: 50px;\n  width: 100%;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n"]);return b=function(){return n},n}function m(){var n=Object(r.a)(["\n  width: calc(800px * ",");\n"]);return m=function(){return n},n}function h(){var n=Object(r.a)(["\n  position: absolute;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return h=function(){return n},n}function g(){var n=Object(r.a)(["\n  flex: 1 1 100%;\n  position: relative;\n\n  max-width: calc(100% - 10px);\n\n  overflow: scroll;\n\n  display: flex;\n  flex-wrap: wrap;\n"]);return g=function(){return n},n}function x(){var n=Object(r.a)(["\n  flex: 1 1 min-content;\n  padding: 5px;\n  margin: 5px;\n  // position: relative;\n  max-width: calc(100vw - 120px);\n\n  @media (max-width: 576px) {\n    max-width: 100vw;\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n"]);return x=function(){return n},n}e.a=function(n){var e=n.img,t=n.players,r=n.showName,u=n.dimension,d=n.currentPlayerNumber,f=n.onChangePlayers,p=n.onChangeDimension,s=Object(i.useState)(),b=Object(o.a)(s,2),m=b[0],h=b[1],g=Object(i.useState)(),x=Object(o.a)(g,2),z=x[0],C=x[1],D=Object(i.useCallback)((function(n){C(n)}),[]),S=Object(i.useCallback)((function(){return z}),[z]),N=Object(i.useCallback)((function(n){for(var e=[],a=0;a<u.width;a++)e.push(c.a.createElement(v,{key:"slot"+n+a,cord:[n,a],showName:r,players:t,size:u.size,zoom:u.zoom/100,makeDrop:S,makeDrag:D,updatePlayers:f,currentPlayerNumber:d}));return e}),[u,t,r,f,d,S,D]),P=Object(i.useCallback)((function(){for(var n=[],e=0;e<u.height;e++)n.push(c.a.createElement(k,{key:e},N(e)));h(n)}),[u,N]);return Object(i.useEffect)((function(){console.log("Redo Board"),P()}),[e,u,t,S]),c.a.createElement(O,null,c.a.createElement(E,null,c.a.createElement(l.a,{value:u.zoom,label:"Zoom",step:10,onChange:function(n){return p(Object(a.a)(Object(a.a)({},u),{},{zoom:n}))}}),c.a.createElement(l.a,{value:u.width,label:"Horizontal",onChange:function(n){return p(Object(a.a)(Object(a.a)({},u),{},{width:n}))}}),c.a.createElement(l.a,{value:u.height,label:"Vertical",onChange:function(n){return p(Object(a.a)(Object(a.a)({},u),{},{height:n}))}}),c.a.createElement(l.a,{value:u.size,label:"Size",onChange:function(n){return p(Object(a.a)(Object(a.a)({},u),{},{size:n}))}})),c.a.createElement(j,null,c.a.createElement(y,null,m),c.a.createElement(w,{zoom:u.zoom/100,src:e})))};var v=function(n){var e=n.size,t=n.zoom,r=n.cord,o=n.showName,u=n.players,l=n.currentPlayerNumber,d=n.makeDrop,f=n.makeDrag,p=n.updatePlayers,s=function(n,e){console.log("drag",e.player.name,e.player.cord),f(e)},b=function(n){n.preventDefault()},m=Object(i.useCallback)((function(n,e){if(e.player.isMonster)switch(e.entity.size){case"gargantuan":return 4*n*t;case"huge":return 3*n*t;case"large":return 2*n*t}return n*t}),[t]);return c.a.createElement(z,{size:e*t,onDrop:function(n){return function(n,e){n.preventDefault();var t=d(),r=u.map((function(n){return n===t?Object(a.a)(Object(a.a)({},n),{},{player:Object(a.a)(Object(a.a)({},n.player),{},{cord:e})}):n}));p(r)}(n,r)},onDragOver:b},u.map((function(n,t){return void 0===n.player.cord&&0===r[0]&&0===r[1]||void 0!==n.player.cord&&n.player.cord[0]===r[0]&&n.player.cord[1]===r[1]?c.a.createElement(C,{key:"icon"+t,drag:s,player:n,showName:o,dragOver:b,pic:n.entity.pic,size:m(e,n),isDead:n.player.currentHp<=0,isCurrent:l===t}):c.a.createElement(S,{key:"icon"+t})})))},O=u.b.div(x()),j=u.b.div(g()),y=u.b.div(h()),w=u.b.img(m(),(function(n){return n.zoom})),E=u.b.div(b()),k=u.b.div(s()),z=u.b.div(p(),(function(n){return n.size}),(function(n){return n.size}),(function(n){return n.size}),(function(n){return n.size})),C=function(n){var e=n.dragOver,t=n.drag,r=n.pic,a=n.size,o=n.showName,i=n.player,u=n.isDead,l=n.isCurrent;if(""!==r){var d={backgroundImage:"url(".concat(r,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:a-6+"px",width:a-6+"px",opacity:u?"0.5":"1",border:l?"":"none"};return c.a.createElement(D,{onDragStart:function(n){return t(n,i)},onDragOver:e,draggable:!0,style:d})}var f={height:a-6+"px",width:a-6+"px",opacity:u?"0.5":"1",border:l?"":"none",padding:a/5+"px",fontSize:a/6+"px"};return c.a.createElement(D,{onDragStart:function(n){return t(n,i)},onDragOver:e,draggable:!0,style:f},o?i.entity.name:"???")},D=u.b.div(f(),(function(n){return n.theme.main.highlight})),S=u.b.div(d())},545:function(n,e,t){"use strict";var r=t(4),a=t(31),o=t(15),i=t(1),c=t.n(i),u=t(3),l=t(255),d=t.n(l),f=t(149),p=t(10),s=t(33),b=t(9);function m(){var n=Object(r.a)(["\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  color: ",";\n"]);return m=function(){return n},n}e.a=function(n){var e=n.encounter,t=n.isHost,r=n.onEdit,u=Object(i.useState)(),l=Object(o.a)(u,2),b=l[0],m=l[1],g=Object(i.useState)(""),x=Object(o.a)(g,2),v=x[0],O=x[1],j=Object(i.useState)(),y=Object(o.a)(j,2),w=y[0],E=y[1],k=Object(i.useState)(),z=Object(o.a)(k,2),C=z[0],D=z[1],S=Object(i.useState)([]),N=Object(o.a)(S,2),P=N[0],M=N[1],I=Object(i.useState)(!1),B=Object(o.a)(I,2),H=B[0],F=B[1];return Object(i.useEffect)((function(){if(void 0===w){var n=Object(f.a)(),t=new d.a(n,{host:"peerjs.thorbenkuck.de",secure:!0});t.on("connection",(function(n){console.log(n),m(!0),M((function(e){return[].concat(Object(a.a)(e),[n])})),n.on("error",(function(n){D(n)})),n.on("data",(function(n){e!==n&&r(n)})),n.on("close",(function(){M((function(e){return e.filter((function(e){return e!==n}))}))}))})),E(t)}}),[]),Object(i.useEffect)((function(){if(void 0!==w&&""!==v){var n=w.connect(v);n.on("open",(function(){m(!1),M((function(e){return[].concat(Object(a.a)(e),[n])}))})),n.on("data",(function(n){e!==n&&(F(!0),r(n))})),n.on("close",(function(){M((function(e){return e.filter((function(e){return e!==n}))}))}))}}),[w,v,r]),Object(i.useEffect)((function(){e&&t&&P.forEach((function(n){n.send(e)}))}),[e,P,t]),Object(i.useEffect)((function(){!e||t||H?!t&&H&&F(!1):P.forEach((function(n){n.send(e)}))}),[e,P,t]),c.a.createElement(c.a.Fragment,null,void 0!==w&&(b||void 0===b)&&c.a.createElement(s.a,{value:w.id,label:"Your ID:",onChange:function(){},style:{minWidth:"250px",float:"right"}}),void 0!==w&&0===P.length&&c.a.createElement(s.a,{value:v,label:"ID to recive from",onChange:O,style:{minWidth:"250px",float:"right"}}),C&&c.a.createElement(h,{icon:p.x}))};var h=Object(u.b)(b.a)(m(),(function(n){return n.theme.main.highlight}))},648:function(n,e,t){"use strict";t.r(e);var r=t(4),a=t(28),o=t(15),i=t(1),c=t.n(i),u=t(2),l=t(3),d=t(544),f=t(545);function p(){var n=Object(r.a)([""]);return p=function(){return n},n}function s(){var n=Object(r.a)(["\n  margin-right: 5px;\n  margin-top: -7px;\n  margin-bottom: -7px;\n  height: 43px;\n  width: 43px;\n  float: left;\n  border-radius: 100px;\n  border: 3px solid ",";\n  box-shadow: 0px 0px 10px 0px rgba(172, 172, 172, 0.2);\n  background-color: white;\n  overflow: hidden;\n\n  @media (max-width: 576px) {\n    display: none;\n  }\n"]);return s=function(){return n},n}function b(){var n=Object(r.a)(["\n  height: auto;\n  width: calc(100% - 6px);\n  float: left;\n  padding: 3px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]);return b=function(){return n},n}function m(){var n=Object(r.a)(["\n  display: inline-block;\n  background-color: ",";\n  border-radius: 5px;\n  text-decoration: none;\n  color: ",";\n  font-size: 16px;\n  padding: 0px 5px 0px 5px;\n  cursor: pointer;\n"]);return m=function(){return n},n}function h(){var n=Object(r.a)(["\n  display: inline-block;\n  color: ",";\n  text-decoration: none;\n  margin: 0px 5px 0px 5px;\n"]);return h=function(){return n},n}function g(){var n=Object(r.a)(["\n  padding: 0px;\n"]);return g=function(){return n},n}function x(){var n=Object(r.a)(["\n  margin: 5px;\n  padding: 10px;\n  height: 20px;\n  flex: 1 1 auto;\n  line-height: 20px;\n  border-radius: 5px;\n  background-color: ",";\n\n  svg {\n    margin-right: 5px;\n    height: auto;\n    border-radius: 150px;\n    transition: color 0.2s;\n    color: ",";\n  }\n"]);return x=function(){return n},n}function v(){var n=Object(r.a)(["\n  margin: 2px;\n  padding: 5px;\n  border-radius: 5px;\n  background-color: ",";\n  line-height: 34px;\n"]);return v=function(){return n},n}function O(){var n=Object(r.a)(["\n  ","\n  margin: 2px;\n"]);return O=function(){return n},n}function j(){var n=Object(r.a)(["\n  height: auto;\n  float: left;\n  padding: 10px;\n  margin: 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 5px;\n  background-color: ",";\n"]);return j=function(){return n},n}function y(){var n=Object(r.a)(["\n  flex: 1 1;\n  color: ",";\n  font-size: 16px;\n  max-width: 800px;\n  ","\n  padding: 5px;\n\n  @media (max-width: 576px) {\n    min-width: 100%;\n  }\n"]);return y=function(){return n},n}function w(){var n=Object(r.a)(["\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]);return w=function(){return n},n}function E(){var n=Object(r.a)(["\n  width: 100%;\n"]);return E=function(){return n},n}e.default=function(){var n,e,t=Object(u.f)(),r=Object(i.useState)(),l=Object(o.a)(r,2),p=l[0],s=l[1],b=Object(i.useCallback)((function(n){if(void 0!==p&&n!==(null===p||void 0===p?void 0:p.players)){var e=[];n.forEach((function(n){n.player.isMonster||e.push(n.player)}));var t=[];n.forEach((function(n){n.player.isMonster&&t.push(n.player)})),s(Object(a.a)(Object(a.a)({},p),{},{encounter:Object(a.a)(Object(a.a)({},p.encounter),{},{players:e,enemies:t})}))}}),[p,s]),m=Object(i.useCallback)((function(){if(void 0!==p){if(""!==p.encounter.mapBase64&&null!==p.encounter.mapBase64&&void 0!==p.encounter.mapBase64)return p.encounter.mapBase64;if(""!==p.encounter.map&&null!==p.encounter.map&&void 0!==p.encounter.map)return p.encounter.map}return""}),[p]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{encounter:p,onEdit:s,isHost:!1}),c.a.createElement(C,null,c.a.createElement(D,{mode:0},c.a.createElement(S,null,c.a.createElement("b",null,null===p||void 0===p||null===(n=p.encounter)||void 0===n?void 0:n.name)),c.a.createElement(F,null,c.a.createElement(M,null,c.a.createElement(B,null,"Round: "),null===p||void 0===p||null===(e=p.encounter)||void 0===e?void 0:e.roundCounter)),c.a.createElement(z,null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Init"),c.a.createElement("th",null,"Name"))),c.a.createElement("tbody",null,p&&p.players.map((function(n,e){return c.a.createElement(N,{current:p.encounter.currentInit===e&&p.encounter.isPlaying,isDead:n.player.currentHp<=0,key:e},c.a.createElement(I,null,n.player.init),c.a.createElement(P,null,""!==n.entity.pic&&void 0!==n.entity.pic?c.a.createElement(k,{player:n}):c.a.createElement(c.a.Fragment,null),n.player.isMonster&&c.a.createElement(H,{onClick:function(){return t.push("/monster-detail/name/".concat(n.player.name))}},"???"),!n.player.isMonster&&c.a.createElement(H,{onClick:function(){return t.push("/char-detail/name/".concat(n.player.name))}},n.player.name)))}))))),p&&""!==m()&&c.a.createElement(d.a,{onChangePlayers:b,players:p.players,showName:!1,dimension:void 0!==p.encounter.dimension?p.encounter.dimension:{width:20,height:20,size:20,zoom:100},currentPlayerNumber:p.encounter.currentInit,onChangeDimension:function(){},img:m()})))};var k=function(n){var e=n.player;return c.a.createElement(R,{pic:e.entity.pic})},z=l.b.table(E()),C=l.b.div(w()),D=l.b.div(y(),(function(n){return n.theme.tile.color}),(function(n){return n.mode?"min-width: 500px;":"min-width: 400px;"})),S=l.b.div(j(),(function(n){return n.theme.tile.backgroundColor})),N=l.b.tr(O(),(function(n){return n.isDead?"opacity: 0.5;":n.current?"td:nth-child(1) {background-color: ".concat(n.theme.main.highlight,";}"):""})),P=l.b.td(v(),(function(n){return n.theme.tile.backgroundColor})),M=l.b.div(x(),(function(n){return n.theme.tile.backgroundColor}),(function(n){return n.theme.main.highlight})),I=Object(l.b)(P)(g()),B=l.b.span(h(),(function(n){return n.theme.tile.backgroundColorLink})),H=l.b.span(m(),(function(n){return n.theme.tile.backgroundColorLink}),(function(n){return n.theme.tile.backgroundColor})),F=l.b.div(b()),R=function(n){var e=n.pic,t={backgroundImage:"url(".concat(e,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return""!==e?c.a.createElement(L,{style:t}):c.a.createElement(J,null)},L=l.b.div(s(),(function(n){return n.theme.main.highlight})),J=l.b.div(p())},87:function(n,e,t){"use strict";var r=t(4),a=t(1),o=t.n(a),i=t(3),c=t(9);function u(){var n=Object(r.a)(["\n  flex: 1 1 auto;\n  max-width: 6em;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ",";\n  color: ",";\n  margin-left: 5px;\n  border-radius: 5px;\n"]);return u=function(){return n},n}function l(){var n=Object(r.a)(["\n  flex: 1 1;\n"]);return l=function(){return n},n}function d(){var n=Object(r.a)(["\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ",";\n"]);return d=function(){return n},n}function f(){var n=Object(r.a)(["\n  color: ",";\n  background-color: ",";\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return f=function(){return n},n}e.a=function(n){var e=n.value,t=n.max,r=n.step,a=n.label,i=n.icon,c=n.transform,u=n.onChange;return o.a.createElement(p,null,o.a.createElement(b,null,i?o.a.createElement(s,{icon:i,transform:c}):""," ",a),t&&o.a.createElement(m,{type:"number",max:t,step:r||1,value:e,onChange:function(n){return u(+n.target.value)}}),!t&&o.a.createElement(m,{type:"number",step:r||1,value:e,onChange:function(n){return u(+n.target.value)}}))};var p=i.b.label(f(),(function(n){return n.theme.tile.color}),(function(n){return n.theme.tile.backgroundColor})),s=Object(i.b)(c.a)(d(),(function(n){return n.theme.main.highlight})),b=i.b.div(l()),m=i.b.input(u(),(function(n){return n.theme.input.backgroundColor}),(function(n){return n.theme.input.color}))}}]);
//# sourceMappingURL=16.72c20f9e.chunk.js.map