(this.webpackJsonpdndtome=this.webpackJsonpdndtome||[]).push([[17],{140:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var r=function(){for(var n,e,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<13;a++)t+=r[(n=0,e=r.length-1,Math.floor(Math.random()*(e-n+1))+n)];return t}},255:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=255},517:function(n,e,t){"use strict";var r=t(4),a=t(31),o=t(15),i=t(1),c=t.n(i),u=t(3),l=t(203),f=t.n(l),d=t(140),s=t(10),p=t(32),b=t(9);function m(){var n=Object(r.a)(["\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  color: ",";\n"]);return m=function(){return n},n}e.a=function(n){var e=n.encounter,t=n.isHost,r=n.onEdit,u=Object(i.useState)(""),l=Object(o.a)(u,2),b=l[0],m=l[1],g=Object(i.useState)(),x=Object(o.a)(g,2),v=x[0],O=x[1],j=Object(i.useState)(),E=Object(o.a)(j,2),w=E[0],y=E[1],k=Object(i.useState)([]),C=Object(o.a)(k,2),z=C[0],D=C[1],S=Object(i.useState)(!1),N=Object(o.a)(S,2),P=N[0],H=N[1];return Object(i.useEffect)((function(){if(void 0===v){var n=Object(d.a)(),t=new f.a(n,{host:"peerjs.thorbenkuck.de",secure:!0});t.on("connection",(function(n){D((function(e){return[].concat(Object(a.a)(e),[n])})),n.on("open",(function(){n.send(JSON.stringify(e))})),n.on("error",(function(n){y(n)})),n.on("data",(function(n){e!==n&&r(JSON.parse(n))})),n.on("close",(function(){D((function(e){return e.filter((function(e){return e!==n}))}))}))})),O(t)}}),[]),Object(i.useEffect)((function(){if(void 0!==v&&""!==b){var n=v.connect(b);n.on("open",(function(){D((function(e){return[].concat(Object(a.a)(e),[n])}))})),n.on("data",(function(n){e!==n&&(H(!0),r(JSON.parse(n)))})),n.on("close",(function(){D((function(e){return e.filter((function(e){return e!==n}))}))}))}}),[v,b,r]),Object(i.useEffect)((function(){e&&t&&z.forEach((function(n){n.send(JSON.stringify(e))}))}),[e,z,t]),Object(i.useEffect)((function(){!e||t||P?!t&&P&&H(!1):z.forEach((function(n){n.send(JSON.stringify(e))}))}),[e,z,t]),c.a.createElement(c.a.Fragment,null,void 0!==v&&t&&c.a.createElement(p.a,{value:v.id,label:"Your ID:",onChange:function(){},style:{minWidth:"250px",float:"right"}}),void 0!==v&&!t&&c.a.createElement(p.a,{value:b,label:"ID to recive from",onChange:m,style:{minWidth:"250px",float:"right"}}),w&&c.a.createElement(h,{icon:s.x}))};var h=Object(u.b)(b.a)(m(),(function(n){return n.theme.main.highlight}))},518:function(n,e,t){"use strict";var r=t(4),a=t(1),o=t.n(a),i=t(3);function c(){var n=Object(r.a)(["\n  margin-left: 5px;\n"]);return c=function(){return n},n}function u(){var n=Object(r.a)(["\n  flex: 1 1 auto;\n  max-width: 4em;\n  height: 30px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ",";\n  color: ",";\n  margin-left: 5px;\n  border-radius: 5px;\n"]);return u=function(){return n},n}function l(){var n=Object(r.a)(["\n  color: ",";\n  background-color: ",";\n  font-size: 16px;\n  overflow: hidden;\n  height: 30px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 2px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return l=function(){return n},n}e.a=function(n){var e=n.value,t=n.max,r=n.showMax,a=n.onChange;return o.a.createElement(f,null,void 0!==t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(d,{type:"number",max:t,value:e,onChange:function(n){return a(+n.target.value)}}),r&&o.a.createElement(s,null,"/ ",t)),void 0===t&&o.a.createElement(d,{type:"number",value:e,onChange:function(n){return a(+n.target.value)}}))};var f=i.b.label(l(),(function(n){return n.theme.tile.color}),(function(n){return n.theme.tile.backgroundColor})),d=i.b.input(u(),(function(n){return n.theme.input.backgroundColor}),(function(n){return n.theme.input.color})),s=i.b.span(c())},519:function(n,e,t){"use strict";var r=t(4),a=t(28),o=t(15),i=t(10),c=t(9),u=t(1),l=t.n(u),f=t(3),d=t(84);function s(){var n=Object(r.a)([""]);return s=function(){return n},n}function p(){var n=Object(r.a)(["\n  margin: 3px;\n  float: left;\n  border-radius: 500px;\n  border: 3px solid ",";\n  box-shadow: 0px 0px 10px 0px rgba(172, 172, 172, 0.2);\n  background-color: white;\n  overflow: hidden;\n  box-sizing: border-box;\n  cursor: move;\n  position: absolute;\n  text-align: center;\n"]);return p=function(){return n},n}function b(){var n=Object(r.a)(["\n  flex: 1;\n  min-height: ","px;\n  min-width: ","px;\n  max-height: ","px;\n  max-width: ","px;\n\n  box-sizing: border-box;\n  border: 1px solid rgba(0, 0, 0, 0.3);\n  position: releativ;\n"]);return b=function(){return n},n}function m(){var n=Object(r.a)(["\n  flex: 1 1 auto;\n  min-width: max-content;\n  display: flex;\n  flex-wrap: wrap;\n"]);return m=function(){return n},n}function h(){var n=Object(r.a)(["\n  flex: 1 1 100%;\n\n  height: 50px;\n  width: 100%;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n"]);return h=function(){return n},n}function g(){var n=Object(r.a)(["\n  width: calc(800px * ",");\n"]);return g=function(){return n},n}function x(){var n=Object(r.a)(["\n  position: absolute;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return x=function(){return n},n}function v(){var n=Object(r.a)(["\n  flex: 1 1 100%;\n  position: relative;\n\n  max-width: calc(100% - 10px);\n\n  overflow: scroll;\n\n  display: flex;\n  flex-wrap: wrap;\n"]);return v=function(){return n},n}function O(){var n=Object(r.a)(["\n  flex: 1 1 min-content;\n  padding: 5px;\n  margin: 5px;\n  // position: relative;\n  max-width: calc(100vw - 120px);\n\n  @media (max-width: 576px) {\n    max-width: 100vw;\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n"]);return O=function(){return n},n}e.a=function(n){var e=n.isHost,t=n.img,r=n.players,i=n.showName,c=n.dimension,f=n.currentPlayerNumber,s=n.onChangePlayers,p=n.onChangeDimension,b=Object(u.useState)(),m=Object(o.a)(b,2),h=m[0],g=m[1],x=Object(u.useState)(),v=Object(o.a)(x,2),O=v[0],D=v[1],S=Object(u.useCallback)((function(n){D(n)}),[]),N=Object(u.useCallback)((function(){return O}),[O]),P=Object(u.useCallback)((function(n){for(var t=[],a=0;a<c.width;a++)t.push(l.a.createElement(j,{isHost:e,key:"slot"+n+a,cord:[n,a],showName:i,players:r,size:c.size,zoom:c.zoom/100,makeDrop:N,makeDrag:S,updatePlayers:s,currentPlayerNumber:f}));return t}),[c,r,i,s,f,N,S,e]),H=Object(u.useCallback)((function(){for(var n=[],e=0;e<c.height;e++)n.push(l.a.createElement(z,{key:e},P(e)));g(n)}),[c,P]);return Object(u.useEffect)((function(){console.log("Redo Board"),H()}),[t,c,r,N,e]),l.a.createElement(E,null,l.a.createElement(C,null,l.a.createElement(d.a,{value:c.zoom,label:"Zoom",step:10,onChange:function(n){return p(Object(a.a)(Object(a.a)({},c),{},{zoom:n}))}}),l.a.createElement(d.a,{value:c.width,label:"Horizontal",onChange:function(n){return p(Object(a.a)(Object(a.a)({},c),{},{width:n}))}}),l.a.createElement(d.a,{value:c.height,label:"Vertical",onChange:function(n){return p(Object(a.a)(Object(a.a)({},c),{},{height:n}))}}),l.a.createElement(d.a,{value:c.size,label:"Size",onChange:function(n){return p(Object(a.a)(Object(a.a)({},c),{},{size:n}))}})),l.a.createElement(w,null,l.a.createElement(y,null,h),l.a.createElement(k,{zoom:c.zoom/100,src:t})))};var j=function(n){var e=n.isHost,t=n.size,r=n.zoom,o=n.cord,i=n.showName,c=n.players,f=n.currentPlayerNumber,d=n.makeDrop,s=n.makeDrag,p=n.updatePlayers,b=function(n,e){console.log("drag",e.name,e.cord),s(e)},m=function(n){n.preventDefault()},h=Object(u.useCallback)((function(n,e){if(e.isMonster)switch(e.size){case"gargantuan":return 4*n*r;case"huge":return 3*n*r;case"large":return 2*n*r}return n*r}),[r]);return l.a.createElement(D,{size:t*r,onDrop:function(n){return function(n,e){n.preventDefault();var t=d(),r=c.map((function(n){return n===t?Object(a.a)(Object(a.a)({},n),{},{cord:e}):n}));p(r)}(n,o)},onDragOver:m},c.filter((function(n){return!n.isVisible||e})).map((function(n,e){return void 0===n.cord&&0===o[0]&&0===o[1]||void 0!==n.cord&&n.cord[0]===o[0]&&n.cord[1]===o[1]?l.a.createElement(S,{key:"icon"+e,drag:b,player:n,showName:i,dragOver:m,pic:n.pic,size:h(t,n),isDead:n.currentHp<=0,isCurrent:f===e}):l.a.createElement(P,{key:"icon"+e})})))},E=f.b.div(O()),w=f.b.div(v()),y=f.b.div(x()),k=f.b.img(g(),(function(n){return n.zoom})),C=f.b.div(h()),z=f.b.div(m()),D=f.b.div(b(),(function(n){return n.size}),(function(n){return n.size}),(function(n){return n.size}),(function(n){return n.size})),S=function(n){var e=n.dragOver,t=n.drag,r=n.pic,a=n.size,o=n.showName,u=n.player,f=n.isDead,d=n.isCurrent;if(""!==r){var s={backgroundImage:"url(".concat(r,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:a-6+"px",width:a-6+"px",opacity:f?"0.5":"1",border:d?"":"none"};return l.a.createElement(N,{onDragStart:function(n){return t(n,u)},onDragOver:e,draggable:!0,style:s},u.isVisible&&l.a.createElement(c.a,{icon:i.B,style:{color:"white"}}))}var p={height:a-6+"px",width:a-6+"px",opacity:f?"0.5":"1",border:d?"":"none",padding:a/5+"px",fontSize:a/6+"px"};return l.a.createElement(N,{onDragStart:function(n){return t(n,u)},onDragOver:e,draggable:!0,style:p},u.isVisible&&l.a.createElement(c.a,{icon:i.B}),o?u.name:"???")},N=f.b.div(p(),(function(n){return n.theme.main.highlight})),P=f.b.div(s())},649:function(n,e,t){"use strict";t.r(e);var r=t(4),a=t(28),o=t(31),i=t(15),c=t(1),u=t.n(c),l=t(2),f=t(3),d=t(518),s=t(519),p=t(517);function b(){var n=Object(r.a)([""]);return b=function(){return n},n}function m(){var n=Object(r.a)(["\n  margin-right: 5px;\n  margin-top: -7px;\n  margin-bottom: -7px;\n  height: 43px;\n  width: 43px;\n  float: left;\n  border-radius: 100px;\n  border: 3px solid ",";\n  box-shadow: 0px 0px 10px 0px rgba(172, 172, 172, 0.2);\n  background-color: white;\n  overflow: hidden;\n\n  @media (max-width: 576px) {\n    display: none;\n  }\n"]);return m=function(){return n},n}function h(){var n=Object(r.a)(["\n  height: auto;\n  width: calc(100% - 6px);\n  float: left;\n  padding: 3px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]);return h=function(){return n},n}function g(){var n=Object(r.a)(["\n  display: inline-block;\n  background-color: ",";\n  border-radius: 5px;\n  text-decoration: none;\n  color: ",";\n  font-size: 16px;\n  padding: 0px 5px 0px 5px;\n  cursor: pointer;\n"]);return g=function(){return n},n}function x(){var n=Object(r.a)(["\n  display: inline-block;\n  color: ",";\n  text-decoration: none;\n  margin: 0px 5px 0px 5px;\n"]);return x=function(){return n},n}function v(){var n=Object(r.a)(["\n  padding: 0px;\n"]);return v=function(){return n},n}function O(){var n=Object(r.a)(["\n  margin: 5px;\n  padding: 10px;\n  height: 20px;\n  flex: 1 1 auto;\n  line-height: 20px;\n  border-radius: 5px;\n  background-color: ",";\n\n  svg {\n    margin-right: 5px;\n    height: auto;\n    border-radius: 150px;\n    transition: color 0.2s;\n    color: ",";\n  }\n"]);return O=function(){return n},n}function j(){var n=Object(r.a)(["\n  margin: 2px;\n  padding: 5px;\n  border-radius: 5px;\n  background-color: ",";\n  line-height: 34px;\n"]);return j=function(){return n},n}function E(){var n=Object(r.a)(["\n  ","\n  margin: 2px;\n"]);return E=function(){return n},n}function w(){var n=Object(r.a)(["\n  height: auto;\n  float: left;\n  padding: 10px;\n  margin: 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 5px;\n  background-color: ",";\n"]);return w=function(){return n},n}function y(){var n=Object(r.a)(["\n  flex: 1 1;\n  color: ",";\n  font-size: 16px;\n  max-width: 800px;\n  ","\n  padding: 5px;\n\n  @media (max-width: 576px) {\n    min-width: 100%;\n  }\n"]);return y=function(){return n},n}function k(){var n=Object(r.a)(["\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]);return k=function(){return n},n}function C(){var n=Object(r.a)(["\n  width: 100%;\n"]);return C=function(){return n},n}e.default=function(){var n=Object(l.f)(),e=Object(c.useState)(),t=Object(i.a)(e,2),r=t[0],f=t[1],b=Object(c.useState)([]),m=Object(i.a)(b,2),h=m[0],g=m[1];Object(c.useEffect)((function(){void 0!==r&&g([].concat(Object(o.a)(r.players),Object(o.a)(r.enemies)))}),[r]);var x=Object(c.useCallback)((function(n){if(void 0!==r&&n!==(null===r||void 0===r?void 0:r.players)){var e=[];n.forEach((function(n){n.isEnemy||e.push(n)})),JSON.stringify(r.players)!==JSON.stringify(e)&&f(Object(a.a)(Object(a.a)({},r),{},{players:e}))}}),[r,f]),v=Object(c.useCallback)((function(){if(void 0!==r){if(""!==r.mapBase64&&null!==r.mapBase64&&void 0!==r.mapBase64)return r.mapBase64;if(""!==r.map&&null!==r.map&&void 0!==r.map)return r.map}return""}),[r]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a,{encounter:r,onEdit:f,isHost:!1}),u.a.createElement(S,null,u.a.createElement(N,{mode:0},u.a.createElement(P,null,u.a.createElement("b",null,null===r||void 0===r?void 0:r.name)),u.a.createElement(V,null,u.a.createElement(B,null,u.a.createElement(M,null,"Round: "),null===r||void 0===r?void 0:r.roundCounter)),u.a.createElement(D,null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Init"),u.a.createElement("th",null,"Name"))),u.a.createElement("tbody",null,r&&h.sort((function(n,e){return e.init!==n.init&&r.isPlaying?e.init-n.init:n.name.localeCompare(e.name)})).filter((function(n){return!n.isVisible})).map((function(e,t){return u.a.createElement(H,{current:r.currentInit===t&&r.isPlaying,isDead:e.currentHp<=0,key:t},u.a.createElement(I,null,u.a.createElement(d.a,{value:e.init,onChange:function(){}})),u.a.createElement(J,null,""!==e.pic&&void 0!==e.pic?u.a.createElement(z,{player:e}):u.a.createElement(u.a.Fragment,null),e.isMonster&&u.a.createElement(F,null,"???"),!e.isMonster&&u.a.createElement(F,{onClick:function(){return n.push("/char-detail/name/".concat(e.name))}},e.name)))}))))),r&&""!==v()&&u.a.createElement(s.a,{isHost:!1,onChangePlayers:x,players:h,showName:!1,dimension:void 0!==r.dimension?r.dimension:{width:20,height:20,size:20,zoom:100},currentPlayerNumber:r.currentInit,onChangeDimension:function(){},img:v()})))};var z=function(n){var e=n.player;return u.a.createElement(R,{pic:e.pic})},D=f.b.table(C()),S=f.b.div(k()),N=f.b.div(y(),(function(n){return n.theme.tile.color}),(function(n){return n.mode?"min-width: 500px;":"min-width: 400px;"})),P=f.b.div(w(),(function(n){return n.theme.tile.backgroundColor})),H=f.b.tr(E(),(function(n){return n.isDead?"opacity: 0.5;":n.current?"td:nth-child(1) {background-color: ".concat(n.theme.main.highlight,";}"):""})),J=f.b.td(j(),(function(n){return n.theme.tile.backgroundColor})),B=f.b.div(O(),(function(n){return n.theme.tile.backgroundColor}),(function(n){return n.theme.main.highlight})),I=Object(f.b)(J)(v()),M=f.b.span(x(),(function(n){return n.theme.tile.backgroundColorLink})),F=f.b.span(g(),(function(n){return n.theme.tile.backgroundColorLink}),(function(n){return n.theme.tile.backgroundColor})),V=f.b.div(h()),R=function(n){var e=n.pic,t={backgroundImage:"url(".concat(e,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return""!==e?u.a.createElement(L,{style:t}):u.a.createElement(U,null)},L=f.b.div(m(),(function(n){return n.theme.main.highlight})),U=f.b.div(b())},84:function(n,e,t){"use strict";var r=t(4),a=t(1),o=t.n(a),i=t(3),c=t(9);function u(){var n=Object(r.a)(["\n  flex: 1 1 auto;\n  max-width: 6em;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ",";\n  color: ",";\n  margin-left: 5px;\n  border-radius: 5px;\n"]);return u=function(){return n},n}function l(){var n=Object(r.a)(["\n  flex: 1 1;\n"]);return l=function(){return n},n}function f(){var n=Object(r.a)(["\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ",";\n"]);return f=function(){return n},n}function d(){var n=Object(r.a)(["\n  color: ",";\n  background-color: ",";\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return d=function(){return n},n}e.a=function(n){var e=n.value,t=n.max,r=n.step,a=n.label,i=n.icon,c=n.transform,u=n.onChange;return o.a.createElement(s,null,o.a.createElement(b,null,i?o.a.createElement(p,{icon:i,transform:c}):""," ",a),t&&o.a.createElement(m,{type:"number",max:t,step:r||1,value:e,onChange:function(n){return u(+n.target.value)}}),!t&&o.a.createElement(m,{type:"number",step:r||1,value:e,onChange:function(n){return u(+n.target.value)}}))};var s=i.b.label(d(),(function(n){return n.theme.tile.color}),(function(n){return n.theme.tile.backgroundColor})),p=Object(i.b)(c.a)(f(),(function(n){return n.theme.main.highlight})),b=i.b.div(l()),m=i.b.input(u(),(function(n){return n.theme.input.backgroundColor}),(function(n){return n.theme.input.color}))}}]);
//# sourceMappingURL=17.4a84f001.chunk.js.map