{"version":3,"sources":["components/form_elements/FileField.tsx","components/form_elements/IconButton.tsx","components/form_elements/TextButton.tsx","components/entities/library/details/BookView.tsx","components/entities/library/details/BookEditView.tsx","components/entities/library/details/BookDetail.tsx","components/form_elements/StringField.tsx","hooks/DexieHooks.tsx","components/form_elements/BackButton.tsx","components/general_elements/ToggleStyle.tsx","components/entities/library/details/link_wrapper/IdToBook.tsx","components/general_elements/Dialog.tsx","components/form_elements/NumberField.tsx"],"names":["FileField","label","accept","isMulti","icon","transform","onChange","Field","LabelText","Icon","Input","e","target","files","type","multiple","styled","theme","tile","color","backgroundColor","FontAwesomeIcon","main","highlight","div","input","IconButton","floatLeft","disabled","onClick","SimpleButton","left","DisabledSimpleButton","buttons","height","TextButton","text","button","hoverColor","pdfjs","GlobalWorkerOptions","workerSrc","version","BookView","book","useState","base","setBase","numPages","setNumPages","pageNumber","setPageNumber","useEffect","reader","FileReader","readAsDataURL","data","onloadend","base64data","result","toString","changePage","offset","prevPageNumber","CenterWrapper","View","DocumentWrapper","faArrowRight","faArrowLeft","file","onLoadSuccess","onItemClick","itemPageNumber","loading","LocalLoadingSpinner","Name","name","navigator","appVersion","indexOf","window","msSaveBlob","url","URL","createObjectURL","open","showPdf","faExternalLinkAlt","filename","msSaveOrOpenBlob","pdfURL","a","document","createElement","download","href","body","appendChild","click","removeChild","downloadFile","faFileDownload","TagWrapper","tags","map","tag","index","Tag","key","faTag","span","backgroundColorLink","BookEditView","onEdit","StringField","value","faFileImport","fileList","Array","from","length","triggerImportFiles","cover","faImage","NumberField","pages","faLink","TagView","oldTag","onTagChange","faTrash","splice","removeTag","faPlus","BookDetail","isNew","editMode","setMode","bookObj","editBook","showAlert","setAlert","showDeleteDialog","setDeleteDialog","message","setMessage","unsavedChanges","setUnsavedChanges","history","useHistory","Dialog","faExclamationTriangle","confirmeText","confirmeClick","remove","id","goBack","abortText","abortClick","TopBar","BackButton","action","mode","title","tableName","updateWithCallback","setTimeout","updateBook","faSave","Message","placeholder","useItem","table","effect","setEffect","reducer","useCallback","state","undefined","error","useReducer","dispatch","get","then","catch","useItemByAttr","attr","attrValue","where","equals","first","Back","ToggleLeft","ToggleRight","EditToggle","props","IdToBook","match","db","MyAppDatabase","books","params","DialogWrapper","ButtonBar","max"],"mappings":"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","file":"static/js/37.2b38d661.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  label: string;\n  accept: string;\n  isMulti: boolean;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: FileList | null) => void;\n}\n\nconst FileField = ({\n  label,\n  accept,\n  isMulti,\n  icon,\n  transform,\n  onChange,\n}: $Props) => {\n  return (\n    <Field>\n      <LabelText>\n        {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n      </LabelText>\n      {isMulti && (\n        <Input\n          onChange={(e) => onChange(e.target.files)}\n          type=\"file\"\n          accept={accept}\n          multiple\n        ></Input>\n      )}\n      {!isMulti && (\n        <Input\n          onChange={(e) => onChange(e.target.files)}\n          accept={accept}\n          type=\"file\"\n        ></Input>\n      )}\n    </Field>\n  );\n};\n\nexport default FileField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 38px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1 auto;\n`;\n\nconst Input = styled.input`\n  flex: 3 1 auto;\n  height: 38px;\n  line-height: 30px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  icon: IconDefinition;\n  floatLeft?: boolean;\n  disabled?: boolean;\n  transform?: string | Transform;\n  onClick: (() => void) | ((e: any) => void);\n}\n\nconst IconButton = ({ icon, floatLeft, disabled, transform, onClick }: $Props) => {\n  return (\n    <>\n      {!disabled && (\n        <SimpleButton left={floatLeft} onClick={onClick}>\n          <Icon icon={icon} transform={transform} />\n        </SimpleButton>\n      )}\n      {disabled && (\n        <DisabledSimpleButton>\n          <Icon icon={icon} transform={transform} />\n        </DisabledSimpleButton>\n      )}\n    </>\n  );\n};\n\nexport default IconButton;\n\ntype FloatMpde = {\n  left?: boolean;\n};\n\nconst SimpleButton = styled.div<FloatMpde>`\n  color: ${({ theme }) => theme.buttons.color};\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  cursor: pointer;\n\n  font-size: 16px;\n  overflow: hidden;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: ${({ left }) => (left ? \"left\" : \"right\")};\n  padding: 10px;\n  margin: 5px;\n  border-radius: 10px;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n\n  transition: color 0.2s;\n\n  &:hover {\n    color: white;\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst DisabledSimpleButton = styled(SimpleButton)`\n  color: ${({ theme }) => theme.buttons.backgroundColor};\n  background-color: ${({ theme }) => theme.buttons.color};\n  cursor: not-allowed;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  text: string;\n  disabled?: boolean;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onClick: () => void;\n}\n\nconst TextButton = ({ text, icon, transform, disabled, onClick }: $Props) => {\n  return (\n    <SimpleButton onClick={onClick} disabled={disabled}>\n      {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {text}\n    </SimpleButton>\n  );\n};\n\nexport default TextButton;\n\nconst SimpleButton = styled.button`\n  color: ${({ theme }) => theme.buttons.color};\n  background-color: ${({ theme }) => theme.buttons.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: right;\n  padding: 10px;\n  margin: 5px;\n  border-radius: 10px;\n  cursor: pointer;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n  box-sizing: content-box;\n  border: none;\n\n  transition: color 0.2s;\n\n  &:hover {\n    color: ${({ theme }) => theme.buttons.hoverColor};\n  }\n\n  &:disabled {\n    background-color: ${({ theme }) => theme.buttons.disabled};\n  }\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n  margin-right: 5px;\n`;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Book from \"../../../../data/Book\";\nimport { Document, Page } from \"react-pdf\";\nimport { pdfjs } from \"react-pdf\";\n\nimport {\n  faArrowLeft,\n  faArrowRight,\n  faExternalLinkAlt,\n  faFileDownload,\n  faTag,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../../../form_elements/TextButton\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { LocalLoadingSpinner } from \"../../../Loading\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\ninterface $Props {\n  book: Book;\n}\n\nconst BookView = ({ book }: $Props) => {\n  const [base, setBase] = useState<string>(\"\");\n  const [numPages, setNumPages] = useState<number>(0);\n  const [pageNumber, setPageNumber] = useState<number>(1);\n\n  useEffect(() => {\n    const reader = new FileReader();\n    reader.readAsDataURL(book.data);\n    reader.onloadend = function () {\n      var base64data = reader.result;\n      if (base64data !== null) setBase(base64data.toString());\n    };\n  });\n\n  const showPdf = () => {\n    if (navigator.appVersion.toString().indexOf(\".NET\") > 0) {\n      window.navigator.msSaveBlob(book.data, book.name + \".pdf\"); // for IE browser\n    } else {\n      const url = URL.createObjectURL(book.data);\n      window.open(url, \"_blank\");\n    }\n  };\n\n  const downloadFile = (filename: string) => {\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n      navigator.msSaveOrOpenBlob(book.data, filename);\n    } else {\n      var pdfURL = window.URL.createObjectURL(book.data);\n      var a = document.createElement(\"a\");\n      a.download = filename;\n      a.href = pdfURL;\n      a.target = \"_blank\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    }\n  };\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n    setPageNumber(1);\n  };\n\n  const changePage = (offset: number) => {\n    setPageNumber((prevPageNumber) => prevPageNumber + offset);\n  };\n\n  const previousPage = () => {\n    changePage(-1);\n  };\n\n  const nextPage = () => {\n    changePage(1);\n  };\n\n  const onItemClick = ({\n    pageNumber: itemPageNumber,\n  }: {\n    pageNumber: string;\n  }) => {\n    setPageNumber(+itemPageNumber);\n  };\n\n  return (\n    <CenterWrapper>\n      <View>\n        <DocumentWrapper>\n          <div>\n            <TextButton\n              onClick={nextPage}\n              text={\"Next\"}\n              disabled={pageNumber >= numPages}\n              icon={faArrowRight}\n            />\n            <TextButton\n              onClick={previousPage}\n              text={\"Previous\"}\n              disabled={pageNumber <= 1}\n              icon={faArrowLeft}\n            />\n            Page {pageNumber || (numPages ? 1 : \"--\")} of {numPages || \"--\"}\n          </div>\n          <Document\n            file={base}\n            onLoadSuccess={onDocumentLoadSuccess}\n            onItemClick={onItemClick}\n            loading={LocalLoadingSpinner}\n          >\n            <Page pageNumber={pageNumber} loading={LocalLoadingSpinner} />\n          </Document>\n        </DocumentWrapper>\n      </View>\n      <View>\n        <Name>\n          <b>{book.name}</b>\n        </Name>\n        <TextButton\n          onClick={() => showPdf()}\n          text={\"Show PDF\"}\n          icon={faExternalLinkAlt}\n        />\n        <TextButton\n          onClick={() => downloadFile(book.name + \".pdf\")}\n          text={\"Downlaod PDF\"}\n          icon={faFileDownload}\n        />\n        <TagWrapper>\n          {book.tags &&\n            book.tags.map((tag: string, index: number) => (\n              <Tag key={index}>\n                <FontAwesomeIcon icon={faTag} /> {tag}\n              </Tag>\n            ))}\n        </TagWrapper>\n      </View>\n    </CenterWrapper>\n  );\n};\n\nexport default BookView;\n\nconst CenterWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst View = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  flex: 1 1 600px;\n  padding: 5px;\n  margin: 5px;\n  height: 100%;\n  max-width: calc(100% - 20px);\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n`;\n\nconst Name = styled.div`\n  height: auto;\n  float: left;\n  padding: 10px;\n  margin: 5px 5px 10px 5px;\n  width: calc(100% - 30px);\n  color: var(--card-title-color);\n  text-align: center;\n  border-radius: 5px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n`;\n\nconst Tag = styled.span`\n  display: inline-block;\n  background-color: ${({ theme }) => theme.tile.backgroundColorLink};\n  border-radius: 5px;\n  color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 10px;\n  padding: 10px;\n  margin-right: 5px;\n`;\n\nconst TagWrapper = styled.div`\n  flex: 1 1 auto;\n  height: auto;\n  float: left;\n  padding: 3px;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n`;\n\nconst DocumentWrapper = styled.div`\n  flex: 1 1 auto;\n  max-width: 100%;\n\n  .react-pdf__Document {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n  }\n  .react-pdf__Outline {\n    flex: 1 1 auto;\n    max-height: 600px;\n    overflow: hidden;\n  }\n  .react-pdf__Page {\n    flex: 1 1 auto;\n    width: 100%;\n    max-width: 600px;\n    overflow: hidden;\n    border-radius: 5px;\n\n    .react-pdf__Page__canvas {\n      width: 100% !important;\n      height: auto !important;\n    }\n    .react-pdf__Page__textContent {\n      width: 100% !important;\n      height: auto !important;\n      top: 0 !important;\n      left: 0 !important;\n      transform: none !important;\n    }\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Book from \"../../../../data/Book\";\n\nimport {\n  faLink,\n  faImage,\n  faFileImport,\n  faPlus,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport NumberField from \"../../../form_elements/NumberField\";\nimport StringField from \"../../../form_elements/StringField\";\nimport FileField from \"../../../form_elements/FileField\";\nimport IconButton from \"../../../form_elements/IconButton\";\n\ninterface $Props {\n  book: Book;\n  onEdit: (value: Book) => void;\n}\n\nconst BookEditView = ({ book, onEdit }: $Props) => {\n  const triggerImportFiles = (fileList: FileList | null) => {\n    if (fileList !== null) {\n      const files = Array.from(fileList);\n      if (files.length === 1) onEdit({ ...book, data: files[0] });\n    }\n  };\n\n  const onTagChange = (oldTag: string, value: string) => {\n    let tags = book.tags.map((tag: string) => {\n      if (tag === oldTag) {\n        return value;\n      } else {\n        return tag;\n      }\n    });\n    onEdit({ ...book, tags: tags });\n  };\n\n  const addNewTag = () => {\n    onEdit({\n      ...book,\n      tags: [...book.tags, \"\"],\n    });\n  };\n\n  const removeTag = (oldTag: string) => {\n    let tags = book.tags;\n    const index: number = tags.indexOf(oldTag);\n    if (index !== -1) {\n      tags.splice(index, 1);\n      onEdit({ ...book, tags: tags });\n    }\n  };\n\n  return (\n    <CenterWrapper>\n      <BookView>\n        <StringField\n          value={book.name}\n          label=\"Name\"\n          onChange={(name) => onEdit({ ...book, name: name })}\n        />\n        <FileField\n          label=\"\"\n          isMulti={false}\n          icon={faFileImport}\n          accept=\".pdf\"\n          onChange={(file) => triggerImportFiles(file)}\n        />\n        <StringField\n          value={book.cover}\n          label=\"Cover\"\n          icon={faImage}\n          onChange={(cover) => onEdit({ ...book, cover: cover })}\n        />\n        <NumberField\n          value={book.pages}\n          label=\"Pages\"\n          icon={faLink}\n          onChange={(pages) => onEdit({ ...book, pages: pages })}\n        />\n      </BookView>\n      <TagView>\n        {book.tags.map((tag: string, index: number) => {\n          return (\n            <TagWrapper key={index}>\n              <StringField\n                value={tag}\n                label=\"Tag\"\n                onChange={(name) => onTagChange(tag, name)}\n              />\n              <IconButton icon={faTrash} onClick={() => removeTag(tag)} />\n            </TagWrapper>\n          );\n        })}\n        <TagWrapper>\n          <IconButton icon={faPlus} onClick={() => addNewTag()} />\n        </TagWrapper>\n      </TagView>\n    </CenterWrapper>\n  );\n};\n\nexport default BookEditView;\n\nconst CenterWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`;\n\nconst BookView = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  flex: 1 1 600px;\n  padding: 5px;\n  margin: 5px;\n  height: 100%;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-items: flex-start;\n  align-content: flex-start;\n`;\n\nconst TagView = styled(BookView)``;\n\nconst TagWrapper = styled.div`\n  flex: 1 1 600px;\n  height: auto;\n  width: calc(100% - 6px);\n  float: left;\n  padding: 3px;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\nimport Book from \"../../../../data/Book\";\nimport { remove, updateWithCallback } from \"../../../../services/DatabaseService\";\n\nimport {\n  faArrowLeft,\n  faSave,\n  faTrash,\n  faExclamationTriangle,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport BookView from \"./BookView\";\nimport BookEditView from \"./BookEditView\";\nimport BackButton from \"../../../form_elements/BackButton\";\nimport IconButton from \"../../../form_elements/IconButton\";\nimport Dialog from \"../../../general_elements/Dialog\";\nimport { EditToggle, ToggleLeft, ToggleRight } from \"../../../general_elements/ToggleStyle\";\n\ninterface $Props {\n  book: Book;\n  isNew: boolean;\n}\n\nconst BookDetail = ({ book, isNew }: $Props) => {\n  const [editMode, setMode] = useState<boolean>(isNew);\n  const [bookObj, editBook] = useState<Book>(book);\n  const [showAlert, setAlert] = useState<boolean>(false);\n  const [showDeleteDialog, setDeleteDialog] = useState<boolean>(false);\n  const [message, setMessage] = useState<string>(\"\");\n  const [unsavedChanges, setUnsavedChanges] = useState<boolean>(false);\n  let history = useHistory();\n\n  const deleteBook = () => {\n    setDeleteDialog(true);\n  };\n\n  useEffect(() => {\n    if (bookObj !== book) {\n      setUnsavedChanges(true);\n    }\n  }, [bookObj, book]);\n\n  const updateBook = (tableName: string, bookObj: Book) => {\n    updateWithCallback(tableName, bookObj, (result) => {\n      if (result > 0) {\n        setUnsavedChanges(false);\n        setMessage(\"Saved successful!\");\n        setAlert(true);\n      } else {\n        setMessage(\"Something went wrong!\");\n        setAlert(true);\n      }\n      setTimeout(() => {\n        setAlert(false);\n      }, 3000);\n    });\n  };\n\n  return (\n    <>\n      {showDeleteDialog && (\n        <Dialog\n          message={`Delete ${book.name}?`}\n          icon={faExclamationTriangle}\n          confirmeText={\"Delete\"}\n          confirmeClick={() => {\n            remove(\"books\", book.id);\n            history.goBack();\n          }}\n          abortText={\"Back\"}\n          abortClick={() => {\n            setDeleteDialog(false);\n          }}\n        />\n      )}\n      <TopBar>\n        <BackButton icon={faArrowLeft} action={() => history.goBack()} />\n        <EditToggle mode={editMode.toString()}>\n          <ToggleLeft onClick={() => setMode(false)}>View</ToggleLeft>\n          <ToggleRight onClick={() => setMode(true)}>Edit</ToggleRight>\n        </EditToggle>\n        {unsavedChanges && <Icon icon={faExclamationTriangle} title={\"Unsaved changes!\"} />}\n        {editMode && (\n          <>\n            <IconButton onClick={() => updateBook(\"books\", bookObj)} icon={faSave} />\n            <IconButton onClick={() => deleteBook()} icon={faTrash} />\n            {message && showAlert && <Message>{message}</Message>}\n          </>\n        )}\n      </TopBar>\n      {editMode ? (\n        <BookEditView book={bookObj} onEdit={(value) => editBook(value)} />\n      ) : (\n        <BookView book={bookObj} />\n      )}\n    </>\n  );\n};\n\nexport default BookDetail;\n\nconst TopBar = styled.div`\n  color: ${({ theme }) => theme.tile.color};\n  font-size: 16px;\n  overflow: hidden;\n  flex: 1 1;\n  min-width: calc(100% - 20px);\n  height: 45px;\n  padding: 10px;\n`;\n\nconst Message = styled.div`\n  padding: 5px;\n  width: 150px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 5px;\n  float: right;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  float: right;\n  line-height: 30px;\n  display: block;\n  height: 30px;\n  padding: 10px;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  value: string;\n  label: string;\n  placeholder?: string;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: string) => void;\n}\n\nconst StringField = ({ value, label, placeholder, icon, transform, onChange }: $Props) => (\n  <Field>\n    <LabelText>\n      {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n    </LabelText>\n    <Input\n      type=\"text\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      placeholder={placeholder}\n    ></Input>\n  </Field>\n);\n\nexport default StringField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1 auto;\n`;\n\nconst Input = styled.input`\n  flex: 3 1 auto;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n  width: 0;\n  min-width: 100px;\n`;\n","import Dexie from \"dexie\";\nimport { useReducer, useEffect, useCallback, useState } from \"react\";\nimport Filter from \"../data/Filter\";\nimport ReactDOM from \"react-dom\";\n\ntype TableState<T> = [T[] | undefined, boolean, Dexie.DexieError | undefined];\ntype TableAction<T> =\n  | { type: \"resolved\"; data: T[] }\n  | { type: \"empty\" }\n  | { type: \"reset\" }\n  | { type: \"error\"; error: Dexie.DexieError };\n\ntype ItemState<T> = [T | undefined, boolean, Dexie.DexieError | undefined];\ntype ItemAction<T> =\n  | { type: \"resolved\"; data: T }\n  | { type: \"empty\" }\n  | { type: \"reset\" }\n  | { type: \"error\"; error: Dexie.DexieError };\n\nexport const useTable = <T, U>(table: Dexie.Table<T, U>): TableState<T> => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: TableState<T>, action: TableAction<T>): TableState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .toArray()\n          .then((data) => {\n            dispatch({\n              type: \"resolved\",\n              data,\n            });\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, effect]);\n\n  return state;\n};\n\nexport const useTableByFilter = <T, U>(\n  table: Dexie.Table<T, U>,\n  filters: Filter[]\n): TableState<T> => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const [filter, setFilter] = useState<Filter[]>(filters);\n  const reducer = useCallback((state: TableState<T>, action: TableAction<T>): TableState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      case \"reset\":\n        return [undefined, true, undefined];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (filter !== filters) {\n      ReactDOM.unstable_batchedUpdates(() => {\n        dispatch({ type: \"reset\" });\n        setFilter(filters);\n        setEffect(true);\n      });\n    }\n  }, [filter, filters, setEffect]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () => console.time(\"filtered get all\");\n      table\n        .filter((obj: T) => {\n          let test: boolean[] = [];\n          filters.forEach((filter) => {\n            if (typeof filter.value === \"string\") {\n              test.push(\n                // @ts-ignore\n                obj[filter.fieldName].toLowerCase().includes(filter.value.toLowerCase())\n              );\n            } else if (typeof filter.value === \"number\") {\n              // @ts-ignore\n              test.push(obj[filter.fieldName] === filter.value);\n            } else if (typeof filter.value === \"boolean\") {\n              // @ts-ignore\n              test.push(obj[filter.fieldName] === filter.value);\n            } else if (filter.value instanceof Array) {\n              let arrayTest: boolean = false;\n              filter.value.forEach((filterPart: string | boolean | number) => {\n                if (typeof filterPart === \"string\") {\n                  if (\n                    // @ts-ignore\n                    obj[filter.fieldName].toLowerCase().includes(filterPart.toLowerCase())\n                  )\n                    arrayTest = true;\n                } else if (typeof filterPart === \"number\") {\n                  // @ts-ignore\n                  if (obj[filter.fieldName] === filterPart) arrayTest = true;\n                } else if (typeof filterPart === \"boolean\") {\n                  // @ts-ignore\n                  if (obj[filter.fieldName] === filterPart) arrayTest = true;\n                }\n              });\n              test.push(arrayTest);\n            }\n          });\n\n          let result = true;\n          test.forEach((val) => {\n            if (!val) result = false;\n          });\n          return result;\n        })\n        .sortBy(\"name\")\n        .then((data) => {\n          console.timeEnd(\"filtered get all\");\n          dispatch({\n            type: \"resolved\",\n            data,\n          });\n        })\n        .catch((error) => {\n          dispatch({\n            type: \"error\",\n            error,\n          });\n        });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, effect, filters]);\n\n  return state;\n};\n\nexport const useItem = <T, U>(table: Dexie.Table<T, U>, id: U) => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: ItemState<T>, action: ItemAction<T>): ItemState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"empty\":\n        return [undefined, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .get(id)\n          .then((data) => {\n            if (data !== undefined) {\n              dispatch({\n                type: \"resolved\",\n                data,\n              });\n            } else {\n              dispatch({\n                type: \"empty\",\n              });\n            }\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, id, effect]);\n\n  return state;\n};\n\nexport const useItemByAttr = <T, U>(table: Dexie.Table<T, U>, attr: string, attrValue: string) => {\n  const [effect, setEffect] = useState<boolean>(true);\n  const reducer = useCallback((state: ItemState<T>, action: ItemAction<T>): ItemState<T> => {\n    switch (action.type) {\n      case \"resolved\":\n        return [action.data, false, undefined];\n      case \"empty\":\n        return [undefined, false, undefined];\n      case \"error\":\n        return [undefined, false, action.error];\n      default:\n        return [undefined, true, undefined];\n    }\n  }, []);\n\n  const [state, dispatch] = useReducer(reducer, [undefined, true, undefined]);\n\n  useEffect(() => {\n    if (effect) {\n      const getAndDispatch = () =>\n        table\n          .where(attr)\n          .equals(attrValue)\n          .first()\n          .then((data) => {\n            if (data !== undefined) {\n              dispatch({\n                type: \"resolved\",\n                data,\n              });\n            } else {\n              dispatch({\n                type: \"empty\",\n              });\n            }\n          })\n          .catch((error) => {\n            dispatch({\n              type: \"error\",\n              error,\n            });\n          });\n\n      getAndDispatch();\n      setEffect(false);\n    }\n  }, [table, attr, attrValue, effect]);\n\n  return state;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  icon: IconDefinition;\n  transform?: string | Transform;\n  action: () => void;\n}\n\nconst BackButton = ({ icon, transform, action }: $Props) => {\n  return (\n    <Back onClick={action}>\n      <Icon icon={icon} transform={transform} />\n    </Back>\n  );\n};\n\nexport default BackButton;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n  &:hover {\n    color: ${({ theme }) => theme.buttons.color};\n  }\n`;\n\nconst Back = styled.div`\n  float: left;\n  font-size: calc(${({ theme }) => theme.buttons.height} + 10px);\n  margin: 10px 0px 0px 10px;\n  cursor: pointer;\n`;\n","import styled from \"styled-components\";\n\nexport const ToggleLeft = styled.div`\n  width: auto;\n  padding: 10px;\n  margin: 5px 0px 5px 5px;\n  height: ${({ theme }) => theme.buttons.height};\n  line-height: ${({ theme }) => theme.buttons.height};\n  float: left;\n  cursor: pointer;\n  box-shadow: inset -2px -2px 5px 0px rgba(0, 0, 0, 0.3);\n  border-radius: 5px 0px 0px 5px;\n\n  transition: color 0.2s, background-color 0.2s;\n\n  &:hover {\n    color: ${({ theme }) => theme.buttons.hoverColor};\n  }\n`;\n\nexport const ToggleRight = styled(ToggleLeft)`\n  margin: 5px 5px 5px 0px;\n\n  border-radius: 0px 5px 5px 0px;\n`;\n\ntype EditMode = {\n  mode: string;\n};\n\nexport const EditToggle = styled.div<EditMode>`\n  width: auto;\n  height: ${({ theme }) => theme.buttons.height};\n  float: right;\n  color: ${({ theme }) => theme.buttons.color};\n\n  ${ToggleLeft} {\n    background-color: ${(props) => {\n      if (props.mode !== \"true\") {\n        return ({ theme }) => theme.buttons.backgroundColor;\n      } else {\n        return ({ theme }) => theme.tile.backgroundColor;\n      }\n    }};\n  }\n\n  ${ToggleRight} {\n    background-color: ${(props) => {\n      if (props.mode === \"true\") {\n        return ({ theme }) => theme.buttons.backgroundColor;\n      } else {\n        return ({ theme }) => theme.tile.backgroundColor;\n      }\n    }};\n  }\n`;\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { MyAppDatabase } from \"../../../../../database/MyDatabase\";\nimport { useItem } from \"../../../../../hooks/DexieHooks\";\nimport AppWrapper from \"../../../../AppWrapper\";\nimport { LoadingSpinner } from \"../../../../Loading\";\nimport BookDetail from \"../BookDetail\";\n\ntype TParams = { id: string };\n\nconst IdToBook = ({ match }: RouteComponentProps<TParams>) => {\n  const db = new MyAppDatabase();\n  const [book, loading, error] = useItem(db.books, +match.params.id);\n  return (\n    <AppWrapper>\n      {!error && loading && <LoadingSpinner />}\n      {error && !loading && <>Fail by Id</>}\n      {!error && !loading && book !== undefined && (\n        <BookDetail book={book} isNew={book.name === \"\" ? true : false} />\n      )}\n    </AppWrapper>\n  );\n};\n\nexport default IdToBook;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport TextButton from \"../form_elements/TextButton\";\n\ninterface $Props {\n  message: string;\n  icon?: IconDefinition;\n  confirmeText: string;\n  confirmeClick: () => void;\n  abortText: string;\n  abortClick: () => void;\n}\n\nconst Dialog = ({\n  message,\n  icon,\n  confirmeText,\n  confirmeClick,\n  abortText,\n  abortClick,\n}: $Props) => {\n  return (\n    <DialogWrapper>\n      <Message>\n        {icon ? <Icon icon={icon} /> : \"\"} {message}\n      </Message>\n      <ButtonBar>\n        <TextButton text={abortText} onClick={abortClick} />\n        <TextButton text={confirmeText} onClick={confirmeClick} />\n      </ButtonBar>\n    </DialogWrapper>\n  );\n};\n\nexport default Dialog;\n\nconst DialogWrapper = styled.div`\n  width: 180px;\n  position: absolute;\n  z-index: 1010;\n  top: 10px;\n  left: calc(50% - 100px);\n  padding: 10px;\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  color: ${({ theme }) => theme.tile.color};\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  text-align: center;\n`;\n\nconst ButtonBar = styled.div`\n  width: 100%;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  flex: 1 1 auto;\n  margin-right: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport { Transform } from \"@fortawesome/fontawesome-svg-core\";\n\ninterface $Props {\n  value: number;\n  label: string;\n  max?: number;\n  icon?: IconDefinition;\n  transform?: string | Transform;\n  onChange: (value: number) => void;\n}\n\nconst NumberField = ({\n  value,\n  max,\n  label,\n  icon,\n  transform,\n  onChange,\n}: $Props) => {\n  return (\n    <Field>\n      <LabelText>\n        {icon ? <Icon icon={icon} transform={transform} /> : \"\"} {label}\n      </LabelText>\n      {max && (\n        <Input\n          type=\"number\"\n          max={max}\n          value={value}\n          onChange={(e) => onChange(+e.target.value)}\n        />\n      )}\n      {!max && (\n        <Input\n          type=\"number\"\n          value={value}\n          onChange={(e) => onChange(+e.target.value)}\n        />\n      )}\n    </Field>\n  );\n};\n\nexport default NumberField;\n\nconst Field = styled.label`\n  color: ${({ theme }) => theme.tile.color};\n  background-color: ${({ theme }) => theme.tile.backgroundColor};\n  font-size: 16px;\n  overflow: hidden;\n  height: 38px;\n  line-height: 30px;\n  flex: 1 1 auto;\n  padding: 5px;\n  margin: 5px;\n  border-radius: 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n  width: 20px;\n  height: auto;\n  border-radius: 150px;\n  transition: color 0.2s;\n  color: ${({ theme }) => theme.main.highlight};\n`;\n\nconst LabelText = styled.div`\n  flex: 1 1;\n`;\n\nconst Input = styled.input`\n  flex: 1 1 auto;\n  max-width: 6em;\n  height: 38px;\n  padding: 5px;\n  box-sizing: border-box;\n  border: none;\n  background-color: ${({ theme }) => theme.input.backgroundColor};\n  color: ${({ theme }) => theme.input.color};\n  margin-left: 5px;\n  border-radius: 5px;\n`;\n"],"sourceRoot":""}